{
  "version": 3,
  "sources": ["source/dex/styler.js", "source/dex/Window.js", "source/dex/auth.js", "source/dex/theme.js", "source/dex/logs.js", "source/dex/main.js"],
  "sourcesContent": ["// styler.js - Placeholder for dynamic styles and elements.\n\nexport function applyBaseStyles() {\n    console.log(\"Applying base styles dynamically (e.g., for background animation or theme toggles).\");\n}\n\nfunction getCleanHostname() {\n    let hostname = window.location.hostname;\n\n    // Remove port if present (e.g., localhost:8000 -> localhost)\n    if (hostname.includes(':')) {\n        hostname = hostname.split(':')[0];\n    }\n\n    const parts = hostname.split('.');\n    const tlds = ['com', 'org', 'net', 'info', 'biz', 'co', 'io', 'company', 'xyz', 'app']; // Add more TLDs as needed\n\n    // Handle localhost and IP addresses\n    if (hostname === 'localhost' || hostname.match(/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/)) {\n        return hostname;\n    }\n\n    // Iterate from the end to find the significant part\n    // Example: test.dev.easter.company\n    // parts = [\"test\", \"dev\", \"easter\", \"company\"]\n    // i=3: \"company\" is a TLD\n    // i=2: \"easter\" is not a TLD, so current = \"easter\"\n    // i=1: \"dev\" is not a TLD, so current = \"dev\"\n    // i=0: \"test\" is not a TLD, so current = \"test\"\n    // The logic needs to find the *effective* domain and then the subdomain part.\n\n    // A simpler approach: find the last part that's not a TLD or common secondary domain,\n    // and if there's a part before it, use that as the subdomain.\n    let cleanName = hostname;\n    for (let i = parts.length - 1; i >= 0; i--) {\n        const part = parts[i];\n        if (tlds.includes(part)) {\n            // This is a TLD, continue to the next part\n            cleanName = parts.slice(0, i).join('.'); // Reconstruct hostname without TLDs\n        } else {\n            // Found a non-TLD part. This is likely the main domain or a subdomain.\n            // If there's only one part left (e.g., \"easter\"), or it's an IP/localhost after stripping TLDs, use it.\n            // If there are multiple parts (e.g., \"dev.easter\"), the last one is the domain, the one before is the subdomain.\n            const remainingParts = cleanName.split('.');\n            if (remainingParts.length > 1 && remainingParts[remainingParts.length - 1] !== 'www') {\n                return remainingParts[0]; // Return the deepest subdomain\n            } else if (remainingParts.length === 1 && remainingParts[0] === 'www') {\n                // If only \"www\", try to get the next part if it's there\n                if (i > 0 && !tlds.includes(parts[i-1])) {\n                    return parts[i-1];\n                }\n            }\n            return remainingParts[remainingParts.length -1]; // Default to main domain if no deep subdomain\n        }\n    }\n    \n    // Fallback for cases like \"www.google.com\" -> \"www\", or single word domains\n    // Let's refine the logic to always get the effective domain or the most specific subdomain.\n    const effectiveDomainParts = [];\n    let foundNonTld = false;\n    for (let i = parts.length - 1; i >= 0; i--) {\n        const part = parts[i];\n        if (tlds.includes(part) && !foundNonTld) {\n            // Skip TLDs from the right\n            continue;\n        } else {\n            foundNonTld = true;\n            effectiveDomainParts.unshift(part); // Add to the beginning\n        }\n    }\n\n    if (effectiveDomainParts.length === 0) {\n        return hostname; // Fallback if nothing found (e.g., just TLDs or malformed)\n    }\n\n    // Now effectiveDomainParts could be [\"easter\", \"company\"] or [\"dev\", \"easter\", \"company\"]\n    // If it's [\"www\", \"easter\"], we want \"easter\"\n    if (effectiveDomainParts[0] === 'www' && effectiveDomainParts.length > 1) {\n        return effectiveDomainParts[1];\n    }\n    \n    // If there's more than one part, return the first (deepest subdomain)\n    if (effectiveDomainParts.length > 1) {\n        return effectiveDomainParts[0];\n    }\n    \n    return effectiveDomainParts[0]; // Otherwise, return the single part (e.g., \"localhost\", \"easter\")\n}\n\n\n/**\n * Injects the navbar with conditional content based on login state\n * @param {boolean} isLoggedIn - Whether the user is logged in\n */\nexport function injectNavbar(isLoggedIn = false) {\n    const navRightContent = isLoggedIn\n        ? `\n            <i id=\"message-icon\" class='bx bxs-message-dots'></i>\n            <i id=\"user-icon\" class='bx bx-user'></i>\n            <i id=\"settings-icon\" class='bx bx-cog'></i>\n        `\n        : `\n            <button id=\"login-btn\" class=\"login-btn\">LOGIN</button>\n        `;\n\n    const navbarHTML = `\n        <div class=\"nav-left\">\n            <img src=\"/static/meta/favicon.svg\" alt=\"Easter Company Favicon\" class=\"navbar-favicon\">\n            <i class='bx bx-microphone' id=\"navbar-microphone\"></i>\n        </div>\n        <div class=\"nav-right\">\n            ${navRightContent}\n        </div>\n    `;\n\n    const navbar = document.createElement('nav');\n    navbar.innerHTML = navbarHTML;\n    document.body.prepend(navbar);\n}\n\nexport function injectFooter() {\n    const footerHTML = `\n        <div class=\"socials-section\">\n            <a href=\"https://facebook.com/eastercompany\" aria-label=\"Facebook\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-facebook-square\"></i></a>\n            <a href=\"https://linkedin.com/company/72223947\" aria-label=\"LinkedIn\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-linkedin\"></i></a>\n            <a href=\"https://instagram.com/eastercompany\" aria-label=\"Instagram\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-instagram-alt\"></i></a>\n            <a href=\"https://x.com/eastercompany\" aria-label=\"X\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-twitter\"></i></a>\n            <a href=\"https://github.com/eastercompany\" aria-label=\"GitHub\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-github\"></i></a>\n            <a href=\"https://youtube.com/@eastercompany\" aria-label=\"YouTube\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-youtube\"></i></a>\n        </div>\n    `;\n    \n    const footer = document.createElement('footer');\n    footer.innerHTML = footerHTML;\n    document.body.appendChild(footer);\n}", "// source/dex/Window.js\n\n/**\n * Creates and manages a single window instance.\n * @param {object} options - Configuration for the window.\n * @param {string} options.id - A unique ID for the window.\n * @param {string} [options.content] - The initial HTML content for the window (if not using tabs).\n * @param {Array<object>} [options.tabs] - An array of tab objects, each with a 'title', 'content', and optional 'scrollable' (default true).\n * @param {string} options.icon - Optional boxicon class for the header icon (e.g., 'bx-user', 'bxs-message-dots')\n * @param {function} options.onClose - Optional callback when window is closed\n * @param {function} options.onOpen - Optional callback when window is opened\n */\nexport function createWindow(options) {\n    let windowEl = null;\n    let closeCallback = options.onClose || null;\n    let openCallback = options.onOpen || null;\n\n    function open() {\n        if (windowEl) {\n            windowEl.classList.add('open');\n            // Call onOpen callback when reopening existing window\n            if (openCallback) {\n                setTimeout(openCallback, 10);\n            }\n            return;\n        }\n\n        let container = document.getElementById('windows-container');\n        if (!container) {\n            container = document.createElement('div');\n            container.id = 'windows-container';\n            container.className = 'windows-container';\n            document.body.appendChild(container);\n        }\n\n        windowEl = document.createElement('div');\n        windowEl.id = options.id;\n        windowEl.className = 'window';\n\n        const iconClass = options.icon || 'bx-window';\n        let tabBarHTML = '';\n        let windowTitleHTML = ''; // New variable for window title\n        let contentHTML;\n\n        if (options.tabs && options.tabs.length > 0) {\n            const tabTitles = options.tabs.map((tab, index) => {\n                let iconHtml;\n                if (tab.icon) {\n                    iconHtml = `<i class=\"bx ${tab.icon}\"></i>`;\n                } else if (tab.title && tab.title.length > 0) {\n                    const glyph = tab.title.charAt(0).toUpperCase();\n                    iconHtml = `<span class=\"tab-glyph\">${glyph}</span>`;\n                } else {\n                    iconHtml = `<i class=\"bx bx-question-mark\"></i>`; // Default fallback if no icon or title\n                }\n\n                return `\n                    <div class=\"tab ${index === 0 ? 'active' : ''}\" data-tab-index=\"${index}\">\n                        ${iconHtml}\n                        <span class=\"tab-title\">${tab.title}</span>\n                        <span class=\"tab-subtitle\" data-tab-subtitle=\"${index}\">Last updated: never</span>\n                    </div>\n                `;\n            }).join('');\n\n            tabBarHTML = `<div class=\"tab-bar\">${tabTitles}</div>`;\n\n            const tabContents = options.tabs.map((tab, index) => {\n                return `<div class=\"tab-content ${index === 0 ? 'active' : ''}\" data-tab-content=\"${index}\">${tab.content}</div>`;\n            }).join('');\n            contentHTML = `<div class=\"window-content\">${tabContents}</div>`;\n\n        } else {\n            // No tabs, so render a window title if provided\n            if (options.title) {\n                windowTitleHTML = `<div class=\"window-title\">${options.title}</div>`;\n            }\n            contentHTML = `<div class=\"window-content\">${options.content}</div>`;\n        }\n\n        const headerHTML = `\n            <div class=\"window-header\">\n                <i class=\"bx ${iconClass}\"></i>\n                ${tabBarHTML}\n                ${windowTitleHTML}\n                <i class=\"bx bx-x window-close\"></i>\n            </div>\n        `;\n\n        windowEl.innerHTML = headerHTML + contentHTML;\n        container.appendChild(windowEl);\n\n        const closeBtn = windowEl.querySelector('.window-close');\n        if (closeBtn) {\n            closeBtn.addEventListener('click', (e) => {\n                e.stopPropagation();\n                close();\n            });\n        }\n\n        // This logic remains the same, as it operates on the rendered elements\n        if (options.tabs && options.tabs.length > 0) {\n            const tabs = windowEl.querySelectorAll('.tab');\n            tabs.forEach(tab => {\n                tab.addEventListener('click', () => {\n                    const tabIndex = tab.getAttribute('data-tab-index');\n\n                    windowEl.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));\n                    tab.classList.add('active');\n\n                    windowEl.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));\n                    windowEl.querySelector(`.tab-content[data-tab-content=\"${tabIndex}\"]`).classList.add('active');\n                });\n            });\n        }\n\n        setTimeout(() => {\n            windowEl.classList.add('open');\n            // Call onOpen callback after window is opened\n            if (openCallback) {\n                openCallback();\n            }\n        }, 10);\n    }\n\n    function close(immediate = false) {\n        if (!windowEl) return;\n\n        if (immediate) {\n            windowEl.classList.add('switching');\n            windowEl.classList.remove('open');\n            setTimeout(() => {\n                if (windowEl && windowEl.parentNode) {\n                    windowEl.parentNode.removeChild(windowEl);\n                }\n                windowEl = null;\n            }, 200);\n        } else {\n            windowEl.classList.remove('open');\n            if (closeCallback) {\n                closeCallback();\n            }\n            setTimeout(() => {\n                if (windowEl && windowEl.parentNode) {\n                    windowEl.parentNode.removeChild(windowEl);\n                }\n                windowEl = null;\n            }, 400);\n        }\n    }\n\n    function setContent(content) {\n        if (windowEl) {\n            const contentDiv = windowEl.querySelector('.window-content');\n            if (contentDiv) {\n                // This is more complex with tabs, for now, we just replace the whole content\n                contentDiv.innerHTML = content;\n            }\n        }\n    }\n    \n    function isOpen() {\n        return windowEl && windowEl.classList.contains('open');\n    }\n\n    return {\n        open,\n        close,\n        setContent,\n        isOpen,\n        id: options.id,\n    };\n}\n", "// auth.js - Simple email-based authentication\n\nconst AUTH_KEY = 'easter_user_email';\n\n/**\n * Check if user is logged in\n * @returns {boolean}\n */\nexport function isLoggedIn() {\n    return localStorage.getItem(AUTH_KEY) !== null;\n}\n\n/**\n * Get the logged in user's email\n * @returns {string|null}\n */\nexport function getUserEmail() {\n    return localStorage.getItem(AUTH_KEY);\n}\n\n/**\n * Login with email\n * @param {string} email\n */\nexport function login(email) {\n    if (!email || !email.includes('@')) {\n        throw new Error('Invalid email address');\n    }\n\n    // Restrict to @easter.company emails only\n    if (!email.trim().toLowerCase().endsWith('@easter.company')) {\n        throw new Error('Access denied. Please check your credentials.');\n    }\n\n    localStorage.setItem(AUTH_KEY, email.trim());\n}\n\n/**\n * Logout user\n */\nexport function logout() {\n    localStorage.removeItem(AUTH_KEY);\n}\n", "// theme.js - Theme management system\n\nconst THEME_KEY = 'easter_theme';\n\nexport const THEMES = {\n    AUTO: 'auto',\n    DEFAULT: 'default',\n    ANIMATED: 'animated'\n};\n\n/**\n * Get the current theme preference\n * @returns {string}\n */\nexport function getCurrentTheme() {\n    return localStorage.getItem(THEME_KEY) || THEMES.AUTO;\n}\n\n/**\n * Determine which theme to apply based on Auto rules\n * @returns {string} Either THEMES.DEFAULT or THEMES.ANIMATED\n */\nfunction resolveAutoTheme() {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const isFullscreen = window.innerHeight === window.screen.height && window.innerWidth === window.screen.width;\n\n    // Use Legacy if window is above 1920x1080\n    if (width > 1920 && height > 1080) {\n        return THEMES.ANIMATED;\n    }\n\n    // Use Default if equal to 1920x1080 AND fullscreen, OR below 1920x1080\n    if ((width === 1920 && height === 1080 && isFullscreen) || width <= 1920 || height <= 1080) {\n        return THEMES.DEFAULT;\n    }\n\n    return THEMES.DEFAULT;\n}\n\n/**\n * Set the theme\n * @param {string} theme\n */\nexport function setTheme(theme) {\n    if (!Object.values(THEMES).includes(theme)) {\n        throw new Error('Invalid theme');\n    }\n    localStorage.setItem(THEME_KEY, theme);\n    applyTheme(theme);\n}\n\n/**\n * Apply the theme to the document\n * @param {string} theme - The theme preference (can be AUTO, DEFAULT, or ANIMATED)\n * @param {boolean} skipTransition - Whether to skip the transition animation\n */\nexport function applyTheme(theme, skipTransition = false) {\n    const body = document.body;\n\n    // Resolve AUTO theme to actual theme\n    const resolvedTheme = theme === THEMES.AUTO ? resolveAutoTheme() : theme;\n\n    if (!skipTransition) {\n        // Add transition class for fade effect\n        body.classList.add('theme-transitioning');\n\n        // Remove transition class after animation\n        setTimeout(() => {\n            body.classList.remove('theme-transitioning');\n        }, 300);\n    }\n\n    // Remove all theme classes\n    Object.values(THEMES).forEach(t => {\n        body.classList.remove(`theme-${t}`);\n    });\n\n    // Add current theme class\n    body.classList.add(`theme-${theme}`);\n\n    // Handle background element with smooth transition\n    if (resolvedTheme === THEMES.ANIMATED) {\n        // Create background element if it doesn't exist\n        if (!document.querySelector('.background')) {\n            const bg = document.createElement('div');\n            bg.className = 'background';\n            document.body.prepend(bg);\n        }\n    } else {\n        // Remove background element with fade out\n        const bg = document.querySelector('.background');\n        if (bg) {\n            if (skipTransition) {\n                bg.remove();\n            } else {\n                bg.style.animation = 'fadeOutBackground 0.4s ease forwards';\n                setTimeout(() => {\n                    bg.remove();\n                }, 400);\n            }\n        }\n    }\n}\n\n/**\n * Initialize theme on page load\n */\nexport function initTheme() {\n    const currentTheme = getCurrentTheme();\n    applyTheme(currentTheme, true); // Skip transition on initial load\n\n    // Add resize listener for auto theme\n    if (currentTheme === THEMES.AUTO) {\n        let resizeTimeout;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimeout);\n            resizeTimeout = setTimeout(() => {\n                applyTheme(THEMES.AUTO);\n            }, 300); // Debounce resize events\n        });\n    }\n}\n", "// Easter Company - Logs\n\n// Standardized error/placeholder message component\nfunction createPlaceholderMessage(type, message, actionText = null) {\n    const iconMap = {\n        'config': 'bx-cog',\n        'error': 'bx-error-circle',\n        'empty': 'bx-info-circle',\n        'offline': 'bx-wifi-off'\n    };\n\n    const icon = iconMap[type] || 'bx-info-circle';\n    const actionHtml = actionText ? `<p class=\"placeholder-action\">${actionText}</p>` : '';\n\n    return `\n        <div class=\"tab-placeholder\">\n            <i class='bx ${icon} placeholder-icon'></i>\n            <p class=\"placeholder-message\">${message}</p>\n            ${actionHtml}\n        </div>\n    `;\n}\n\nexport function getLogsContent() {\n    return `\n        <div id=\"logs-container\" class=\"logs-container\">\n            <p>Loading logs...</p>\n        </div>\n    `;\n}\n\nexport async function updateLogs() {\n    const logsContainer = document.getElementById('logs-container');\n    if (!logsContainer) return false;\n\n    // Reset class state\n    logsContainer.classList.remove('placeholder-active');\n\n    const serviceMapString = localStorage.getItem('service_map');\n    if (!serviceMapString) {\n        logsContainer.classList.add('placeholder-active');\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'config',\n            'No service map configured.',\n            'Please upload your service-map.json in Settings to enable log monitoring.'\n        );\n        return false;\n    }\n\n    let serviceMapData;\n    try {\n        serviceMapData = JSON.parse(serviceMapString);\n    } catch (e) {\n        console.error(\"Error parsing service_map from localStorage:\", e);\n        logsContainer.classList.add('placeholder-active');\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'error',\n            'Invalid service map data.',\n            'Please re-upload a valid service-map.json file in Settings.'\n        );\n        return false;\n    }\n\n    // Find the event service\n    let eventService = null;\n    if (serviceMapData && typeof serviceMapData.services === 'object') {\n        const serviceGroups = ['cs', 'be', 'th'];\n        for (const group of serviceGroups) {\n            if (Array.isArray(serviceMapData.services[group])) {\n                const found = serviceMapData.services[group].find(s => s.short_name === 'event' || s.id === 'event' || s.id === 'dex-event-service');\n                if (found) {\n                    eventService = found;\n                    break;\n                }\n            }\n        }\n    }\n\n    if (!eventService) {\n        logsContainer.classList.add('placeholder-active');\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'error',\n            'Event service not found in service map.',\n            'Please ensure dex-event-service is configured in your service-map.json.'\n        );\n        return false;\n    }\n\n    const domain = eventService.domain === '0.0.0.0' ? 'localhost' : eventService.domain;\n    const logsUrl = `http://${domain}:${eventService.port}/logs`;\n\n    try {\n        const response = await fetch(logsUrl);\n        if (!response.ok) {\n            logsContainer.classList.add('placeholder-active');\n            logsContainer.innerHTML = createPlaceholderMessage(\n                'offline',\n                'Event service is offline.',\n                'Please ensure the event service is running.'\n            );\n            return false;\n        }\n\n        const logsData = await response.json();\n        if (!logsData || logsData.length === 0) {\n            logsContainer.classList.add('placeholder-active');\n            logsContainer.innerHTML = createPlaceholderMessage(\n                'empty',\n                'No logs found.',\n                'Service logs will appear here when available.'\n            );\n            return false;\n        }\n\n        const hiddenServiceIDs = [\"local-ollama-0\", \"local-cache-0\", \"cloud-cache-0\", \"cloud-cache-1\"];\n\n        const filteredLogsData = logsData.filter(logReport => !hiddenServiceIDs.includes(logReport.id));\n\n        // Reverse the order of log reports so newest appear at the top\n        filteredLogsData.forEach(logReport => {\n            logReport.logs.reverse();\n        });\n        filteredLogsData.reverse();\n\n        const logsHtml = filteredLogsData.map(logReport => {\n            const logs = logReport.logs.join('\\n');\n            return `\n                <div class=\"log-report\">\n                    <div class=\"log-report-header\">\n                        <h3>${logReport.id}</h3>\n                        <button class=\"copy-logs-btn\" data-logs=\"${escape(logs)}\">\n                            <i class=\"bx bx-copy\"></i>\n                        </button>\n                    </div>\n                    <pre class=\"log-content\">${logs}</pre>\n                </div>\n            `;\n        }).join('');\n\n        logsContainer.innerHTML = logsHtml;\n\n        // Add event listeners for copy buttons\n        document.querySelectorAll('.copy-logs-btn').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const logs = unescape(btn.dataset.logs);\n                navigator.clipboard.writeText(logs).then(() => {\n                    const icon = btn.querySelector('i');\n                    icon.classList.remove('bx-copy');\n                    icon.classList.add('bx-check');\n                    setTimeout(() => {\n                        icon.classList.remove('bx-check');\n                        icon.classList.add('bx-copy');\n                    }, 2000);\n                });\n            });\n        });\n\n        return true;\n\n    } catch (error) {\n        console.error('Error fetching logs:', error);\n        logsContainer.classList.add('placeholder-active');\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'offline',\n            'Failed to load logs.',\n            'The event service may be offline, unreachable, or blocked by a browser extension (e.g., ad blocker).'\n        );\n        return false;\n    }\n}\n", "// Easter Company - Universal JS Entrypoint\nimport { applyBaseStyles, injectNavbar, injectFooter } from './styler.js';\nimport { createWindow } from './Window.js';\nimport { isLoggedIn, login, getUserEmail } from './auth.js';\nimport { initTheme, setTheme, getCurrentTheme, THEMES } from './theme.js';\nimport { getLogsContent, updateLogs } from './logs.js';\n\nfunction onReady() {\n    console.log(\"Welcome to Easter Company.\");\n\n    initTheme();\n    applyBaseStyles();\n    const loggedIn = isLoggedIn();\n    injectNavbar(loggedIn);\n    injectFooter();\n\n    // --- Window Management ---\n    const footer = document.querySelector('footer');\n    let openWindow = null;\n\n    function onWindowClose() {\n        openWindow = null;\n        footer?.classList.remove('hide');\n        document.querySelectorAll('.nav-right i').forEach(icon => icon.classList.remove('active', 'inactive'));\n    }\n\n    function handleWindow(windowInstance, clickedIcon = null) {\n        const isCurrentlyOpen = openWindow && openWindow.id === windowInstance.id;\n        if (openWindow) {\n            openWindow.close(isCurrentlyOpen ? false : true);\n        }\n        if (!isCurrentlyOpen) {\n            setTimeout(() => {\n                windowInstance.open();\n                openWindow = windowInstance;\n                document.querySelectorAll('.nav-right i').forEach(icon => {\n                    const isActive = icon === clickedIcon;\n                    icon.classList.toggle('active', isActive);\n                    icon.classList.toggle('inactive', !isActive && clickedIcon);\n                });\n                footer?.classList.add('hide');\n            }, openWindow ? 220 : 0);\n        } else {\n            openWindow = null;\n        }\n    }\n\n    // --- Placeholder & Content Functions ---\n    function createPlaceholderMessage(type, message, actionText = null) {\n        const iconMap = { config: 'bx-cog', error: 'bx-error-circle', empty: 'bx-info-circle', offline: 'bx-wifi-off' };\n        const icon = iconMap[type] || 'bx-info-circle';\n        const actionHtml = actionText ? `<p class=\"placeholder-action\">${actionText}</p>` : '';\n        return `<div class=\"tab-placeholder\"><i class='bx ${icon} placeholder-icon'></i><p class=\"placeholder-message\">${message}</p>${actionHtml}</div>`;\n    }\n\n    let lastServicesUpdate = null, lastEventsUpdate = null, lastLogsUpdate = null, lastModelsUpdate = null;\n    const getServicesContent = () => localStorage.getItem('service_map') ? `<div id=\"services-widgets\" class=\"system-monitor-widgets\"><p>Loading services...</p></div>` : createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\n    const getModelsContent = () => localStorage.getItem('service_map') ? `<div id=\"models-widgets\" class=\"system-monitor-widgets\"><p>Loading models...</p></div>` : createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\n    const getEventsContent = () => `<div id=\"events-timeline\" class=\"events-timeline\"><p>Loading events...</p></div>`;\n\n    // --- Event Templates & Formatting ---\n    const EVENT_TEMPLATES = {\n        \"message_received\": \"{user} posted in {channel}: {message}\",\n        \"action_performed\": \"{actor} {action} {target}\",\n        \"log_entry\": \"[{level}] {message}\",\n        \"error_occurred\": \"ERROR: {error}\",\n        \"status_change\": \"{entity} changed status to {new_status}\",\n        \"metric_recorded\": \"{metric_name}: {value}{unit}\",\n        \"messaging.user.joined_voice\": \"{user_name} joined voice channel {channel_name}\",\n        \"messaging.user.left_voice\": \"{user_name} left voice channel {channel_name}\",\n        \"messaging.user.sent_message\": \"{user_name} in {channel_name}: {content}\",\n        \"messaging.bot.sent_message\": \"Bot sent in {channel_name}: {content}\",\n        \"messaging.bot.status_update\": \"Bot status changed to {status}: {details}\",\n        \"messaging.user.speaking_started\": \"{user_name} started speaking\",\n        \"messaging.user.speaking_stopped\": \"{user_name} stopped speaking\",\n        \"messaging.user.transcribed\": \"{user_name} said: {transcription}\",\n        \"messaging.user.joined_server\": \"{user_name} joined {server_name}\",\n        \"voice_speaking_started\": \"User {user_id} started speaking in voice channel {channel_id}\",\n        \"voice_speaking_stopped\": \"User {user_id} stopped speaking in voice channel {channel_id}\",\n        \"voice_transcribed\": \"{user_name} said: {transcription}\",\n        \"engagement.decision\": \"Engagement Decision: {decision} ({reason})\",\n        \"bot_response\": \"Bot Responded: {response}\"\n    };\n\n    function formatEventSummary(type, data) {\n        let template = EVENT_TEMPLATES[type];\n        if (type === 'voice_transcribed' && !data.user_name && data.user_id) {\n             template = \"User {user_id} said in voice channel {channel_id}: {transcription}\";\n        }\n        if (!template) return type;\n        let summary = template.replace(/\\{(\\w+)\\}/g, (match, key) => {\n            return data[key] !== undefined && data[key] !== null ? data[key] : match;\n        });\n        if ((type === 'messaging.user.transcribed' || type === 'voice_transcribed') && \n            data.detected_language && data.detected_language !== 'en' && data.english_translation) {\n            summary += ` (Translation: ${data.english_translation})`;\n        }\n        return summary;\n    }\n\n    // --- Data Fetching & UI Updates ---\n    function updateTabTimestamp(tabIndex, timestamp) {\n        const subtitleElement = document.querySelector(`.tab[data-tab-index=\"${tabIndex}\"] .tab-subtitle`);\n        if (!subtitleElement) return;\n        if (!timestamp) {\n            subtitleElement.textContent = 'Last updated: never';\n            return;\n        }\n        const now = Date.now();\n        const seconds = (now - timestamp) / 1000;\n        let timeStr;\n        if (seconds < 30) { \n            timeStr = `${Math.floor(seconds)}s ago`;\n        } else { \n            subtitleElement.textContent = 'Last updated: never';\n            return;\n        }\n        subtitleElement.textContent = `Last updated: ${timeStr}`;\n    }\n\n    async function fetchSystemData() {\n        if (!localStorage.getItem('service_map')) return null;\n        try {\n            const serviceMap = JSON.parse(localStorage.getItem('service_map'));\n            const eventService = (serviceMap.services?.cs || []).find(s => s.id === 'dex-event-service');\n            if (!eventService) return null;\n            const domain = eventService.domain === '0.0.0.0' ? 'localhost' : eventService.domain;\n            const url = `http://${domain}:${eventService.port}/system_monitor_metrics`;\n            const response = await fetch(url);\n            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n            return await response.json();\n        } catch (error) {\n            console.error('Error fetching system data:', error);\n            return null;\n        }\n    }\n\n    async function updateSystemMonitor() {\n        const widgetsContainer = document.getElementById('services-widgets');\n        if (!widgetsContainer) return;\n\n        const data = await fetchSystemData();\n\n        if (!data || !data.services) {\n            widgetsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load system metrics.', 'The event service may be offline or unreachable.');\n            return;\n        }\n\n        lastServicesUpdate = Date.now();\n        updateTabTimestamp(4, lastServicesUpdate);\n        const services = data.services || [];\n        \n        Array.from(widgetsContainer.children).forEach(child => {\n            if (!child.classList.contains('service-widget')) child.remove();\n        });\n\n        function sanitizeValue(value) { if (!value || value === 'N/A' || value === 'unknown' || value.trim() === '') { return '-'; } return value; }\n        function extractMajorMinorPatch(versionStr) { if (!versionStr || versionStr === 'N/A' || versionStr === 'unknown') { return '-'; } const match = versionStr.match(/^(\\d+\\.\\d+\\.\\d+)/); if (match) return match[0]; return versionStr.split('.').slice(0, 3).join('.') || '-'; }\n        function truncateAddress(address) { if (!address || address.length <= 28) return address; return address.substring(0, 28) + '...'; }\n        function getStatColor(value) { if (!value || !value.includes('%')) return '#666'; const percent = parseFloat(value); if (percent < 30) return '#00ff00'; if (percent < 60) return '#88ff00'; if (percent < 80) return '#ffaa00'; return '#ff0000'; }\n        function formatUptime(uptimeStr) { if (!uptimeStr || uptimeStr === 'N/A' || uptimeStr === 'unknown') return '-'; const match = uptimeStr.match(/(?:(\\d+)d)?(?:(\\d+)h)?(?:(\\d+)m)?(?:([\\d.]+)s)?/); if (!match) return '-'; const days = parseInt(match[1]) || 0; const hours = parseInt(match[2]) || 0; const minutes = parseInt(match[3]) || 0; const seconds = parseFloat(match[4]) || 0; const totalSeconds = (days * 86400) + (hours * 3600) + (minutes * 60) + seconds; const totalDays = Math.floor(totalSeconds / 86400); if (totalDays > 0) return `${totalDays}d`; const totalHours = Math.floor(totalSeconds / 3600); if (totalHours > 0) return `${totalHours}h`; const totalMinutes = Math.floor(totalSeconds / 60); if (totalMinutes > 0) return `${totalMinutes}m`; return `${Math.floor(totalSeconds)}s`; }\n        \n        function generateWidgetHtml(service) {\n            const isOnline = service.status === 'online';\n            const statusClass = isOnline ? 'service-widget-online' : 'service-widget-offline';\n            const statusIcon = isOnline ? 'bx-check-circle' : 'bx-x-circle';\n            const statusText = isOnline ? 'OK' : 'BAD';\n            let versionDisplay = service.version ? extractMajorMinorPatch(service.version.str) : '-';\n            const cpuValue = sanitizeValue(service.cpu);\n            const memoryValue = sanitizeValue(service.memory);\n            const cpuColor = getStatColor(cpuValue);\n            const memoryColor = getStatColor(memoryValue);\n            const uptime = formatUptime(service.uptime);\n            let detailsHtml = '';\n            if (isOnline) {\n                detailsHtml = `<div class=\"service-widget-info\"><span class=\"info-label\">Version:</span><span class=\"info-value metric-version-monospace\">${versionDisplay}</span></div><div class=\"service-widget-footer\"><div class=\"service-widget-item\"><i class=\"bx bx-time-five\"></i><span>${uptime}</span></div><div class=\"service-widget-item\"><i class=\"bx bxs-microchip\" style=\"color: ${cpuColor};\"></i><span style=\"color: ${cpuColor};\">${cpuValue}</span></div><div class=\"service-widget-item\"><i class=\"bx bxs-chip\" style=\"color: ${memoryColor};\"></i><span style=\"color: ${memoryColor};\">${memoryValue}</span></div></div>`;\n            } else {\n                 detailsHtml = `<div class=\"service-widget-footer offline\"><span>OFFLINE</span></div>`;\n            }\n            return `<div class=\"service-widget ${statusClass}\" data-service-id=\"${service.id}\"><div class=\"service-widget-header\"><i class=\"bx ${statusIcon}\"></i><h3>${service.short_name || service.id}</h3><span class=\"service-widget-status\">${statusText}</span></div><div class=\"service-widget-body\"><div class=\"service-widget-info\"><span class=\"info-label\">Address:</span><span class=\"info-value\">${truncateAddress(service.domain && service.port ? `${service.domain}:${service.port}` : '')}</span></div>${detailsHtml}</div></div>`;\n        }\n\n        const existingWidgetsMap = new Map(Array.from(widgetsContainer.querySelectorAll('.service-widget')).map(widget => [widget.dataset.serviceId, widget]));\n        const incomingServiceIds = new Set(services.map(s => s.id));\n        \n        for (const [id, widget] of existingWidgetsMap) {\n            if (!incomingServiceIds.has(id)) {\n                widget.remove();\n            }\n        }\n        \n        services.forEach(service => {\n            const newHtml = generateWidgetHtml(service);\n            const existingWidget = existingWidgetsMap.get(service.id);\n            if (existingWidget) {\n                if (existingWidget.outerHTML !== newHtml) existingWidget.outerHTML = newHtml;\n            } else {\n                widgetsContainer.insertAdjacentHTML('beforeend', newHtml);\n            }\n        });\n    }\n\n    async function updateModelsTab() {\n        const widgetsContainer = document.getElementById('models-widgets');\n        if (!widgetsContainer) return;\n        \n        const data = await fetchSystemData();\n\n        if (!data) { // General fetch failure\n            widgetsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load model status.');\n            return;\n        }\n\n        lastModelsUpdate = Date.now();\n        updateTabTimestamp(3, lastModelsUpdate);\n\n        const models = data.models || [];\n        const whisperStatus = data.whisper;\n\n        // Clear loading message before rendering\n        Array.from(widgetsContainer.children).forEach(child => {\n            if (!child.classList.contains('service-widget')) child.remove();\n        });\n\n        function generateWhisperWidgetHtml(whisper) {\n            const isReady = whisper.status === 'Ready';\n            const statusClass = isReady ? 'service-widget-online' : 'service-widget-offline';\n            const statusText = isReady ? 'READY' : 'NOT FOUND';\n            const icon = 'bxs-microphone-alt';\n\n            return `\n                <div class=\"service-widget ${statusClass}\" data-whisper-widget>\n                    <div class=\"service-widget-header\">\n                        <i class=\"bx ${icon}\"></i>\n                        <h3>Whisper</h3>\n                        <span class=\"service-widget-status\">${statusText}</span>\n                    </div>\n                    <div class=\"service-widget-body\">\n                        <div class=\"service-widget-info\">\n                            <span class=\"info-label\">Status:</span>\n                            <span class=\"info-value\">${whisper.status}</span>\n                        </div>\n                        <div class=\"service-widget-info\">\n                            <span class=\"info-label\">Model:</span>\n                            <span class=\"info-value\">large-v3-turbo</span>\n                        </div>\n                    </div>\n                </div>`;\n        }\n\n        function generateModelWidgetHtml(model) {\n            const isDownloaded = model.status === 'Downloaded';\n            const statusClass = isDownloaded ? 'service-widget-online' : 'service-widget-offline';\n            const statusText = isDownloaded ? 'OK' : 'MISSING';\n            const sizeDisplay = isDownloaded && model.size > 0 ? `${(model.size / 1e9).toFixed(2)} GB` : '-';\n            \n            let modelDisplayName = model.name;\n            if (model.type === 'custom' && modelDisplayName.endsWith(':latest')) {\n                modelDisplayName = modelDisplayName.replace(':latest', '');\n            }\n\n            return `<div class=\"service-widget ${statusClass}\" data-model-name=\"${model.name}\"><div class=\"service-widget-header\"><i class=\"bx ${isDownloaded ? 'bx-check-circle' : 'bx-x-circle'}\"></i><h3>${modelDisplayName}</h3><span class=\"service-widget-status\">${statusText}</span></div><div class=\"service-widget-body\"><div class=\"service-widget-info\"><span class=\"info-label\">Type:</span><span class=\"info-value\">${model.type}</span></div><div class=\"service-widget-info\"><span class=\"info-label\">Size:</span><span class=\"info-value\">${sizeDisplay}</span></div></div></div>`;\n        }\n        \n        let finalHtml = '';\n        if (whisperStatus) {\n            finalHtml += generateWhisperWidgetHtml(whisperStatus);\n        }\n        finalHtml += models.map(generateModelWidgetHtml).join('');\n\n        if (!finalHtml) {\n             widgetsContainer.innerHTML = createPlaceholderMessage('empty', 'No models found.');\n             return;\n        }\n\n        // Basic diffing to avoid re-rendering identical content\n        if (widgetsContainer.innerHTML !== finalHtml) {\n            widgetsContainer.innerHTML = finalHtml;\n        }\n    }\n\n    async function updateEventsTimeline() {\n        const eventsContainer = document.getElementById('events-timeline');\n        if (!eventsContainer) return;\n        const serviceMapString = localStorage.getItem('service_map');\n        if (!serviceMapString) {\n            eventsContainer.innerHTML = createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\n            return;\n        }\n        let eventService = null;\n        try {\n            const serviceMapData = JSON.parse(serviceMapString);\n            eventService = (serviceMapData.services?.cs || []).find(s => s.id === 'dex-event-service');\n        } catch (e) { eventsContainer.innerHTML = createPlaceholderMessage('error', 'Invalid service map data.'); return; }\n        if (!eventService) { eventsContainer.innerHTML = createPlaceholderMessage('error', 'Event service not found in service map.'); return; }\n        \n        const domain = eventService.domain === '0.0.0.0' ? 'localhost' : eventService.domain;\n        const eventsUrl = `http://${domain}:${eventService.port}/events?ml=50&format=json`;\n        \n        try {\n            const expandedEventIds = new Set(\n                Array.from(eventsContainer.querySelectorAll('.event-item.expanded'))\n                    .map(el => el.dataset.eventId)\n                    .filter(id => id)\n            );\n\n            const response = await fetch(eventsUrl);\n            if (!response.ok) throw new Error('Service is offline or unreachable.');\n            \n            const data = await response.json();\n            const events = data.events || [];\n\n            if (events.length === 0) {\n                eventsContainer.innerHTML = createPlaceholderMessage('empty', 'No events found.');\n                return;\n            }\n\n            const createEventElement = (event) => {\n                let eventData = event.event;\n                if (typeof eventData === 'string') {\n                    try {\n                        eventData = JSON.parse(eventData);\n                    } catch (e) {\n                        return null;\n                    }\n                }\n\n                const type = eventData.type;\n                const isExpandable = type === 'engagement.decision';\n                const borderClass = isExpandable ? 'event-border-blue' : 'event-border-grey';\n                const cursorClass = isExpandable ? 'cursor-pointer' : '';\n                \n                const isExpanded = expandedEventIds.has(event.id);\n                const expandedClass = isExpanded ? 'expanded' : '';\n                const detailsStyle = isExpanded ? 'display: block;' : 'display: none;';\n                \n                const utcDate = new Date(event.timestamp * 1000);\n                const timeStr = utcDate.toLocaleTimeString(navigator.language, { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n                const dateStr = utcDate.toLocaleDateString(navigator.language, { month: 'short', day: 'numeric' });\n\n                const summary = formatEventSummary(type, eventData);\n\n                let detailsHtml = '';\n                if (isExpandable) {\n                    detailsHtml = `\n                        <div class=\"event-details\" style=\"${detailsStyle}\">\n                            <div class=\"event-details-header\">\n                                <h4>Event Details</h4>\n                                <i class=\"bx bx-x close-details-btn\"></i>\n                            </div>\n                            <div class=\"event-detail-row\">\n                                <span class=\"detail-label\">Engagement Model:</span>\n                                <span class=\"detail-value\">${eventData.engagement_model || 'N/A'}</span>\n                            </div>\n                            <div class=\"event-detail-row\">\n                                <span class=\"detail-label\">Response Model:</span>\n                                <span class=\"detail-value\">${eventData.response_model || 'N/A'}</span>\n                            </div>\n                            <div class=\"event-detail-block\">\n                                <span class=\"detail-label\">Context History:</span>\n                                <pre class=\"detail-pre\">${eventData.context_history || 'None'}</pre>\n                            </div>\n                            <div class=\"event-detail-block\">\n                                <span class=\"detail-label\">Raw Engagement Output:</span>\n                                <pre class=\"detail-pre\">${eventData.engagement_raw || 'None'}</pre>\n                            </div>\n                            <div class=\"event-detail-block\">\n                                <span class=\"detail-label\">Raw Response Output:</span>\n                                <pre class=\"detail-pre\">${eventData.response_raw || 'None'}</pre>\n                            </div>\n                        </div>\n                    `;\n                }\n\n                const tempDiv = document.createElement('div');\n                tempDiv.className = `event-item ${borderClass} ${cursorClass} ${expandedClass}`;\n                tempDiv.dataset.eventId = event.id;\n                tempDiv.onclick = function(e) {\n                    if (!isExpandable) return;\n                    this.classList.toggle('expanded');\n                    const details = this.querySelector('.event-details');\n                    if(details) details.style.display = details.style.display === 'none' ? 'block' : 'none';\n                };\n                \n                tempDiv.innerHTML = `\n                    <div class=\"event-time\">\n                        <span class=\"event-time-main\">${timeStr}</span>\n                        <span class=\"event-date\">${dateStr}</span>\n                    </div>\n                    <div class=\"event-content\">\n                        <div class=\"event-service\">${event.service}</div>\n                        <div class=\"event-message\">${summary}</div>\n                        ${detailsHtml}\n                    </div>\n                `;\n\n                if (isExpandable) {\n                    const closeBtn = tempDiv.querySelector('.close-details-btn');\n                    if (closeBtn) {\n                        closeBtn.addEventListener('click', (e) => {\n                            e.stopPropagation();\n                            const item = e.target.closest('.event-item');\n                            if (item) {\n                                item.classList.remove('expanded');\n                                const details = item.querySelector('.event-details');\n                                if (details) details.style.display = 'none';\n                            }\n                        });\n                    }\n                }\n\n                return tempDiv;\n            };\n\n            const currentChildren = Array.from(eventsContainer.children);\n            const currentMap = new Map(currentChildren.map(el => [el.dataset.eventId, el]));\n            const newIds = new Set(events.map(e => e.id));\n\n            currentChildren.forEach(child => {\n                if (child.dataset.eventId && !newIds.has(child.dataset.eventId)) {\n                    child.remove();\n                }\n            });\n\n            let previousElement = null;\n\n            events.forEach((event, index) => {\n                let el = currentMap.get(event.id);\n                if (!el) {\n                    el = createEventElement(event);\n                    if (!el) return;\n                }\n                if (index === 0) {\n                    if (eventsContainer.firstElementChild !== el) {\n                        eventsContainer.prepend(el);\n                    }\n                } else {\n                    if (previousElement && previousElement.nextElementSibling !== el) {\n                        previousElement.after(el);\n                    }\n                }\n                previousElement = el;\n            });\n\n            lastEventsUpdate = Date.now();\n            updateTabTimestamp(1, lastEventsUpdate);\n\n        } catch (error) {\n            console.error('Error fetching events:', error);\n            if (eventsContainer.children.length === 0) {\n                eventsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load events.', 'The event service may be offline or unreachable.');\n            }\n        }\n    }\n\n    async function initializeMessageWindow() {\n        await Promise.all([\n            updateSystemMonitor(),\n            updateModelsTab(),\n            updateEventsTimeline(),\n            updateLogs().then(success => { if (success) lastLogsUpdate = Date.now(); updateTabTimestamp(2, lastLogsUpdate); })\n        ]);\n\n        const timestampInterval = setInterval(() => {\n            if (!messageWindow.isOpen()) return clearInterval(timestampInterval);\n            updateTabTimestamp(2, lastLogsUpdate);\n            updateTabTimestamp(1, lastEventsUpdate);\n            updateTabTimestamp(3, lastModelsUpdate);\n            updateTabTimestamp(4, lastServicesUpdate);\n        }, 1000);\n\n        const refreshInterval = setInterval(() => {\n            if (!messageWindow.isOpen()) return clearInterval(refreshInterval);\n            updateEventsTimeline();\n            updateLogs().then(success => { if (success) lastLogsUpdate = Date.now(); updateTabTimestamp(2, lastLogsUpdate); });\n        }, 5000);\n\n        const servicesRefreshInterval = setInterval(() => {\n            if (!messageWindow.isOpen()) return clearInterval(servicesRefreshInterval);\n            updateSystemMonitor();\n            updateModelsTab();\n        }, 30000);\n    }\n    \n    // Settings Window (Full Implementation)\n    function getSettingsContent() {\n        const currentTheme = getCurrentTheme();\n        const userEmail = getUserEmail() || 'user@easter.company';\n        const notificationState = { enabled: Notification.permission === 'granted', supported: 'Notification' in window };\n        const analyticsEnabled = localStorage.getItem('easter_analytics_enabled') !== 'false';\n        \n        return `\n            <div class=\"theme-selector\">\n                ${Object.values(THEMES).map(theme => `\n                    <div class=\"theme-card ${currentTheme === theme ? 'active' : ''}\" data-theme=\"${theme}\">\n                        <div class=\"theme-preview theme-preview-${theme.toLowerCase()}\"></div>\n                        <div class=\"theme-info\">\n                            <h3>${theme}</h3>\n                            <p>${theme === THEMES.AUTO ? 'Automatic theme selection.' : theme === THEMES.DEFAULT ? 'Simple, black, default.' : 'Colourful, not bright.'}</p>\n                            <span class=\"theme-badge\">${currentTheme === theme ? 'Active' : 'Select'}</span>\n                        </div>\n                    </div>\n                `).join('')}\n            </div>\n\n            <div class=\"settings-divider\"></div>\n\n            <div class=\"settings-section\">\n                <h2 class=\"settings-section-title\">Configuration</h2>\n                <div class=\"settings-list\">\n                    <div class=\"settings-item settings-item-input\">\n                        <div>\n                            <label class=\"settings-item-label\">Services</label>\n                            <span class=\"settings-item-description\">Upload your service-map.json to connect this client to your services.</span>\n                        </div>\n                        <div class=\"file-upload-container\">\n                            <button class=\"file-upload-btn\" id=\"service-map-upload-btn\">Choose File</button>\n                            <span class=\"file-upload-name\" id=\"service-map-file-name\">${localStorage.getItem('service_map') ? 'service-map.json' : 'No file selected'}</span>\n                            <input type=\"file\" class=\"file-upload-input\" id=\"service-map-input\" accept=\".json,application/json\" hidden>\n                            ${localStorage.getItem('service_map') ? '<button class=\"file-delete-btn\" id=\"service-map-delete-btn\" title=\"Delete service map\">\u00D7</button>' : ''}\n                        </div>\n                        <div class=\"file-upload-error\" id=\"service-map-error\" style=\"display: none;\"></div>\n                    </div>\n                    <div class=\"settings-item settings-item-input\">\n                        <div>\n                            <label class=\"settings-item-label\">Servers</label>\n                            <span class=\"settings-item-description\">Upload your server-map.json to connect this client to your servers.</span>\n                        </div>\n                        <div class=\"file-upload-container\">\n                            <button class=\"file-upload-btn\" id=\"server-map-upload-btn\">Choose File</button>\n                            <span class=\"file-upload-name\" id=\"server-map-file-name\">${localStorage.getItem('server_map') ? 'server-map.json' : 'No file selected'}</span>\n                            <input type=\"file\" class=\"file-upload-input\" id=\"server-map-input\" accept=\".json,application/json\" hidden>\n                            ${localStorage.getItem('server_map') ? '<button class=\"file-delete-btn\" id=\"server-map-delete-btn\" title=\"Delete server map\">\u00D7</button>' : ''}\n                        </div>\n                        <div class=\"file-upload-error\" id=\"server-map-error\" style=\"display: none;\"></div>\n                    </div>\n                    <div class=\"settings-item settings-item-input\">\n                        <div>\n                            <label class=\"settings-item-label\">User Settings</label>\n                            <span class=\"settings-item-description\">Upload your options.json to configure user preferences.</span>\n                        </div>\n                        <div class=\"file-upload-container\">\n                            <button class=\"file-upload-btn\" id=\"options-upload-btn\">Choose File</button>\n                            <span class=\"file-upload-name\" id=\"options-file-name\">${localStorage.getItem('user_options') ? 'options.json' : 'No file selected'}</span>\n                            <input type=\"file\" class=\"file-upload-input\" id=\"options-input\" accept=\".json,application/json\" hidden>\n                            ${localStorage.getItem('user_options') ? '<button class=\"file-delete-btn\" id=\"options-delete-btn\" title=\"Delete user settings\">\u00D7</button>' : ''}\n                        </div>\n                        <div class=\"file-upload-error\" id=\"options-error\" style=\"display: none;\"></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"settings-divider\"></div>\n\n            <div class=\"settings-section\">\n                <h2 class=\"settings-section-title\">Preferences</h2>\n                <div class=\"settings-list\">\n                    <div class=\"settings-item\">\n                        <div class=\"settings-item-info\">\n                            <span class=\"settings-item-label\">Notifications</span>\n                            <span class=\"settings-item-description\">${notificationState.supported ? 'Receive desktop notifications' : 'Not supported in this browser'}</span>\n                        </div>\n                        <label class=\"toggle-switch\">\n                            <input type=\"checkbox\" id=\"notifications-toggle\" ${notificationState.enabled ? 'checked' : ''} ${!notificationState.supported ? 'disabled' : ''}>\n                            <span class=\"toggle-slider\"></span>\n                        </label>\n                    </div>\n                    <div class=\"settings-item\" id=\"microphone-setting-item\">\n                        <div class=\"settings-item-info\">\n                            <span class=\"settings-item-label\">Access Microphone</span>\n                            <span class=\"settings-item-description\">Allow access to your microphone</span>\n                        </div>\n                        <label class=\"toggle-switch\">\n                            <input type=\"checkbox\" id=\"microphone-toggle\" disabled>\n                            <span class=\"toggle-slider\"></span>\n                        </label>\n                    </div>\n                    <div class=\"settings-item\">\n                        <div class=\"settings-item-info\">\n                            <span class=\"settings-item-label\">Analytics</span>\n                            <span class=\"settings-item-description\">Help improve the platform (enables debug mode)</span>\n                        </div>\n                        <label class=\"toggle-switch\">\n                            <input type=\"checkbox\" id=\"analytics-toggle\" ${analyticsEnabled ? 'checked' : ''}>\n                            <span class=\"toggle-slider\"></span>\n                        </label>\n                    </div>\n                </div>\n            </div>`;\n    }\n    \n    function attachSettingsListeners() {\n        const settingsContent = document.querySelector('#settings-window .window-content');\n        if (!settingsContent) return;\n\n        settingsContent.querySelectorAll('.theme-card').forEach(card => {\n            card.addEventListener('click', function() {\n                const newTheme = this.dataset.theme;\n                setTheme(newTheme);\n                settingsWindow.setContent(getSettingsContent());\n                attachSettingsListeners();\n            });\n        });\n\n        function attachFileUploadListeners(buttonId, inputId, nameId, errorId, deleteId, localStorageKey, expectedFileName) {\n            const uploadBtn = document.getElementById(buttonId);\n            const fileInput = document.getElementById(inputId);\n            const fileNameSpan = document.getElementById(nameId);\n            const errorDiv = document.getElementById(errorId);\n            const deleteBtn = document.getElementById(deleteId);\n\n            if (uploadBtn && fileInput) {\n                uploadBtn.onclick = () => fileInput.click();\n                fileInput.onchange = (e) => {\n                    const file = e.target.files[0];\n                    if (!file) return;\n                    if (file.name !== expectedFileName) {\n                        errorDiv.textContent = `File must be named \"${expectedFileName}\"`;\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                        return;\n                    }\n                    const reader = new FileReader();\n                    reader.onload = (event) => {\n                        try {\n                            const jsonContent = JSON.parse(event.target.result);\n                            localStorage.setItem(localStorageKey, JSON.stringify(jsonContent));\n                            fileNameSpan.textContent = expectedFileName;\n                            errorDiv.style.display = 'none';\n                            settingsWindow.setContent(getSettingsContent());\n                            attachSettingsListeners();\n                        } catch (error) {\n                            errorDiv.textContent = 'Invalid JSON format';\n                            errorDiv.style.display = 'block';\n                            fileInput.value = '';\n                        }\n                    };\n                    reader.onerror = () => {\n                        errorDiv.textContent = 'Failed to read file';\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                    };\n                    reader.readAsText(file);\n                };\n            }\n            if (deleteBtn) {\n                deleteBtn.onclick = () => {\n                    localStorage.removeItem(localStorageKey);\n                    settingsWindow.setContent(getSettingsContent());\n                    attachSettingsListeners();\n                };\n            }\n        }\n        attachFileUploadListeners('service-map-upload-btn', 'service-map-input', 'service-map-file-name', 'service-map-error', 'service-map-delete-btn', 'service_map', 'service-map.json');\n        attachFileUploadListeners('server-map-upload-btn', 'server-map-input', 'server-map-file-name', 'server-map-error', 'server-map-delete-btn', 'server_map', 'server-map.json');\n        attachFileUploadListeners('options-upload-btn', 'options-input', 'options-file-name', 'options-error', 'options-delete-btn', 'user_options', 'options.json');\n        \n        const notificationToggle = document.getElementById('notifications-toggle');\n        if (notificationToggle) {\n            const micState = 'permissions' in navigator && navigator.permissions.query({ name: 'microphone' });\n            if (!micState || micState.state === 'denied') notificationToggle.disabled = true;\n\n            notificationToggle.onclick = async (e) => {\n                if (e.target.checked) {\n                    try { const permission = await Notification.requestPermission(); if (permission !== 'granted') e.target.checked = false; }\n                    catch (error) { e.target.checked = false; }\n                } else if (Notification.permission === 'granted') {\n                    alert('To disable notifications, please use your browser settings.');\n                    e.target.checked = true;\n                }\n            };\n        }\n\n        const microphoneToggle = document.getElementById('microphone-toggle');\n        async function updateMicrophoneToggleState() {\n            const micState = 'permissions' in navigator ? await navigator.permissions.query({ name: 'microphone' }) : null;\n            if (microphoneToggle) {\n                microphoneToggle.disabled = !micState || micState.state === 'denied';\n                microphoneToggle.checked = micState?.state === 'granted';\n            }\n            const description = document.querySelector('#microphone-setting-item .settings-item-description');\n            if (description) description.textContent = micState ? (micState.state === 'granted' ? 'Microphone access granted' : 'Allow access to your microphone') : 'Not supported in this browser';\n        }\n        updateMicrophoneToggleState(); \n        if (microphoneToggle && !microphoneToggle.disabled) {\n            microphoneToggle.onclick = async (e) => {\n                if (e.target.checked) {\n                    try { await navigator.mediaDevices.getUserMedia({ audio: true }); updateMicrophoneToggleState(); }\n                    catch (error) { e.target.checked = false; updateMicrophoneToggleState(); }\n                } else {\n                    const micState = 'permissions' in navigator && await navigator.permissions.query({ name: 'microphone' });\n                    if (micState?.state === 'granted') {\n                        alert('To disable microphone access, please use your browser settings.');\n                        e.target.checked = true;\n                    }\n                }\n            };\n        }\n\n        const analyticsToggle = document.getElementById('analytics-toggle');\n        if (analyticsToggle) {\n            analyticsToggle.checked = localStorage.getItem('easter_analytics_enabled') !== 'false';\n            analyticsToggle.onclick = (e) => {\n                const enabled = e.target.checked;\n                localStorage.setItem('easter_analytics_enabled', enabled);\n                window.EASTER_ANALYTICS_ENABLED = enabled;\n                window.EASTER_DEBUG_MODE = enabled;\n            };\n        }\n    }\n\n    // Define windows with definitions in scope\n    const loginWindow = createWindow({ id: 'login-window', title: 'Welcome', content: `<div class=\"login-split-container\"><div class=\"login-top-section\"><div class=\"login-form\"><p>Enter your email to continue</p><form id=\"login-form\"><input type=\"email\" id=\"email-input\" placeholder=\"you@easter.company\" required autocomplete=\"email\" /><button type=\"submit\">Continue</button><div id=\"login-error\" class=\"error\" style=\"display: none;\"></div></form></div></div><div class=\"login-bottom-section\"><div class=\"login-disclaimer\"><h2>Early Access</h2><p>Contribute on <a href=\"https://github.com/eastercompany\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a> to unlock early access.</p></div></div></div>`, icon: 'bx-log-in', onClose: onWindowClose });\n    const userWindow = createWindow({ id: 'user-window', title: 'User Profile', content: `<p>Logged in as: ${getUserEmail() || 'Unknown'}</p>`, icon: 'bx-user', onClose: onWindowClose });\n    \n    const settingsWindow = createWindow({ id: 'settings-window', title: 'Settings', content: getSettingsContent(), icon: 'bx-cog', onClose: onWindowClose, onOpen: () => {\n        settingsWindow.setContent(getSettingsContent());\n        setTimeout(attachSettingsListeners, 50);\n    }});\n\n    const messageWindow = createWindow({\n        id: 'message-window',\n        tabs: [\n            { icon: 'bx-bell', title: 'Notifications', content: createPlaceholderMessage('empty', 'No notifications yet.'), 'data-tab-index': 0 },\n            { icon: 'bx-calendar-event', title: 'Events', content: getEventsContent(), 'data-tab-index': 1 }, // Index 1 for Events\n            { icon: 'bx-history', title: 'Logs', content: getLogsContent(), 'data-tab-index': 2 },      // Index 2 for Logs\n            { icon: 'bx-brain', title: 'Models', content: getModelsContent(), 'data-tab-index': 3 },        // Index 3 for Models\n            { icon: 'bx-line-chart', title: 'Services', content: getServicesContent(), 'data-tab-index': 4 } // Index 4 for Services\n        ],\n        icon: 'bxs-message-dots',\n        onClose: onWindowClose,\n        onOpen: () => setTimeout(initializeMessageWindow, 100)\n    });\n\n    if (loggedIn) {\n        document.getElementById('user-icon')?.addEventListener('click', (e) => handleWindow(userWindow, e.currentTarget));\n        document.getElementById('message-icon')?.addEventListener('click', (e) => handleWindow(messageWindow, e.currentTarget));\n        document.getElementById('settings-icon')?.addEventListener('click', (e) => handleWindow(settingsWindow, e.currentTarget));\n    } else {\n        document.getElementById('login-btn')?.addEventListener('click', () => {\n            handleWindow(loginWindow);\n            setTimeout(() => {\n                document.getElementById('login-form')?.addEventListener('submit', e => {\n                    e.preventDefault();\n                    try {\n                        login(document.getElementById('email-input').value);\n                        window.location.reload();\n                    } catch (error) {\n                        const errorDiv = document.getElementById('login-error');\n                        if(errorDiv) {\n                            errorDiv.textContent = error.message;\n                            errorDiv.style.display = 'block';\n                        }\n                    }\n                });\n            }, 100);\n        });\n    }\n}\n\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", onReady);\n} else {\n    onReady();\n}"],
  "mappings": "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",
  "names": ["applyBaseStyles", "injectNavbar", "isLoggedIn", "navbarHTML", "navbar", "injectFooter", "footerHTML", "footer", "createWindow", "options", "windowEl", "closeCallback", "openCallback", "open", "container", "iconClass", "tabBarHTML", "windowTitleHTML", "contentHTML", "tab", "index", "iconHtml", "headerHTML", "closeBtn", "e", "close", "tabIndex", "t", "c", "immediate", "setContent", "content", "contentDiv", "isOpen", "AUTH_KEY", "isLoggedIn", "getUserEmail", "login", "email", "THEME_KEY", "THEMES", "getCurrentTheme", "resolveAutoTheme", "width", "height", "isFullscreen", "setTheme", "theme", "applyTheme", "skipTransition", "body", "resolvedTheme", "t", "bg", "initTheme", "currentTheme", "resizeTimeout", "createPlaceholderMessage", "type", "message", "actionText", "icon", "actionHtml", "getLogsContent", "updateLogs", "logsContainer", "serviceMapString", "serviceMapData", "e", "eventService", "serviceGroups", "group", "found", "s", "logsUrl", "response", "logsData", "hiddenServiceIDs", "filteredLogsData", "logReport", "logsHtml", "logs", "btn", "error", "onReady", "initTheme", "applyBaseStyles", "loggedIn", "isLoggedIn", "injectNavbar", "injectFooter", "footer", "openWindow", "onWindowClose", "icon", "handleWindow", "windowInstance", "clickedIcon", "isCurrentlyOpen", "isActive", "createPlaceholderMessage", "type", "message", "actionText", "actionHtml", "lastServicesUpdate", "lastEventsUpdate", "lastLogsUpdate", "lastModelsUpdate", "getServicesContent", "getModelsContent", "getEventsContent", "EVENT_TEMPLATES", "formatEventSummary", "data", "template", "summary", "match", "key", "updateTabTimestamp", "tabIndex", "timestamp", "subtitleElement", "seconds", "timeStr", "fetchSystemData", "eventService", "s", "url", "response", "error", "updateSystemMonitor", "widgetsContainer", "services", "child", "sanitizeValue", "value", "extractMajorMinorPatch", "versionStr", "truncateAddress", "address", "getStatColor", "percent", "formatUptime", "uptimeStr", "days", "hours", "minutes", "totalSeconds", "totalDays", "totalHours", "totalMinutes", "generateWidgetHtml", "service", "isOnline", "statusClass", "statusIcon", "statusText", "versionDisplay", "cpuValue", "memoryValue", "cpuColor", "memoryColor", "uptime", "detailsHtml", "existingWidgetsMap", "widget", "incomingServiceIds", "id", "newHtml", "existingWidget", "updateModelsTab", "models", "whisperStatus", "generateWhisperWidgetHtml", "whisper", "isReady", "generateModelWidgetHtml", "model", "isDownloaded", "sizeDisplay", "modelDisplayName", "finalHtml", "updateEventsTimeline", "eventsContainer", "serviceMapString", "eventsUrl", "expandedEventIds", "el", "events", "createEventElement", "event", "eventData", "isExpandable", "borderClass", "cursorClass", "isExpanded", "expandedClass", "detailsStyle", "utcDate", "dateStr", "tempDiv", "e", "details", "closeBtn", "item", "currentChildren", "currentMap", "newIds", "previousElement", "index", "initializeMessageWindow", "updateLogs", "success", "timestampInterval", "messageWindow", "refreshInterval", "servicesRefreshInterval", "getSettingsContent", "currentTheme", "getCurrentTheme", "userEmail", "getUserEmail", "notificationState", "analyticsEnabled", "THEMES", "theme", "attachSettingsListeners", "settingsContent", "card", "newTheme", "setTheme", "settingsWindow", "attachFileUploadListeners", "buttonId", "inputId", "nameId", "errorId", "deleteId", "localStorageKey", "expectedFileName", "uploadBtn", "fileInput", "fileNameSpan", "errorDiv", "deleteBtn", "file", "reader", "jsonContent", "notificationToggle", "micState", "microphoneToggle", "updateMicrophoneToggleState", "description", "analyticsToggle", "enabled", "loginWindow", "createWindow", "userWindow", "getLogsContent", "login"]
}
