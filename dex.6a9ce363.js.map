{
  "version": 3,
  "sources": ["source/dex/styler.js", "source/dex/Window.js", "source/dex/auth.js", "source/dex/theme.js", "source/dex/logs.js", "source/dex/utils.js", "source/dex/templates.js", "source/dex/events.js", "source/dex/notifications.js", "source/dex/blueprints.js", "source/dex/monitor.js", "source/dex/settings.js", "source/dex/roadmap.js", "source/dex/main.js"],
  "sourcesContent": ["// styler.js - Placeholder for dynamic styles and elements.\n\nexport function applyBaseStyles() {\n    console.log(\"Applying base styles dynamically (e.g., for background animation or theme toggles).\");\n}\n\nfunction getCleanHostname() {\n    let hostname = window.location.hostname;\n\n    // Remove port if present (e.g., localhost:8000 -> localhost)\n    if (hostname.includes(':')) {\n        hostname = hostname.split(':')[0];\n    }\n\n    const parts = hostname.split('.');\n    const tlds = ['com', 'org', 'net', 'info', 'biz', 'co', 'io', 'company', 'xyz', 'app']; // Add more TLDs as needed\n\n    // Handle localhost and IP addresses\n    if (hostname === 'localhost' || hostname.match(/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/)) {\n        return hostname;\n    }\n\n    // Iterate from the end to find the significant part\n    // Example: test.dev.easter.company\n    // parts = [\"test\", \"dev\", \"easter\", \"company\"]\n    // i=3: \"company\" is a TLD\n    // i=2: \"easter\" is not a TLD, so current = \"easter\"\n    // i=1: \"dev\" is not a TLD, so current = \"dev\"\n    // i=0: \"test\" is not a TLD, so current = \"test\"\n    // The logic needs to find the *effective* domain and then the subdomain part.\n\n    // A simpler approach: find the last part that's not a TLD or common secondary domain,\n    // and if there's a part before it, use that as the subdomain.\n    let cleanName = hostname;\n    for (let i = parts.length - 1; i >= 0; i--) {\n        const part = parts[i];\n        if (tlds.includes(part)) {\n            // This is a TLD, continue to the next part\n            cleanName = parts.slice(0, i).join('.'); // Reconstruct hostname without TLDs\n        } else {\n            // Found a non-TLD part. This is likely the main domain or a subdomain.\n            // If there's only one part left (e.g., \"easter\"), or it's an IP/localhost after stripping TLDs, use it.\n            // If there are multiple parts (e.g., \"dev.easter\"), the last one is the domain, the one before is the subdomain.\n            const remainingParts = cleanName.split('.');\n            if (remainingParts.length > 1 && remainingParts[remainingParts.length - 1] !== 'www') {\n                return remainingParts[0]; // Return the deepest subdomain\n            } else if (remainingParts.length === 1 && remainingParts[0] === 'www') {\n                // If only \"www\", try to get the next part if it's there\n                if (i > 0 && !tlds.includes(parts[i-1])) {\n                    return parts[i-1];\n                }\n            }\n            return remainingParts[remainingParts.length -1]; // Default to main domain if no deep subdomain\n        }\n    }\n    \n    // Fallback for cases like \"www.google.com\" -> \"www\", or single word domains\n    // Let's refine the logic to always get the effective domain or the most specific subdomain.\n    const effectiveDomainParts = [];\n    let foundNonTld = false;\n    for (let i = parts.length - 1; i >= 0; i--) {\n        const part = parts[i];\n        if (tlds.includes(part) && !foundNonTld) {\n            // Skip TLDs from the right\n            continue;\n        } else {\n            foundNonTld = true;\n            effectiveDomainParts.unshift(part); // Add to the beginning\n        }\n    }\n\n    if (effectiveDomainParts.length === 0) {\n        return hostname; // Fallback if nothing found (e.g., just TLDs or malformed)\n    }\n\n    // Now effectiveDomainParts could be [\"easter\", \"company\"] or [\"dev\", \"easter\", \"company\"]\n    // If it's [\"www\", \"easter\"], we want \"easter\"\n    if (effectiveDomainParts[0] === 'www' && effectiveDomainParts.length > 1) {\n        return effectiveDomainParts[1];\n    }\n    \n    // If there's more than one part, return the first (deepest subdomain)\n    if (effectiveDomainParts.length > 1) {\n        return effectiveDomainParts[0];\n    }\n    \n    return effectiveDomainParts[0]; // Otherwise, return the single part (e.g., \"localhost\", \"easter\")\n}\n\n\n/**\n * Injects the navbar with conditional content based on login state\n * @param {boolean} isLoggedIn - Whether the user is logged in\n */\nexport function injectNavbar(isLoggedIn = false) {\n    const navRightContent = isLoggedIn\n        ? `\n            <i id=\"message-icon\" class='bx bxs-message-dots'></i>\n            <i id=\"user-icon\" class='bx bx-user'></i>\n            <i id=\"settings-icon\" class='bx bx-cog'></i>\n        `\n        : `\n            <button id=\"login-btn\" class=\"login-btn\">LOGIN</button>\n        `;\n\n    const navbarHTML = `\n        <div class=\"nav-left\">\n            <img src=\"/static/meta/favicon.svg\" alt=\"Easter Company Favicon\" class=\"navbar-favicon\">\n            <i class='bx bx-microphone' id=\"navbar-microphone\"></i>\n        </div>\n        <div class=\"nav-right\">\n            ${navRightContent}\n        </div>\n    `;\n\n    const navbar = document.createElement('nav');\n    navbar.innerHTML = navbarHTML;\n    document.body.prepend(navbar);\n}\n\nexport function injectFooter() {\n    const footerHTML = `\n        <div class=\"socials-section\">\n            <a href=\"https://facebook.com/eastercompany\" aria-label=\"Facebook\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-facebook-square\"></i></a>\n            <a href=\"https://linkedin.com/company/72223947\" aria-label=\"LinkedIn\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-linkedin\"></i></a>\n            <a href=\"https://instagram.com/eastercompany\" aria-label=\"Instagram\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-instagram-alt\"></i></a>\n            <a href=\"https://x.com/eastercompany\" aria-label=\"X\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-twitter\"></i></a>\n            <a href=\"https://github.com/eastercompany\" aria-label=\"GitHub\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-github\"></i></a>\n            <a href=\"https://youtube.com/@eastercompany\" aria-label=\"YouTube\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-youtube\"></i></a>\n        </div>\n    `;\n    \n    const footer = document.createElement('footer');\n    footer.innerHTML = footerHTML;\n    document.body.appendChild(footer);\n}", "// source/dex/Window.js\n\n/**\n * Creates and manages a single window instance.\n * @param {object} options - Configuration for the window.\n * @param {string} options.id - A unique ID for the window.\n * @param {string} [options.content] - The initial HTML content for the window (if not using tabs).\n * @param {Array<object>} [options.tabs] - An array of tab objects, each with a 'title', 'content', and optional 'scrollable' (default true).\n * @param {string} options.icon - Optional boxicon class for the header icon (e.g., 'bx-user', 'bxs-message-dots')\n * @param {function} options.onClose - Optional callback when window is closed\n * @param {function} options.onOpen - Optional callback when window is opened\n */\nexport function createWindow(options) {\n    let windowEl = null;\n    let closeCallback = options.onClose || null;\n    let openCallback = options.onOpen || null;\n\n    function open() {\n        if (windowEl) {\n            windowEl.classList.add('open');\n            // Add resize listener for the existing window\n            window.addEventListener('resize', handleResize);\n            // Call onOpen callback when reopening existing window\n            if (openCallback) {\n                setTimeout(openCallback, 10);\n            }\n            return;\n        }\n\n        let container = document.getElementById('windows-container');\n        if (!container) {\n            container = document.createElement('div');\n            container.id = 'windows-container';\n            container.className = 'windows-container';\n            document.body.appendChild(container);\n        }\n\n        windowEl = document.createElement('div');\n        windowEl.id = options.id;\n        windowEl.className = 'window';\n\n        const iconClass = options.icon || 'bx-window';\n        let tabBarHTML = '';\n        let windowTitleHTML = ''; // New variable for window title\n        let contentHTML;\n\n        if (options.tabs && options.tabs.length > 0) {\n            const tabTitles = options.tabs.map((tab, index) => {\n                let iconHtml;\n                if (tab.icon) {\n                    iconHtml = `<i class=\"bx ${tab.icon}\"></i>`;\n                } else if (tab.title && tab.title.length > 0) {\n                    const glyph = tab.title.charAt(0).toUpperCase();\n                    iconHtml = `<span class=\"tab-glyph\">${glyph}</span>`;\n                } else {\n                    iconHtml = `<i class=\"bx bx-question-mark\"></i>`; // Default fallback if no icon or title\n                }\n\n                return `\n                    <div class=\"tab ${index === 0 ? 'active' : ''}\" data-tab-index=\"${index}\">\n                        ${iconHtml}\n                        <span class=\"tab-title\">${tab.title}</span>\n                        <span class=\"tab-subtitle\" data-tab-subtitle=\"${index}\">Last updated: never</span>\n                        <span class=\"notification-badge\" style=\"display: none;\">0</span>\n                    </div>\n                `;\n            }).join('');\n\n            tabBarHTML = `<div class=\"tab-bar\">${tabTitles}</div>`;\n\n            const tabContents = options.tabs.map((tab, index) => {\n                return `<div class=\"tab-content ${index === 0 ? 'active' : ''}\" data-tab-content=\"${index}\">${tab.content}</div>`;\n            }).join('');\n            contentHTML = `<div class=\"window-content\">${tabContents}</div>`;\n\n        } else {\n            // No tabs, so render a window title if provided\n            if (options.title) {\n                windowTitleHTML = `<div class=\"window-title\">${options.title}</div>`;\n            }\n            contentHTML = `<div class=\"window-content\">${options.content}</div>`;\n        }\n\n        const headerHTML = `\n            <div class=\"window-header\">\n                <i class=\"bx ${iconClass}\"></i>\n                ${tabBarHTML}\n                ${windowTitleHTML}\n                <i class=\"bx bx-x window-close\"></i>\n            </div>\n        `;\n\n        windowEl.innerHTML = headerHTML + contentHTML;\n        container.appendChild(windowEl);\n\n        const closeBtn = windowEl.querySelector('.window-close');\n        if (closeBtn) {\n            closeBtn.addEventListener('click', (e) => {\n                e.stopPropagation();\n                close();\n            });\n        }\n\n        // Add resize listener\n        window.addEventListener('resize', handleResize);\n\n        if (options.tabs && options.tabs.length > 0) {\n            const tabs = windowEl.querySelectorAll('.tab');\n            tabs.forEach(tab => {\n                tab.addEventListener('click', () => {\n                    const tabIndex = tab.getAttribute('data-tab-index');\n\n                    windowEl.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));\n                    tab.classList.add('active');\n\n                    windowEl.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));\n                    windowEl.querySelector(`.tab-content[data-tab-content=\"${tabIndex}\"]`).classList.add('active');\n\n                    // Automatically scroll the tab into view\n                    scrollToActiveTab(tab, windowEl);\n                });\n            });\n        }\n\n        setTimeout(() => {\n            windowEl.classList.add('open');\n            // Call onOpen callback after window is opened\n            if (openCallback) {\n                openCallback();\n            }\n        }, 10);\n    }\n\n    function handleResize() {\n        if (!windowEl || !windowEl.classList.contains('open')) return;\n        const activeTab = windowEl.querySelector('.tab.active');\n        if (activeTab) {\n            scrollToActiveTab(activeTab, windowEl);\n        }\n    }\n\n    function scrollToActiveTab(tab, windowEl) {\n        // Automatically scroll the tab into view with optimized visibility for neighbors\n        // Delaying by 350ms to allow the active tab expansion animation/reflow to complete fully\n        setTimeout(() => {\n            const tabBar = windowEl.querySelector('.tab-bar');\n            if (tabBar) {\n                const tabs = Array.from(tabBar.querySelectorAll('.tab'));\n                const currentIndex = tabs.indexOf(tab);\n                const barWidth = tabBar.clientWidth;\n\n                // Target the neighbors to ensure they are visible\n                const leftNeighbor = tabs[Math.max(0, currentIndex - 2)];\n                const rightNeighbor = tabs[Math.min(tabs.length - 1, currentIndex + 2)];\n\n                // Use relative position within the scroll container\n                const leftPos = (leftNeighbor.offsetLeft - tabBar.offsetLeft) - 25;\n                const rightPos = (rightNeighbor.offsetLeft + rightNeighbor.offsetWidth) - tabBar.offsetLeft + 25;\n                const windowWidth = rightPos - leftPos;\n\n                let targetScroll;\n                if (windowWidth <= barWidth) {\n                    targetScroll = leftPos - (barWidth - windowWidth) / 2;\n                } else {\n                    targetScroll = (tab.offsetLeft - tabBar.offsetLeft) - (barWidth / 2) + (tab.offsetWidth / 2);\n                }\n\n                tabBar.scrollTo({ left: targetScroll, behavior: 'smooth' });\n            }\n        }, 350);\n    }\n\n    function close(immediate = false) {\n        if (!windowEl) return;\n\n        // Remove resize listener\n        window.removeEventListener('resize', handleResize);\n\n        if (immediate) {\n            windowEl.classList.add('switching');\n            windowEl.classList.remove('open');\n            setTimeout(() => {\n                if (windowEl && windowEl.parentNode) {\n                    windowEl.parentNode.removeChild(windowEl);\n                }\n                windowEl = null;\n            }, 200);\n        } else {\n            windowEl.classList.remove('open');\n            if (closeCallback) {\n                closeCallback();\n            }\n            setTimeout(() => {\n                if (windowEl && windowEl.parentNode) {\n                    windowEl.parentNode.removeChild(windowEl);\n                }\n                windowEl = null;\n            }, 400);\n        }\n    }\n\n    function setContent(content) {\n        if (windowEl) {\n            const contentDiv = windowEl.querySelector('.window-content');\n            if (contentDiv) {\n                // This is more complex with tabs, for now, we just replace the whole content\n                contentDiv.innerHTML = content;\n            }\n        }\n    }\n    \n    function isOpen() {\n        return windowEl && windowEl.classList.contains('open');\n    }\n\n    return {\n        open,\n        close,\n        setContent,\n        isOpen,\n        id: options.id,\n    };\n}", "// auth.js - Simple email-based authentication\n\nconst AUTH_KEY = 'easter_user_email';\n\n/**\n * Check if user is logged in\n * @returns {boolean}\n */\nexport function isLoggedIn() {\n    return localStorage.getItem(AUTH_KEY) !== null;\n}\n\n/**\n * Get the logged in user's email\n * @returns {string|null}\n */\nexport function getUserEmail() {\n    return localStorage.getItem(AUTH_KEY);\n}\n\n/**\n * Login with email\n * @param {string} email\n */\nexport function login(email) {\n    if (!email || !email.includes('@')) {\n        throw new Error('Invalid email address');\n    }\n\n    // Restrict to @easter.company emails only\n    if (!email.trim().toLowerCase().endsWith('@easter.company')) {\n        throw new Error('Access denied. Please check your credentials.');\n    }\n\n    localStorage.setItem(AUTH_KEY, email.trim());\n}\n\n/**\n * Logout user\n */\nexport function logout() {\n    localStorage.removeItem(AUTH_KEY);\n}\n", "// theme.js - Theme management system\n\nconst THEME_KEY = 'easter_theme';\n\nexport const THEMES = {\n    AUTO: 'auto',\n    DEFAULT: 'default',\n    ANIMATED: 'animated'\n};\n\n/**\n * Get the current theme preference\n * @returns {string}\n */\nexport function getCurrentTheme() {\n    return localStorage.getItem(THEME_KEY) || THEMES.AUTO;\n}\n\n/**\n * Determine which theme to apply based on Auto rules\n * @returns {string} Either THEMES.DEFAULT or THEMES.ANIMATED\n */\nfunction resolveAutoTheme() {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const isFullscreen = window.innerHeight === window.screen.height && window.innerWidth === window.screen.width;\n\n    // Use Legacy if window is above 1920x1080\n    if (width > 1920 && height > 1080) {\n        return THEMES.ANIMATED;\n    }\n\n    // Use Default if equal to 1920x1080 AND fullscreen, OR below 1920x1080\n    if ((width === 1920 && height === 1080 && isFullscreen) || width <= 1920 || height <= 1080) {\n        return THEMES.DEFAULT;\n    }\n\n    return THEMES.DEFAULT;\n}\n\n/**\n * Set the theme\n * @param {string} theme\n */\nexport function setTheme(theme) {\n    if (!Object.values(THEMES).includes(theme)) {\n        throw new Error('Invalid theme');\n    }\n    localStorage.setItem(THEME_KEY, theme);\n    applyTheme(theme);\n}\n\n/**\n * Apply the theme to the document\n * @param {string} theme - The theme preference (can be AUTO, DEFAULT, or ANIMATED)\n * @param {boolean} skipTransition - Whether to skip the transition animation\n */\nexport function applyTheme(theme, skipTransition = false) {\n    const body = document.body;\n\n    // Resolve AUTO theme to actual theme\n    const resolvedTheme = theme === THEMES.AUTO ? resolveAutoTheme() : theme;\n\n    if (!skipTransition) {\n        // Add transition class for fade effect\n        body.classList.add('theme-transitioning');\n\n        // Remove transition class after animation\n        setTimeout(() => {\n            body.classList.remove('theme-transitioning');\n        }, 300);\n    }\n\n    // Remove all theme classes\n    Object.values(THEMES).forEach(t => {\n        body.classList.remove(`theme-${t}`);\n    });\n\n    // Add current theme class\n    body.classList.add(`theme-${theme}`);\n\n    // Handle background element with smooth transition\n    if (resolvedTheme === THEMES.ANIMATED) {\n        // Create background element if it doesn't exist\n        if (!document.querySelector('.background')) {\n            const bg = document.createElement('div');\n            bg.className = 'background';\n            document.body.prepend(bg);\n        }\n    } else {\n        // Remove background element with fade out\n        const bg = document.querySelector('.background');\n        if (bg) {\n            if (skipTransition) {\n                bg.remove();\n            } else {\n                bg.style.animation = 'fadeOutBackground 0.4s ease forwards';\n                setTimeout(() => {\n                    bg.remove();\n                }, 400);\n            }\n        }\n    }\n}\n\n/**\n * Initialize theme on page load\n */\nexport function initTheme() {\n    const currentTheme = getCurrentTheme();\n    applyTheme(currentTheme, true); // Skip transition on initial load\n\n    // Add resize listener for auto theme\n    if (currentTheme === THEMES.AUTO) {\n        let resizeTimeout;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimeout);\n            resizeTimeout = setTimeout(() => {\n                applyTheme(THEMES.AUTO);\n            }, 300); // Debounce resize events\n        });\n    }\n}\n", "// Easter Company - Logs\n\n// Standardized error/placeholder message component\nfunction createPlaceholderMessage(type, message, actionText = null) {\n    const iconMap = {\n        'config': 'bx-cog',\n        'error': 'bx-error-circle',\n        'empty': 'bx-info-circle',\n        'offline': 'bx-wifi-off'\n    };\n\n    const icon = iconMap[type] || 'bx-info-circle';\n    const actionHtml = actionText ? `<p class=\"placeholder-action\">${actionText}</p>` : '';\n\n    return `\n        <div class=\"tab-placeholder\">\n            <i class='bx ${icon} placeholder-icon'></i>\n            <p class=\"placeholder-message\">${message}</p>\n            ${actionHtml}\n        </div>\n    `;\n}\n\nexport function getLogsContent() {\n    return `\n        <div id=\"logs-container\" class=\"logs-container\">\n            <p>Loading logs...</p>\n        </div>\n    `;\n}\n\nexport let lastLogsUpdate = null;\n\nexport async function updateLogs() {\n    const logsContainer = document.getElementById('logs-container');\n    if (!logsContainer) return false;\n\n    // Reset class state\n    logsContainer.classList.remove('placeholder-active');\n\n    const serviceMapString = localStorage.getItem('service_map');\n    if (!serviceMapString) {\n        logsContainer.classList.add('placeholder-active');\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'config',\n            'No service map configured.',\n            'Please upload your service-map.json in Settings to enable log monitoring.'\n        );\n        return false;\n    }\n\n    let serviceMapData;\n    try {\n        serviceMapData = JSON.parse(serviceMapString);\n    } catch (e) {\n        console.error(\"Error parsing service_map from localStorage:\", e);\n        logsContainer.classList.add('placeholder-active');\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'error',\n            'Invalid service map data.',\n            'Please re-upload a valid service-map.json file in Settings.'\n        );\n        return false;\n    }\n\n    // Find the event service\n    let eventService = null;\n    if (serviceMapData && typeof serviceMapData.services === 'object') {\n        const serviceGroups = ['cs', 'be', 'th'];\n        for (const group of serviceGroups) {\n            if (Array.isArray(serviceMapData.services[group])) {\n                const found = serviceMapData.services[group].find(s => s.short_name === 'event' || s.id === 'event' || s.id === 'dex-event-service');\n                if (found) {\n                    eventService = found;\n                    break;\n                }\n            }\n        }\n    }\n\n    if (!eventService) {\n        logsContainer.classList.add('placeholder-active');\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'error',\n            'Event service not found in service map.',\n            'Please ensure dex-event-service is configured in your service-map.json.'\n        );\n        return false;\n    }\n\n    const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n    const logsUrl = `http://${domain}:${eventService.port}/logs`;\n\n    try {\n        const response = await fetch(logsUrl);\n        if (!response.ok) {\n            logsContainer.classList.add('placeholder-active');\n            logsContainer.innerHTML = createPlaceholderMessage(\n                'offline',\n                'Event service is offline.',\n                'Please ensure the event service is running.'\n            );\n            return false;\n        }\n\n        const logsData = await response.json();\n        if (!logsData || logsData.length === 0) {\n            logsContainer.classList.add('placeholder-active');\n            logsContainer.innerHTML = createPlaceholderMessage(\n                'empty',\n                'No logs found.',\n                'Service logs will appear here when available.'\n            );\n            return false;\n        }\n\n        const hiddenServiceIDs = [\"local-ollama-0\", \"local-cache-0\", \"cloud-cache-0\", \"cloud-cache-1\"];\n\n        const filteredLogsData = logsData.filter(logReport => !hiddenServiceIDs.includes(logReport.id));\n\n        // Reverse the order of log reports so newest appear at the top\n        filteredLogsData.forEach(logReport => {\n            if (logReport.logs && Array.isArray(logReport.logs)) {\n                logReport.logs.reverse();\n            } else {\n                logReport.logs = [];\n            }\n        });\n        filteredLogsData.reverse();\n\n        const logsHtml = filteredLogsData.map(logReport => {\n            const logs = logReport.logs.join('\\n');\n            return `\n                <div class=\"log-report\">\n                    <div class=\"log-report-header\">\n                        <h3>${logReport.id}</h3>\n                        <button class=\"copy-logs-btn\" data-logs=\"${escape(logs)}\">\n                            <i class=\"bx bx-copy\"></i>\n                        </button>\n                    </div>\n                    <pre class=\"log-content\">${logs}</pre>\n                </div>\n            `;\n        }).join('');\n\n        logsContainer.innerHTML = logsHtml;\n\n        // Add event listeners for copy buttons\n        document.querySelectorAll('.copy-logs-btn').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const logs = unescape(btn.dataset.logs);\n                navigator.clipboard.writeText(logs).then(() => {\n                    const icon = btn.querySelector('i');\n                    icon.classList.remove('bx-copy');\n                    icon.classList.add('bx-check');\n                    setTimeout(() => {\n                        icon.classList.remove('bx-check');\n                        icon.classList.add('bx-copy');\n                    }, 2000);\n                });\n            });\n        });\n\n        lastLogsUpdate = Date.now();\n        return true;\n\n    } catch (error) {\n        console.error('Error fetching logs:', error);\n        logsContainer.classList.add('placeholder-active');\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'offline',\n            'Failed to load logs.',\n            'The event service may be offline, unreachable, or blocked by a browser extension (e.g., ad blocker).'\n        );\n        return false;\n    }\n}\n", "// Shared Utility Functions\n\nexport function createPlaceholderMessage(type, message, actionText = null) {\n    const iconMap = { config: 'bx-cog', error: 'bx-error-circle', empty: 'bx-info-circle', offline: 'bx-wifi-off' };\n    const icon = iconMap[type] || 'bx-info-circle';\n    const actionHtml = actionText ? `<p class=\"placeholder-action\">${actionText}</p>` : '';\n    return `<div class=\"tab-placeholder\"><i class='bx ${icon} placeholder-icon'></i><p class=\"placeholder-message\">${message}</p>${actionHtml}</div>`;\n}\n\nexport function escapeHtml(text) {\n    if (!text) return text;\n    return text\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n}\n\nexport function updateTabTimestamp(tabIndex, timestamp) {\n    const subtitleElement = document.querySelector(`.tab[data-tab-index=\"${tabIndex}\"] .tab-subtitle`);\n    if (!subtitleElement) return;\n    if (!timestamp) {\n        subtitleElement.textContent = 'Last updated: never';\n        return;\n    }\n    const now = Date.now();\n    const seconds = Math.floor((now - timestamp) / 1000);\n    \n    let timeStr;\n    if (seconds < 60) {\n        timeStr = `${seconds}s ago`;\n    } else if (seconds < 3600) {\n        timeStr = `${Math.floor(seconds / 60)}m ago`;\n    } else {\n        timeStr = `${Math.floor(seconds / 3600)}h ago`;\n    }\n    \n    subtitleElement.textContent = `Last updated: ${timeStr}`;\n}\n\nexport function updateTabBadgeCount(tabIndex, count) {\n    const tabBtn = document.querySelector(`.tab[data-tab-index=\"${tabIndex}\"]`);\n    if (!tabBtn) return;\n\n    let badge = tabBtn.querySelector('.notification-badge');\n    if (!badge) return;\n\n    if (count > 0) {\n        badge.textContent = count > 9 ? '9+' : count;\n        badge.style.display = 'flex';\n    } else {\n        badge.style.display = 'none';\n    }\n}\n\nexport function updateUnreadNotificationCount() {\n    const notificationsList = document.getElementById('notifications-list');\n    if (!notificationsList) return;\n    \n    const unreadCount = notificationsList.querySelectorAll('.notification-unread').length;\n    updateTabBadgeCount(0, unreadCount);\n}", "// Event Templates & Formatting\n\nexport const EVENT_TEMPLATES = {\n    \"message_received\": \"{user} posted in {channel}: {message}\",\n    \"action_performed\": \"{actor} {action} {target}\",\n    \"log_entry\": \"[{level}] {message}\",\n    \"error_occurred\": \"ERROR: {error}\",\n    \"status_change\": \"{entity} changed status to {new_status}\",\n    \"metric_recorded\": \"{metric_name}: {value}{unit}\",\n    \"messaging.user.joined_voice\": \"{user_name} joined voice channel {channel_name}\",\n    \"messaging.user.left_voice\": \"{user_name} left voice channel {channel_name}\",\n    \"messaging.user.sent_message\": \"{user_name} in {channel_name}: {content}\",\n    \"messaging.bot.sent_message\": \"Dexter sent in {channel_name}: {content}\",\n    \"messaging.bot.joined_voice\": \"Dexter joined voice channel {channel_name}\",\n    \"messaging.bot.voice_response\": \"Dexter said: {content}\",\n    \"messaging.bot.status_update\": \"Dexter status changed to {status}: {details}\",\n    \"messaging.user.speaking.started\": \"{user_name} started speaking\",\n    \"messaging.user.speaking.stopped\": \"{user_name} stopped speaking\",\n    \"messaging.user.transcribed\": \"{user_name} said: {transcription}\",\n    \"messaging.user.joined_server\": \"{user_name} joined {server_name}\",\n    \"messaging.webhook.message\": \"{user_name} (Webhook): {content}\",\n    \"webhook.processed\": \"Webhook processed: {status}\",\n    \"voice_speaking_started\": \"User {user_id} started speaking in voice channel {channel_id}\",\n    \"voice_speaking_stopped\": \"User {user_id} stopped speaking in voice channel {channel_id}\",\n    \"voice_transcribed\": \"{user_name} said: {transcription}\",\n    \"engagement.decision\": \"Engagement Decision: {decision} ({reason})\",\n    \"bot_response\": \"Bot Responded: {response}\",\n    \"moderation.explicit_content.deleted\": \"Explicit content deleted in {channel_name} from {user_name}: {reason}\",\n    \"analysis.link.completed\": \"Analyzed link: {url}\",\n    \"analysis.visual.completed\": \"Analyzed image: {filename}\",\n    \"system.analysis.audit\": \"Analysis Audit: {tier}\",\n    \"system.blueprint.generated\": \"Blueprint Generated: {title}\",\n    \"system.cli.command\": \"CLI Command: {command} {args} ({status})\",\n    \"system.cli.status\": \"CLI Status: {message}\",\n    \"system.notification.generated\": \"Notification ({priority}): {title}\"\n};\n\nexport function formatEventSummary(type, data) {\n    let template = EVENT_TEMPLATES[type];\n    if (type === 'voice_transcribed' && !data.user_name && data.user_id) {\n        template = \"User {user_id} said in voice channel {channel_id}: {transcription}\";\n    }\n    // Specific formatting for system.notification.generated\n    if (type === 'system.notification.generated') {\n        const priority = data.priority ? data.priority.charAt(0).toUpperCase() + data.priority.slice(1) : 'Low';\n        template = `Notification (${priority}): ${data.title}`;\n    }\n    // Specific formatting for system.analysis.audit\n    if (type === 'system.analysis.audit') {\n        const tier = data.tier ? data.tier.toUpperCase() : 'UNKNOWN';\n        template = `Analysis Audit: ${tier}`;\n    }\n    if (!template) return type;\n    let summary = template.replace(/\\{(\\w+)\\}/g, (match, key) => {\n        return data[key] !== undefined && data[key] !== null ? data[key] : match;\n    });\n    if ((type === 'messaging.user.transcribed' || type === 'voice_transcribed') &&\n        data.detected_language && data.detected_language !== 'en' && data.english_translation) {\n        summary += ` (Translation: ${data.english_translation})`;\n    }\n    return summary;\n}\n", "// Events Timeline Logic\nimport { createPlaceholderMessage, updateTabTimestamp, escapeHtml } from './utils.js';\nimport { formatEventSummary } from './templates.js';\n\nexport const getEventsContent = () => `\n    <div class=\"notifications-actions\">\n        <button id=\"events-expand-all\" class=\"notif-action-btn\"><i class='bx bx-expand'></i> Expand All</button>\n        <button id=\"events-close-all\" class=\"notif-action-btn\"><i class='bx bx-collapse'></i> Close All</button>\n    </div>\n    <div id=\"events-timeline\" class=\"events-timeline\">\n        <p>Loading events...</p>\n    </div>\n`;\n\nexport let lastEventsUpdate = null;\n\n// Track expanded state globally within the module\nlet activeExpandedIds = new Set();\nlet currentFilteredEvents = [];\n\nexport async function updateEventsTimeline(forceReRender = false) {\n    const eventsContainer = document.getElementById('events-timeline');\n    if (!eventsContainer) return;\n\n    // Attach button listeners if not already attached\n    attachEventActionListeners();\n\n    const serviceMapString = localStorage.getItem('service_map');\n    if (!serviceMapString) {\n        eventsContainer.innerHTML = createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\n        return;\n    }\n    let eventService = null;\n    try {\n        const serviceMapData = JSON.parse(serviceMapString);\n        eventService = (serviceMapData.services?.cs || []).find(s => s.id === 'dex-event-service');\n    } catch (e) { eventsContainer.innerHTML = createPlaceholderMessage('error', 'Invalid service map data.'); return; }\n    if (!eventService) { eventsContainer.innerHTML = createPlaceholderMessage('error', 'Event service not found in service map.'); return; }\n\n    const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n    const eventsUrl = `http://${domain}:${eventService.port}/events?ml=50&format=json&exclude_types=system.notification.generated`; // Exclude notifications from main timeline\n\n    try {\n        const response = await fetch(eventsUrl);\n        if (!response.ok) throw new Error('Service is offline or unreachable.');\n\n        const data = await response.json();\n        const events = data.events || [];\n        currentFilteredEvents = events;\n\n        lastEventsUpdate = Date.now();\n        updateTabTimestamp(3, lastEventsUpdate); // Index 3\n\n        if (events.length === 0) {\n            eventsContainer.innerHTML = createPlaceholderMessage('empty', 'No events found.');\n            return;\n        }\n\n        if (forceReRender) {\n            eventsContainer.innerHTML = '';\n        }\n\n        const createEventElement = (event) => {\n            let eventData = event.event;\n            if (typeof eventData === 'string') {\n                try {\n                    eventData = JSON.parse(eventData);\n                } catch (e) {\n                    return null;\n                }\n            }\n\n            const type = eventData.type;\n            const isExpandable = type === 'engagement.decision' || type === 'messaging.bot.sent_message' || type === 'messaging.user.sent_message' || type === 'moderation.explicit_content.deleted' || type === 'analysis.link.completed' || type === 'analysis.visual.completed' || type === 'system.cli.command' || type === 'system.analysis.audit';\n            let borderClass = 'event-border-grey';\n            if (isExpandable) {\n                if (type === 'moderation.explicit_content.deleted') {\n                    borderClass = 'event-border-red';\n                } else if (type === 'analysis.link.completed' || type === 'analysis.visual.completed' || type === 'system.analysis.audit') {\n                    borderClass = 'event-border-purple';\n                } else if (type === 'system.cli.command') {\n                    borderClass = 'event-border-orange';\n                } else {\n                    borderClass = 'event-border-blue';\n                }\n            }\n            const cursorClass = isExpandable ? 'cursor-pointer' : '';\n\n            const isExpanded = activeExpandedIds.has(event.id);\n            const expandedClass = isExpanded ? 'expanded' : '';\n            const detailsStyle = isExpanded ? 'display: block;' : 'display: none;';\n\n            const utcDate = new Date(event.timestamp * 1000);\n            const timeStr = utcDate.toLocaleTimeString(navigator.language, { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n            const dateStr = utcDate.toLocaleDateString(navigator.language, { month: 'short', day: 'numeric' });\n\n            const summary = formatEventSummary(type, eventData);\n\n            let detailsHtml = '';\n            if (isExpandable) {\n                let detailsContent = '';\n                if (type === 'engagement.decision') {\n                    detailsContent = `\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Engagement Model:</span>\n                            <span class=\"detail-value\">${eventData.engagement_model || 'N/A'}</span>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Context History:</span>\n                            <pre class=\"detail-pre\">${eventData.context_history || 'None'}</pre>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Raw Engagement Output:</span>\n                            <pre class=\"detail-pre\">${eventData.engagement_raw || 'None'}</pre>\n                        </div>\n                    `;\n                } else if (type === 'messaging.bot.sent_message') {\n                    detailsContent = `\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Response Model:</span>\n                            <span class=\"detail-value\">${eventData.response_model || 'N/A'}</span>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Raw Input (Prompt):</span>\n                            <pre class=\"detail-pre\">${eventData.raw_input || 'None'}</pre>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Raw Response Output:</span>\n                            <pre class=\"detail-pre\">${eventData.response_raw || 'None'}</pre>\n                        </div>\n                    `;\n                } else if (type === 'moderation.explicit_content.deleted') {\n                    detailsContent = `\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Message ID:</span>\n                            <span class=\"detail-value\">${eventData.message_id || 'N/A'}</span>\n                        </div>\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Reason:</span>\n                            <span class=\"detail-value\">${eventData.reason || 'N/A'}</span>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Raw Model Output:</span>\n                            <pre class=\"detail-pre\">${escapeHtml(eventData.raw_output) || 'None'}</pre>\n                        </div>\n                    `;\n                } else if (type === 'analysis.link.completed') {\n                    detailsContent = `\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">URL:</span>\n                            <span class=\"detail-value\"><a href=\"${eventData.url}\" target=\"_blank\" class=\"attachment-link\">${eventData.url}</a></span>\n                        </div>\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Title:</span>\n                            <span class=\"detail-value\">${escapeHtml(eventData.title) || 'N/A'}</span>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Description:</span>\n                            <pre class=\"detail-pre\">${escapeHtml(eventData.description) || 'None'}</pre>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Content Summary:</span>\n                            <pre class=\"detail-pre\">${escapeHtml(eventData.summary) || 'None'}</pre>\n                        </div>\n                    `;\n                } else if (type === 'analysis.visual.completed') {\n                    let imageHtml = '';\n                    if (eventData.base64_preview) {\n                        imageHtml = `<div class=\"event-detail-block\"><img src=\"data:image/jpeg;base64,${eventData.base64_preview}\" class=\"event-image-preview\" style=\"max-width: 100%; border-radius: 4px; margin-top: 10px;\"></div>`;\n                    } else if (eventData.url) {\n                        imageHtml = `<div class=\"event-detail-block\"><img src=\"${eventData.url}\" class=\"event-image-preview\" style=\"max-width: 100%; border-radius: 4px; margin-top: 10px;\"></div>`;\n                    }\n\n                    detailsContent = `\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Filename:</span>\n                            <span class=\"detail-value\">${eventData.filename}</span>\n                        </div>\n                        ${imageHtml}\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Visual Description:</span>\n                            <pre class=\"detail-pre\">${escapeHtml(eventData.description) || 'None'}</pre>\n                        </div>\n                    `;\n                } else if (type === 'system.cli.command') {\n                    detailsContent = `\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Command:</span>\n                            <span class=\"detail-value\">dex ${eventData.command || 'unknown'}</span>\n                        </div>\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Arguments:</span>\n                            <span class=\"detail-value\">${eventData.args || 'None'}</span>\n                        </div>\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Status:</span>\n                            <span class=\"detail-value\">${eventData.status || 'unknown'}</span>\n                        </div>\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Duration:</span>\n                            <span class=\"detail-value\">${eventData.duration || 'N/A'}</span>\n                        </div>\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Exit Code:</span>\n                            <span class=\"detail-value\">${eventData.exit_code !== undefined ? eventData.exit_code : 'N/A'}</span>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Output:</span>\n                            <pre class=\"detail-pre\">${escapeHtml(eventData.output) || 'No output recorded.'}</pre>\n                        </div>\n                    `;\n                } else if (type === 'system.analysis.audit') {\n                     detailsContent = `\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Tier:</span>\n                            <span class=\"detail-value\">${eventData.tier}</span>\n                        </div>\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Model:</span>\n                            <span class=\"detail-value\">${eventData.model}</span>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Raw Output:</span>\n                            <pre class=\"detail-pre\">${escapeHtml(eventData.raw_output)}</pre>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Raw Input (Prompt):</span>\n                            <pre class=\"detail-pre\">${escapeHtml(eventData.raw_input)}</pre>\n                        </div>\n                    `;\n                } else if (type === 'messaging.user.sent_message') {\n                    let attachmentsHtml = '';\n                    if (eventData.attachments && eventData.attachments.length > 0) {\n                        const attachmentsList = eventData.attachments.map(att => {\n                            const isImage = att.content_type && att.content_type.startsWith('image/');\n                            const sizeStr = (att.size / 1024).toFixed(1) + ' KB';\n                            return `\n                                <div class=\"attachment-item\">\n                                    ${isImage ? `<div class=\"attachment-thumb-container\"><img src=\"${att.url}\" alt=\"${att.filename}\" class=\"attachment-thumb\"></div>` : `<div class=\"attachment-icon-container\"><i class='bx bx-file attachment-icon'></i></div>`}\n                                    <div class=\"attachment-info\">\n                                        <a href=\"${att.url}\" target=\"_blank\" class=\"attachment-link\">${att.filename}</a>\n                                        <span class=\"attachment-meta\">${att.content_type} \u2022 ${sizeStr}</span>\n                                    </div>\n                                </div>`;\n                        }).join('');\n\n                        attachmentsHtml = `\n                            <div class=\"event-detail-block\">\n                                <span class=\"detail-label\">Attachments:</span>\n                                <div class=\"attachments-grid\">${attachmentsList}</div>\n                            </div>`;\n                    }\n\n                    detailsContent = `\n                        <div class=\"event-detail-row\">\n                            <span class=\"detail-label\">Message ID:</span>\n                            <span class=\"detail-value\">${eventData.message_id || 'N/A'}</span>\n                        </div>\n                        <div class=\"event-detail-block\">\n                            <span class=\"detail-label\">Raw Content:</span>\n                            <pre class=\"detail-pre\">${eventData.content || '(empty)'}</pre>\n                        </div>\n                        ${attachmentsHtml}\n                    `;\n                }\n\n                detailsHtml = `\n                    <div class=\"event-details\" style=\"${detailsStyle}\">\n                        <div class=\"event-details-header\">\n                            <h4>Event Details</h4>\n                            <i class=\"bx bx-x close-details-btn\"></i>\n                        </div>\n                        ${detailsContent}\n                    </div>\n                `;\n            }\n\n            const tempDiv = document.createElement('div');\n            tempDiv.className = `event-item ${borderClass} ${cursorClass} ${expandedClass}`;\n            tempDiv.dataset.eventId = event.id;\n            tempDiv.onclick = function (e) {\n                if (!isExpandable) return;\n                const isCurrentlyExpanded = this.classList.contains('expanded');\n                if (isCurrentlyExpanded) {\n                    this.classList.remove('expanded');\n                    activeExpandedIds.delete(event.id);\n                    const details = this.querySelector('.event-details');\n                    if (details) details.style.display = 'none';\n                } else {\n                    this.classList.add('expanded');\n                    activeExpandedIds.add(event.id);\n                    const details = this.querySelector('.event-details');\n                    if (details) details.style.display = 'block';\n                }\n            };\n\n            tempDiv.innerHTML = `\n                <div class=\"event-time\">\n                    <span class=\"event-time-main\">${timeStr}</span>\n                    <span class=\"event-date\">${dateStr}</span>\n                </div>\n                <div class=\"event-content\">\n                    <div class=\"event-service\">${event.service}</div>\n                    <div class=\"event-message\">${summary}</div>\n                    ${detailsHtml}\n                </div>\n            `;\n\n            if (isExpandable) {\n                const closeBtn = tempDiv.querySelector('.close-details-btn');\n                if (closeBtn) {\n                    closeBtn.addEventListener('click', (e) => {\n                        e.stopPropagation();\n                        const item = e.target.closest('.event-item');\n                        if (item) {\n                            item.classList.remove('expanded');\n                            activeExpandedIds.delete(event.id);\n                            const details = item.querySelector('.event-details');\n                            if (details) details.style.display = 'none';\n                        }\n                    });\n                }\n            }\n\n            return tempDiv;\n        };\n\n        const currentChildren = Array.from(eventsContainer.children);\n        const currentMap = new Map(currentChildren.map(el => [el.dataset.eventId, el]));\n        const newIds = new Set(events.map(e => e.id));\n\n        // 1. Remove old events or placeholders\n        currentChildren.forEach(child => {\n            const id = child.dataset.eventId;\n            if (!id || !newIds.has(id)) {\n                child.remove();\n            }\n        });\n\n        let previousElement = null;\n\n        events.forEach((event, index) => {\n            let el = currentMap.get(event.id);\n            if (!el || forceReRender) {\n                if (el) el.remove();\n                el = createEventElement(event);\n                if (!el) return;\n            }\n            if (index === 0) {\n                if (eventsContainer.firstElementChild !== el) {\n                    eventsContainer.prepend(el);\n                }\n            } else {\n                if (previousElement && previousElement.nextElementSibling !== el) {\n                    previousElement.after(el);\n                }\n            }\n            previousElement = el;\n        });\n\n        lastEventsUpdate = Date.now();\n        updateTabTimestamp(3, lastEventsUpdate); // Index 3\n\n    } catch (error) {\n        console.error('Error fetching events:', error);\n        if (eventsContainer.children.length === 0) {\n            eventsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load events.', 'The event service may be offline or unreachable.');\n        }\n    }\n}\n\nfunction attachEventActionListeners() {\n    const expandAllBtn = document.getElementById('events-expand-all');\n    const closeAllBtn = document.getElementById('events-close-all');\n\n    if (expandAllBtn && !expandAllBtn.dataset.listenerAttached) {\n        expandAllBtn.onclick = () => {\n            currentFilteredEvents.forEach(e => activeExpandedIds.add(e.id));\n            updateEventsTimeline(true);\n        };\n        expandAllBtn.dataset.listenerAttached = \"true\";\n    }\n\n    if (closeAllBtn && !closeAllBtn.dataset.listenerAttached) {\n        closeAllBtn.onclick = () => {\n            activeExpandedIds.clear();\n            updateEventsTimeline(true);\n        };\n        closeAllBtn.dataset.listenerAttached = \"true\";\n    }\n}", "// Notifications Tab Logic\nimport { createPlaceholderMessage, updateTabTimestamp, updateUnreadNotificationCount, escapeHtml } from './utils.js';\n\nexport const getNotificationsContent = () => `\n    <div class=\"notifications-actions\">\n        <button id=\"notif-read-all\" class=\"notif-action-btn\"><i class='bx bx-check-double'></i> Read All</button>\n        <button id=\"notif-expand-all\" class=\"notif-action-btn\"><i class='bx bx-expand'></i> Expand All</button>\n        <button id=\"notif-close-all\" class=\"notif-action-btn\"><i class='bx bx-collapse'></i> Close All</button>\n        <button id=\"notif-clear\" class=\"notif-action-btn danger\"><i class='bx bx-trash'></i> Clear</button>\n    </div>\n    <div id=\"notifications-list\" class=\"notifications-list events-timeline\" style=\"display: flex; flex-direction: column; gap: 15px;\">\n        <p>Loading notifications...</p>\n    </div>\n`;\n\n// Export this to track updates in main.js if needed, or manage it internally\nexport let lastNotificationsUpdate = null;\n\n// Track expanded state globally within the module\nlet activeExpandedIds = new Set();\nlet currentFilteredNotifications = [];\n\nexport async function updateNotificationsTab(forceReRender = false) {\n    const notificationsContainer = document.getElementById('notifications-list');\n    if (!notificationsContainer) return;\n\n    // Attach button listeners if not already attached\n    attachActionListeners();\n\n    if (forceReRender) {\n        notificationsContainer.innerHTML = '<p>Updating...</p>';\n    }\n\n    const serviceMapString = localStorage.getItem('service_map');\n    if (!serviceMapString) {\n        notificationsContainer.innerHTML = createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\n        return;\n    }\n    let eventService = null;\n    try {\n        const serviceMapData = JSON.parse(serviceMapString);\n        eventService = (serviceMapData.services?.cs || []).find(s => s.id === 'dex-event-service');\n    } catch (e) { notificationsContainer.innerHTML = createPlaceholderMessage('error', 'Invalid service map data.'); return; }\n    if (!eventService) { notificationsContainer.innerHTML = createPlaceholderMessage('error', 'Event service not found in service map.'); return; }\n\n    const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n    // Fetch only notifications\n    const notificationsUrl = `http://${domain}:${eventService.port}/events?ml=1000&format=json&event.type=system.notification.generated`;\n\n    try {\n        const response = await fetch(notificationsUrl);\n        if (!response.ok) throw new Error('Service is offline or unreachable.');\n\n        const data = await response.json();\n        const allNotifications = data.events || [];\n\n        lastNotificationsUpdate = Date.now();\n        updateTabTimestamp(0, lastNotificationsUpdate); // Index 0 for Notifications\n\n        // Persistence Logic Filter:\n        // 1. Always keep UNREAD notifications.\n        // 2. Keep READ notifications for 24 hours after they were marked as read.\n        const now = Date.now();\n        const persistenceThreshold = 24 * 60 * 60 * 1000; // 24 hours\n\n        const filteredNotifications = allNotifications.filter(event => {\n            const readTSStr = localStorage.getItem(`notification_read_ts_${event.id}`);\n            if (!readTSStr) return true; // Keep unread\n\n            const readTS = parseInt(readTSStr);\n            return (now - readTS) < persistenceThreshold; // Keep if read within last 24h\n        });\n\n        currentFilteredNotifications = filteredNotifications;\n\n        if (forceReRender) {\n            notificationsContainer.innerHTML = '';\n        }\n\n        if (filteredNotifications.length === 0) {\n            notificationsContainer.innerHTML = createPlaceholderMessage('empty', 'No notifications yet.');\n            updateUnreadNotificationCount();\n            return;\n        }\n\n        const createNotificationElement = (notificationEvent) => {\n            let notificationData = notificationEvent.event;\n            if (typeof notificationData === 'string') {\n                try {\n                    notificationData = JSON.parse(notificationData);\n                } catch (e) { return null; }\n            }\n\n            const title = notificationData.title || 'Untitled Notification';\n            const body = notificationData.body || 'No description provided.';\n            const priority = notificationData.priority || 'low';\n            const isAlert = !!notificationData.alert;\n            const category = notificationData.category || 'system';\n            const relatedEventIDs = notificationData.related_event_ids || [];\n\n            const readTS = localStorage.getItem(`notification_read_ts_${notificationEvent.id}`);\n            const isRead = !!readTS;\n\n            const utcDate = new Date(notificationEvent.timestamp * 1000);\n            const timeStr = utcDate.toLocaleTimeString(navigator.language, { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n            const dateStr = utcDate.toLocaleDateString(navigator.language, { month: 'short', day: 'numeric' });\n\n            // Styling\n            let borderClass = isRead ? 'event-border-grey' : 'event-border-blue';\n            \n            if (!isRead && isAlert) borderClass = 'event-border-red';\n\n            if (isRead && (priority === 'high' || priority === 'critical')) {\n                borderClass = 'event-border-red';\n            } else if (isRead && priority === 'medium') {\n                borderClass = 'event-border-orange';\n            }\n\n            const readClass = isRead ? 'notification-read' : 'notification-unread';\n            const isExpanded = activeExpandedIds.has(notificationEvent.id);\n            const expandedClass = isExpanded ? 'expanded' : '';\n            const detailsStyle = isExpanded ? 'display: block;' : 'display: none;';\n\n            let detailsContent = '';\n            \n            let relatedEventsHtml = '';\n            if (relatedEventIDs.length > 0) {\n                relatedEventsHtml = `\n                    <div class=\"event-detail-row\">\n                        <span class=\"detail-label\">Related Events:</span>\n                        <span class=\"detail-value\">${relatedEventIDs.map(id => `<span class=\"related-event-id\" style=\"font-family: monospace; opacity: 0.7;\">${id.substring(0, 8)}...</span>`).join(', ')}</span>\n                    </div>`;\n            }\n            detailsContent = `\n                <div class=\"event-detail-row\">\n                    <span class=\"detail-label\">Priority:</span>\n                    <span class=\"detail-value\" style=\"color: ${priority === 'high' || priority === 'critical' ? '#ff4d4d' : priority === 'medium' ? '#ffa500' : '#888'}\">${priority.toUpperCase()}</span>\n                </div>\n                <div class=\"event-detail-block\" style=\"text-align: left;\">\n                    <span class=\"detail-label\">Insight:</span>\n                    <p class=\"detail-pre\" style=\"white-space: pre-wrap; margin-top: 5px; text-align: left;\">${escapeHtml(body)}</p>\n                </div>\n                ${relatedEventsHtml}\n            `;\n            \n\n            const tempDiv = document.createElement('div');\n            tempDiv.className = `event-item notification-item ${borderClass} ${readClass} ${expandedClass} cursor-pointer`;\n            tempDiv.dataset.notificationId = notificationEvent.id;\n\n            tempDiv.onclick = function(e) {\n                const isCurrentlyExpanded = this.classList.contains('expanded');\n                if (isCurrentlyExpanded) {\n                    this.classList.remove('expanded');\n                    activeExpandedIds.delete(notificationEvent.id);\n                    const details = this.querySelector('.event-details');\n                    if (details) details.style.display = 'none';\n                } else {\n                    this.classList.add('expanded');\n                    activeExpandedIds.add(notificationEvent.id);\n                    const details = this.querySelector('.event-details');\n                    if (details) details.style.display = 'block';\n\n                    if (!localStorage.getItem(`notification_read_ts_${notificationEvent.id}`)) {\n                        localStorage.setItem(`notification_read_ts_${notificationEvent.id}`, Date.now().toString());\n                        this.classList.add('notification-read');\n                        this.classList.remove('notification-unread');\n\n                        this.classList.remove('event-border-blue', 'event-border-red', 'event-border-purple');\n                        let newBorder = 'event-border-grey';\n                        if (priority === 'high' || priority === 'critical') newBorder = 'event-border-red';\n                        else if (priority === 'medium') newBorder = 'event-border-orange';\n                        this.classList.add(newBorder);\n\n                        updateUnreadNotificationCount();\n                    }\n                }\n            };\n\n            tempDiv.innerHTML = `\n                <div class=\"event-time\">\n                    <span class=\"event-time-main\">${timeStr}</span>\n                    <span class=\"event-date\">${dateStr}</span>\n                </div>\n                <div class=\"event-content\">\n                    <div class=\"event-service\">${category.toUpperCase()} ${isAlert ? '<span class=\"alert-badge\" style=\"color: #ff4d4d; font-size: 0.8em; margin-left: 5px;\">[ALERT]</span>' : ''}</div>\n                    <div class=\"event-message\">${title}</div>\n                    <div class=\"event-details\" style=\"${detailsStyle}\">\n                        <div class=\"event-details-header\">\n                            <h4>${isAlert ? 'Alert' : 'Notification'} Details</h4>\n                            <i class=\"bx bx-x close-details-btn\"></i>\n                        </div>\n                        ${detailsContent}\n                    </div>\n                </div>\n            `;\n\n            const closeBtn = tempDiv.querySelector('.close-details-btn');\n            if (closeBtn) {\n                closeBtn.addEventListener('click', (e) => {\n                    e.stopPropagation();\n                    tempDiv.classList.remove('expanded');\n                    const details = tempDiv.querySelector('.event-details');\n                    if (details) details.style.display = 'none';\n                    activeExpandedIds.delete(notificationEvent.id);\n                });\n            }\n\n            return tempDiv;\n        };\n\n        // Basic diffing and rendering logic for notifications\n        const currentChildren = Array.from(notificationsContainer.children);\n        const currentMap = new Map(currentChildren.map(el => [el.dataset.notificationId, el]));\n        const newIds = new Set(filteredNotifications.map(e => e.id));\n\n        // Remove old notifications OR placeholders (anything without a valid current ID)\n        currentChildren.forEach(child => {\n            const id = child.dataset.notificationId;\n            if (!id || !newIds.has(id)) {\n                child.remove();\n            }\n        });\n\n        let previousElement = null;\n\n        filteredNotifications.forEach((notificationEvent, index) => {\n            let el = currentMap.get(notificationEvent.id);\n            if (!el || forceReRender) {\n                if (el) el.remove();\n                el = createNotificationElement(notificationEvent);\n                if (!el) return;\n            }\n            if (index === 0) {\n                if (notificationsContainer.firstElementChild !== el) {\n                    notificationsContainer.prepend(el);\n                }\n            } else {\n                if (previousElement && previousElement.nextElementSibling !== el) {\n                    previousElement.after(el);\n                }\n            }\n            previousElement = el;\n        });\n\n        lastNotificationsUpdate = Date.now();\n        updateTabTimestamp(0, lastNotificationsUpdate); // Index 0 for Notifications\n        updateUnreadNotificationCount(); // Update badge on each refresh\n\n    } catch (error) {\n        console.error('Error fetching notifications:', error);\n        if (notificationsContainer.children.length === 0) {\n            notificationsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load notifications.', 'The event service may be offline or unreachable.');\n        }\n    }\n}\n\nfunction attachActionListeners() {\n    const readAllBtn = document.getElementById('notif-read-all');\n    const expandAllBtn = document.getElementById('notif-expand-all');\n    const closeAllBtn = document.getElementById('notif-close-all');\n    const clearBtn = document.getElementById('notif-clear');\n\n    if (readAllBtn && !readAllBtn.dataset.listenerAttached) {\n        readAllBtn.onclick = () => {\n            currentFilteredNotifications.forEach(notif => {\n                if (!localStorage.getItem(`notification_read_ts_${notif.id}`)) {\n                    localStorage.setItem(`notification_read_ts_${notif.id}`, Date.now().toString());\n                }\n            });\n            updateNotificationsTab(true);\n        };\n        readAllBtn.dataset.listenerAttached = \"true\";\n    }\n\n    if (expandAllBtn && !expandAllBtn.dataset.listenerAttached) {\n        expandAllBtn.onclick = () => {\n            currentFilteredNotifications.forEach(notif => {\n                activeExpandedIds.add(notif.id);\n                if (!localStorage.getItem(`notification_read_ts_${notif.id}`)) {\n                    localStorage.setItem(`notification_read_ts_${notif.id}`, Date.now().toString());\n                }\n            });\n            updateNotificationsTab(true);\n        };\n        expandAllBtn.dataset.listenerAttached = \"true\";\n    }\n\n    if (closeAllBtn && !closeAllBtn.dataset.listenerAttached) {\n        closeAllBtn.onclick = () => {\n            activeExpandedIds.clear();\n            updateNotificationsTab(true);\n        };\n        closeAllBtn.dataset.listenerAttached = \"true\";\n    }\n\n    if (clearBtn && !clearBtn.dataset.listenerAttached) {\n        clearBtn.onclick = () => {\n            const longAgo = Date.now() - (48 * 60 * 60 * 1000); // 48 hours ago\n            currentFilteredNotifications.forEach(notif => {\n                localStorage.setItem(`notification_read_ts_${notif.id}`, longAgo.toString());\n            });\n            activeExpandedIds.clear();\n            updateNotificationsTab(true);\n        };\n        clearBtn.dataset.listenerAttached = \"true\";\n    }\n}", "// Blueprints Tab Logic\nimport { createPlaceholderMessage, updateTabTimestamp, updateTabBadgeCount, escapeHtml } from './utils.js';\n\nexport const getBlueprintsContent = () => `\n    <div class=\"notifications-actions\">\n        <button id=\"blueprints-expand-all\" class=\"notif-action-btn\"><i class='bx bx-expand'></i> Expand All</button>\n        <button id=\"blueprints-close-all\" class=\"notif-action-btn\"><i class='bx bx-collapse'></i> Close All</button>\n    </div>\n    <div id=\"blueprints-list\" class=\"blueprints-list events-timeline\" style=\"display: flex; flex-direction: column; gap: 15px;\">\n        <p>Loading blueprints...</p>\n    </div>\n`;\n\nexport let lastBlueprintsUpdate = null;\n\n// Track expanded state globally within the module\nlet activeExpandedIds = new Set();\nlet currentFilteredBlueprints = [];\n\nexport async function updateBlueprintsTab(forceReRender = false) {\n    const blueprintsContainer = document.getElementById('blueprints-list');\n    if (!blueprintsContainer) return;\n\n    // Attach button listeners if not already attached\n    attachBlueprintActionListeners();\n\n    const serviceMapString = localStorage.getItem('service_map');\n    if (!serviceMapString) {\n        blueprintsContainer.innerHTML = createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\n        return;\n    }\n    let eventService = null;\n    try {\n        const serviceMapData = JSON.parse(serviceMapString);\n        eventService = (serviceMapData.services?.cs || []).find(s => s.id === 'dex-event-service');\n    } catch (e) { blueprintsContainer.innerHTML = createPlaceholderMessage('error', 'Invalid service map data.'); return; }\n    if (!eventService) { blueprintsContainer.innerHTML = createPlaceholderMessage('error', 'Event service not found in service map.'); return; }\n\n    const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n    const blueprintsUrl = `http://${domain}:${eventService.port}/events?ml=1000&format=json&event.type=system.blueprint.generated`;\n\n    try {\n        const response = await fetch(blueprintsUrl);\n        if (!response.ok) throw new Error('Service is offline or unreachable.');\n\n        const data = await response.json();\n        const allBlueprints = data.events || [];\n        currentFilteredBlueprints = allBlueprints;\n\n        lastBlueprintsUpdate = Date.now();\n        updateTabTimestamp(1, lastBlueprintsUpdate);\n\n        if (allBlueprints.length === 0) {\n            blueprintsContainer.innerHTML = createPlaceholderMessage('empty', 'No architectural blueprints generated yet.', 'The Analyst Worker will generate these when idle.');\n            updateTabBadgeCount(1, 0);\n            return;\n        }\n\n        if (forceReRender) {\n            blueprintsContainer.innerHTML = '';\n        }\n\n        const createBlueprintElement = (event) => {\n            let blueprintData = event.event;\n            if (typeof blueprintData === 'string') {\n                try {\n                    blueprintData = JSON.parse(blueprintData);\n                } catch (e) { return null; }\n            }\n\n            const title = blueprintData.title || 'Untitled Blueprint';\n            const summary = blueprintData.summary || blueprintData.body || 'No summary provided.';\n            const content = blueprintData.content || '';\n            const category = blueprintData.category || 'architecture';\n            const affectedServices = blueprintData.affected_services || [];\n            const implementationPath = blueprintData.implementation_path || [];\n\n            const utcDate = new Date(event.timestamp * 1000);\n            const timeStr = utcDate.toLocaleTimeString(navigator.language, { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n            const dateStr = utcDate.toLocaleDateString(navigator.language, { month: 'short', day: 'numeric' });\n\n            const isExpanded = activeExpandedIds.has(event.id);\n            const detailsStyle = isExpanded ? 'display: block;' : 'display: none;';\n\n            const tempDiv = document.createElement('div');\n            // Blueprints always use Purple border\n            tempDiv.className = `event-item notification-item event-border-purple cursor-pointer ${isExpanded ? 'expanded' : ''}`;\n            tempDiv.dataset.blueprintId = event.id;\n\n            tempDiv.onclick = function(e) {\n                const isCurrentlyExpanded = this.classList.contains('expanded');\n                if (isCurrentlyExpanded) {\n                    this.classList.remove('expanded');\n                    activeExpandedIds.delete(event.id);\n                    const details = this.querySelector('.event-details');\n                    if (details) details.style.display = 'none';\n                } else {\n                    this.classList.add('expanded');\n                    activeExpandedIds.add(event.id);\n                    const details = this.querySelector('.event-details');\n                    if (details) details.style.display = 'block';\n                }\n            };\n\n            let affectedHtml = affectedServices.length > 0\n                ? `<div class=\"blueprint-meta-row\"><strong>Affected:</strong> ${affectedServices.join(', ')}</div>`\n                : '';\n\n            let pathHtml = '';\n            if (implementationPath.length > 0) {\n                pathHtml = `\n                    <div class=\"blueprint-path\">\n                        <h5>Implementation Path</h5>\n                        <ul>\n                            ${implementationPath.map(step => `<li>${escapeHtml(step)}</li>`).join('')}\n                        </ul>\n                    </div>\n                `;\n            }\n\n            tempDiv.innerHTML = `\n                <div class=\"event-time\">\n                    <span class=\"event-time-main\">${timeStr}</span>\n                    <span class=\"event-date\">${dateStr}</span>\n                </div>\n                <div class=\"event-content\">\n                    <div class=\"event-service\">${category.toUpperCase()}</div>\n                    <div class=\"event-message\">${title}</div>\n                    <div class=\"event-details\" style=\"${detailsStyle}\">\n                        <div class=\"event-details-header\">\n                            <h4>Blueprint Design</h4>\n                            <i class=\"bx bx-x close-details-btn\"></i>\n                        </div>\n                        <div class=\"blueprint-summary\" style=\"margin-bottom: 10px; font-weight: 500; color: #fff;\">\n                            ${escapeHtml(summary)}\n                        </div>\n                        ${affectedHtml}\n                        <div class=\"event-detail-block\" style=\"text-align: left; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px; margin: 10px 0;\">\n                            <p class=\"detail-pre\" style=\"white-space: pre-wrap; font-family: 'JetBrains Mono', monospace; font-size: 0.85em; text-align: left; color: #ccc;\">${escapeHtml(content)}</p>\n                        </div>\n                        ${pathHtml}\n                    </div>\n                </div>\n            `;\n\n            const closeBtn = tempDiv.querySelector('.close-details-btn');\n            if (closeBtn) {\n                closeBtn.addEventListener('click', (e) => {\n                    e.stopPropagation();\n                    tempDiv.classList.remove('expanded');\n                    const details = tempDiv.querySelector('.event-details');\n                    if (details) details.style.display = 'none';\n                    activeExpandedIds.delete(event.id);\n                });\n            }\n\n            return tempDiv;\n        };\n\n        const currentChildren = Array.from(blueprintsContainer.children);\n        const currentMap = new Map(currentChildren.map(el => [el.dataset.blueprintId, el]));\n        const newIds = new Set(allBlueprints.map(e => e.id));\n\n        currentChildren.forEach(child => {\n            const id = child.dataset.blueprintId;\n            if (!id || !newIds.has(id)) {\n                child.remove();\n            }\n        });\n\n        let previousElement = null;\n        allBlueprints.forEach((event, index) => {\n            let el = currentMap.get(event.id);\n            if (!el || forceReRender) {\n                if (el) el.remove();\n                el = createBlueprintElement(event);\n                if (!el) return;\n            }\n            if (index === 0) {\n                if (blueprintsContainer.firstElementChild !== el) blueprintsContainer.prepend(el);\n            } else {\n                if (previousElement && previousElement.nextElementSibling !== el) previousElement.after(el);\n            }\n            previousElement = el;\n        });\n\n        updateTabBadgeCount(1, allBlueprints.length);\n\n    } catch (error) {\n        console.error('Error fetching blueprints:', error);\n        if (blueprintsContainer.children.length === 0) {\n            blueprintsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load blueprints.', 'The event service may be offline or unreachable.');\n        }\n    }\n}\n\nfunction attachBlueprintActionListeners() {\n    const expandAllBtn = document.getElementById('blueprints-expand-all');\n    const closeAllBtn = document.getElementById('blueprints-close-all');\n\n    if (expandAllBtn && !expandAllBtn.dataset.listenerAttached) {\n        expandAllBtn.onclick = () => {\n            currentFilteredBlueprints.forEach(b => activeExpandedIds.add(b.id));\n            updateBlueprintsTab(true);\n        };\n        expandAllBtn.dataset.listenerAttached = \"true\";\n    }\n\n    if (closeAllBtn && !closeAllBtn.dataset.listenerAttached) {\n        closeAllBtn.onclick = () => {\n            activeExpandedIds.clear();\n            updateBlueprintsTab(true);\n        };\n        closeAllBtn.dataset.listenerAttached = \"true\";\n    }\n}\n", "// System Monitor Logic (Services, Models, Processes)\nimport { createPlaceholderMessage, updateTabTimestamp, updateTabBadgeCount } from './utils.js';\n\nexport const getServicesContent = () => localStorage.getItem('service_map') ? `<div id=\"services-widgets\" class=\"system-monitor-widgets\"><p>Loading services...</p></div>` : createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\nexport const getModelsContent = () => localStorage.getItem('service_map') ? `<div id=\"models-widgets\" class=\"system-monitor-widgets\"><p>Loading models...</p></div>` : createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\nexport const getProcessesContent = () => {\n    if (!localStorage.getItem('service_map')) {\n        return createPlaceholderMessage('config', 'No service map configured.', 'Upload service-map.json in Settings.');\n    }\n    return `\n        <div class=\"analyst-status-section\" style=\"background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.05);\">\n            <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\n                <h3 style=\"margin: 0; font-size: 1em; color: #fff;\">Analyst Status</h3>\n                <button id=\"analyst-reset-btn\" class=\"notif-action-btn\" style=\"padding: 4px 10px; font-size: 0.8em;\"><i class='bx bx-refresh'></i> Reset Analyst</button>\n            </div>\n            <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;\">\n                <div class=\"analyst-indicator\">\n                    <span style=\"color: #888; font-size: 0.8em;\">Next T1 (Guardian)</span>\n                    <span id=\"analyst-t1-val\" style=\"color: #fff; font-family: monospace; display: block;\">Loading...</span>\n                </div>\n                <div class=\"analyst-indicator\">\n                    <span style=\"color: #888; font-size: 0.8em;\">Next T2 (Architect)</span>\n                    <span id=\"analyst-t2-val\" style=\"color: #fff; font-family: monospace; display: block;\">Loading...</span>\n                </div>\n                <div class=\"analyst-indicator\">\n                    <span style=\"color: #888; font-size: 0.8em;\">Next T3 (Strategist)</span>\n                    <span id=\"analyst-t3-val\" style=\"color: #fff; font-family: monospace; display: block;\">Loading...</span>\n                </div>\n                <div class=\"analyst-indicator\">\n                    <span style=\"color: #888; font-size: 0.8em;\">System Idle</span>\n                    <span id=\"analyst-idle-val\" style=\"color: #fff; font-family: monospace; display: block;\">Loading...</span>\n                </div>\n            </div>\n        </div>\n        <div id=\"processes-widgets\" class=\"system-monitor-widgets\"><p>Loading processes...</p></div>\n    `;\n};\n\nexport let lastServicesUpdate = null;\nexport let lastModelsUpdate = null;\nexport let lastProcessesUpdate = null;\n\nasync function fetchSystemData() {\n    if (!localStorage.getItem('service_map')) return null;\n    try {\n        const serviceMap = JSON.parse(localStorage.getItem('service_map'));\n        const eventService = (serviceMap.services?.cs || []).find(s => s.id === 'dex-event-service');\n        if (!eventService) return null;\n        const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n        const url = `http://${domain}:${eventService.port}/system_monitor`;\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        return await response.json();\n    } catch (error) {\n        console.error('Error fetching system data:', error);\n        return null;\n    }\n}\n\nasync function fetchProcessData() {\n    if (!localStorage.getItem('service_map')) return null;\n    try {\n        const serviceMap = JSON.parse(localStorage.getItem('service_map'));\n        const eventService = (serviceMap.services?.cs || []).find(s => s.id === 'dex-event-service');\n        if (!eventService) return null;\n        const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n        const url = `http://${domain}:${eventService.port}/processes`;\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        return await response.json();\n    } catch (error) {\n        console.error('Error fetching process data:', error);\n        return null;\n    }\n}\n\nasync function fetchAnalystStatus() {\n    if (!localStorage.getItem('service_map')) return null;\n    try {\n        const serviceMap = JSON.parse(localStorage.getItem('service_map'));\n        const eventService = (serviceMap.services?.cs || []).find(s => s.id === 'dex-event-service');\n        if (!eventService) return null;\n        const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n        const url = `http://${domain}:${eventService.port}/analyst/status`;\n        const response = await fetch(url);\n        if (!response.ok) return null;\n        return await response.json();\n    } catch (error) {\n        return null;\n    }\n}\n\nexport async function updateSystemMonitor() {\n    const widgetsContainer = document.getElementById('services-widgets');\n    if (!widgetsContainer) return;\n\n    const data = await fetchSystemData();\n\n    if (!data || !data.services) {\n        widgetsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load system metrics.', 'The event service may be offline or unreachable.');\n        return;\n    }\n\n    lastServicesUpdate = Date.now();\n    updateTabTimestamp(5, lastServicesUpdate);\n    const services = data.services || [];\n\n    Array.from(widgetsContainer.children).forEach(child => {\n        if (!child.classList.contains('service-widget')) child.remove();\n    });\n\n    function sanitizeValue(value) { if (!value || value === 'N/A' || value === 'unknown' || value.trim() === '') { return '-'; } return value; }\n    function extractMajorMinorPatch(versionStr) { if (!versionStr || versionStr === 'N/A' || versionStr === 'unknown') { return '-'; } const match = versionStr.match(/^(\\d+\\.\\d+\\.\\d+)/); if (match) return match[0]; return versionStr.split('.').slice(0, 3).join('.') || '-'; }\n    function truncateAddress(address) { if (!address || address.length <= 28) return address; return address.substring(0, 28) + '...'; }\n\n    function formatUptime(uptimeStr) { if (!uptimeStr || uptimeStr === 'N/A' || uptimeStr === 'unknown') return '-'; const match = uptimeStr.match(/(?:(\\d+)d)?(?:(\\d+)h)?(?:(\\d+)m)?(?:([\\d.]+)s)?/); if (!match) return '-'; const days = parseInt(match[1]) || 0; const hours = parseInt(match[2]) || 0; const minutes = parseInt(match[3]) || 0; const seconds = parseFloat(match[4]) || 0; const totalSeconds = (days * 86400) + (hours * 3600) + (minutes * 60) + seconds; const totalDays = Math.floor(totalSeconds / 86400); if (totalDays > 0) return `${totalDays}d`; const totalHours = Math.floor(totalSeconds / 3600); if (totalHours > 0) return `${totalHours}h`; const totalMinutes = Math.floor(totalSeconds / 60); if (totalMinutes > 0) return `${totalMinutes}m`; return `${Math.floor(totalSeconds)}s`; }\n\n    function generateWidgetHtml(service) {\n        const isOnline = service.status === 'online';\n        const statusClass = isOnline ? 'service-widget-online' : 'service-widget-offline';\n        const statusIcon = isOnline ? 'bx-check-circle' : 'bx-x-circle';\n        const statusText = isOnline ? 'OK' : 'BAD';\n        let versionDisplay = service.version ? extractMajorMinorPatch(service.version.str) : '-';\n\n        const cpuDisplay = service.cpu && service.cpu !== 'N/A' ? service.cpu : '-';\n        const memDisplay = service.memory && service.memory !== 'N/A' ? service.memory : '-';\n\n        const cpuIconColor = cpuDisplay !== '-' ? '#00ff00' : '#666';\n        const cpuTextColor = cpuDisplay !== '-' ? '#fff' : '#666';\n\n        const memIconColor = memDisplay !== '-' ? '#00ff00' : '#666';\n        const memTextColor = memDisplay !== '-' ? '#fff' : '#666';\n\n        const uptime = formatUptime(service.uptime);\n        let detailsHtml = '';\n        if (isOnline) {\n            detailsHtml = `\n                <div class=\"service-widget-info\">\n                    <span class=\"info-label\">Version:</span>\n                    <span class=\"info-value metric-version-monospace\">${versionDisplay}</span>\n                </div>\n                <div class=\"service-widget-footer\">\n                    <div class=\"service-widget-item\">\n                        <i class=\"bx bx-time-five\" style=\"color: #00ff00;\"></i>\n                        <span style=\"color: #fff;\">${uptime}</span>\n                    </div>\n                    <div class=\"service-widget-item\">\n                        <i class=\"bx bxs-microchip\" style=\"color: ${cpuIconColor};\"></i>\n                        <span style=\"color: ${cpuTextColor};\">${cpuDisplay}</span>\n                    </div>\n                    <div class=\"service-widget-item\">\n                        <i class=\"bx bxs-chip\" style=\"color: ${memIconColor};\"></i>\n                        <span style=\"color: ${memTextColor};\">${memDisplay}</span>\n                    </div>\n                </div>`;\n        } else {\n            detailsHtml = `<div class=\"service-widget-footer offline\"><span>OFFLINE</span></div>`;\n        }\n        return `<div class=\"service-widget ${statusClass}\" data-service-id=\"${service.id}\"><div class=\"service-widget-header\"><i class=\"bx ${statusIcon}\"></i><h3>${service.short_name || service.id}</h3><span class=\"service-widget-status\">${statusText}</span></div><div class=\"service-widget-body\"><div class=\"service-widget-info\"><span class=\"info-label\">Address:</span><span class=\"info-value\">${truncateAddress(service.domain && service.port ? `${service.domain}:${service.port}` : '')}</span></div>${detailsHtml}</div></div>`;\n    }\n\n    const existingWidgetsMap = new Map(Array.from(widgetsContainer.querySelectorAll('.service-widget')).map(widget => [widget.dataset.serviceId, widget]));\n    const incomingServiceIds = new Set(services.map(s => s.id));\n\n    for (const [id, widget] of existingWidgetsMap) {\n        if (!incomingServiceIds.has(id)) {\n            widget.remove();\n        }\n    }\n\n    services.forEach(service => {\n        const newHtml = generateWidgetHtml(service);\n        const existingWidget = existingWidgetsMap.get(service.id);\n        if (existingWidget) {\n            if (existingWidget.outerHTML !== newHtml) existingWidget.outerHTML = newHtml;\n        } else {\n            widgetsContainer.insertAdjacentHTML('beforeend', newHtml);\n        }\n    });\n}\n\nexport async function updateModelsTab() {\n    const widgetsContainer = document.getElementById('models-widgets');\n    if (!widgetsContainer) return;\n\n    const data = await fetchSystemData();\n\n    if (!data) {\n        widgetsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load model status.');\n        return;\n    }\n\n    lastModelsUpdate = Date.now();\n    updateTabTimestamp(4, lastModelsUpdate);\n\n    const models = data.models || [];\n    const whisperStatus = data.whisper;\n\n    Array.from(widgetsContainer.children).forEach(child => {\n        if (!child.classList.contains('service-widget')) child.remove();\n    });\n\n    function generateWhisperWidgetHtml(whisper) {\n        const isReady = whisper.status === 'Ready';\n        const statusClass = isReady ? 'service-widget-online' : 'service-widget-offline';\n        const statusText = isReady ? 'READY' : 'NOT FOUND';\n        const icon = 'bxs-microphone-alt';\n\n        return `\n                <div class=\"service-widget ${statusClass}\" data-whisper-widget>\n                    <div class=\"service-widget-header\">\n                        <i class=\"bx ${icon}\"></i>\n                        <h3>Whisper</h3>\n                        <span class=\"service-widget-status\">${statusText}</span>\n                    </div>\n                    <div class=\"service-widget-body\">\n                        <div class=\"service-widget-info\">\n                            <span class=\"info-label\">Status:</span>\n                            <span class=\"info-value\">${whisper.status}</span>\n                        </div>\n                        <div class=\"service-widget-info\">\n                            <span class=\"info-label\">Model:</span>\n                            <span class=\"info-value\">large-v3-turbo</span>\n                        </div>\n                    </div>\n                </div>`;\n    }\n\n    function generateModelWidgetHtml(model) {\n        const isDownloaded = model.status === 'Downloaded';\n        const statusClass = isDownloaded ? 'service-widget-online' : 'service-widget-offline';\n        const statusText = isDownloaded ? 'OK' : 'MISSING';\n        const sizeDisplay = isDownloaded && model.size > 0 ? `${(model.size / 1e9).toFixed(2)} GB` : '-';\n\n        let modelDisplayName = model.name;\n        if (model.type === 'custom' && modelDisplayName.endsWith(':latest')) {\n            modelDisplayName = modelDisplayName.replace(':latest', '');\n        }\n\n        return `<div class=\"service-widget ${statusClass}\" data-model-name=\"${model.name}\"><div class=\"service-widget-header\"><i class=\"bx ${isDownloaded ? 'bx-check-circle' : 'bx-x-circle'}\"></i><h3>${modelDisplayName}</h3><span class=\"service-widget-status\">${statusText}</span></div><div class=\"service-widget-body\"><div class=\"service-widget-info\"><span class=\"info-label\">Type:</span><span class=\"info-value\">${model.type}</span></div><div class=\"service-widget-info\"><span class=\"info-label\">Size:</span><span class=\"info-value\">${sizeDisplay}</span></div></div></div>`;\n    }\n\n    let finalHtml = '';\n    if (whisperStatus) {\n        finalHtml += generateWhisperWidgetHtml(whisperStatus);\n    }\n    finalHtml += models.map(generateModelWidgetHtml).join('');\n\n    if (!finalHtml) {\n        widgetsContainer.innerHTML = createPlaceholderMessage('empty', 'No models found.');\n        return;\n    }\n\n    if (widgetsContainer.innerHTML !== finalHtml) {\n        widgetsContainer.innerHTML = finalHtml;\n    }\n}\n\nexport async function updateProcessesTab() {\n    const widgetsContainer = document.getElementById('processes-widgets');\n    if (!widgetsContainer) return;\n\n    // --- Update Analyst Status ---\n    const t1Val = document.getElementById('analyst-t1-val');\n    const t2Val = document.getElementById('analyst-t2-val');\n    const t3Val = document.getElementById('analyst-t3-val');\n    const idleVal = document.getElementById('analyst-idle-val');\n    const resetBtn = document.getElementById('analyst-reset-btn');\n\n    if (resetBtn && !resetBtn.dataset.listenerAttached) {\n        resetBtn.onclick = async () => {\n            if (!localStorage.getItem('service_map')) return;\n            const serviceMap = JSON.parse(localStorage.getItem('service_map'));\n            const eventService = (serviceMap.services?.cs || []).find(s => s.id === 'dex-event-service');\n            if (!eventService) return;\n            const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n            const url = `http://${domain}:${eventService.port}/analyst/reset?tier=all`;\n\n            resetBtn.innerHTML = \"<i class='bx bx-loader-alt spin'></i> Resetting...\";\n            try {\n                await fetch(url, { method: 'POST' });\n                setTimeout(() => {\n                    resetBtn.innerHTML = \"<i class='bx bx-check'></i> Done\";\n                    setTimeout(() => { resetBtn.innerHTML = \"<i class='bx bx-refresh'></i> Reset Analyst\"; }, 2000);\n                }, 500);\n                updateProcessesTab(); // refresh immediately\n            } catch (e) {\n                resetBtn.innerHTML = \"<i class='bx bx-error'></i> Failed\";\n            }\n        };\n        resetBtn.dataset.listenerAttached = \"true\";\n    }\n\n    const analystStatus = await fetchAnalystStatus();\n    if (analystStatus) {\n        const now = Math.floor(Date.now() / 1000);\n        \n        const updateTimer = (el, nextRun) => {\n            const diff = nextRun - now;\n            if (diff <= 0) {\n                el.textContent = \"Ready\";\n                el.style.color = \"#5eff5e\";\n            } else {\n                const mins = Math.floor(diff / 60);\n                const secs = diff % 60;\n                el.textContent = `${mins}m ${secs}s`;\n                el.style.color = \"#fff\";\n            }\n        };\n\n        if (t1Val && analystStatus.guardian) updateTimer(t1Val, analystStatus.guardian.next_run);\n        if (t2Val && analystStatus.architect) updateTimer(t2Val, analystStatus.architect.next_run);\n        if (t3Val && analystStatus.strategist) updateTimer(t3Val, analystStatus.strategist.next_run);\n        \n        if (idleVal && analystStatus.system_idle_time !== undefined) {\n            const idle = analystStatus.system_idle_time;\n            const mins = Math.floor(idle / 60);\n            const secs = idle % 60;\n            idleVal.textContent = `${mins}m ${secs}s`;\n            // Color code idle time: Green if > 5 mins (300s), Orange if > 1 min, Red otherwise (just an example, or keep white)\n            if (idle > 300) idleVal.style.color = \"#5eff5e\";\n            else if (idle > 60) idleVal.style.color = \"#ffa500\";\n            else idleVal.style.color = \"#fff\";\n        }\n    } else {\n        if(t1Val) t1Val.textContent = \"Offline\";\n        if(t2Val) t2Val.textContent = \"Offline\";\n        if(t3Val) t3Val.textContent = \"Offline\";\n        if(idleVal) idleVal.textContent = \"Offline\";\n    }\n\n    // --- Update Processes List ---\n    const processes = await fetchProcessData();\n\n    if (processes === null) {\n        widgetsContainer.innerHTML = createPlaceholderMessage('offline', 'Failed to load process status.');\n        return;\n    }\n\n    lastProcessesUpdate = Date.now();\n    updateTabTimestamp(2, lastProcessesUpdate);\n\n    if (processes.length === 0) {\n        // Only clear if we actually have the widgets container and no processes, \n        // but we want to KEEP the analyst status section intact.\n        // So we should target a specific container for processes OR handle the HTML append carefully.\n        // The current structure is: Analyst Section -> Processes Container.\n        // wait, getProcessesContent returns TWO divs: .analyst-status-section and #processes-widgets.\n        // BUT widgetsContainer IS #processes-widgets based on existing code: const widgetsContainer = document.getElementById('processes-widgets');\n        \n        // Correct logic: getProcessesContent is used in the main template. \n        // In updateProcessesTab, we look for #processes-widgets.\n        // If I change getProcessesContent to return multiple root elements, I need to make sure they are inserted correctly.\n        // Actually, window.js puts the content into .window-content.\n        \n        // Problem: getProcessesContent returns a template string with multiple top-level elements. \n        // window.js puts this into .window-content. \n        // updateProcessesTab grabs #processes-widgets.\n        // So my new Analyst section is OUTSIDE #processes-widgets. This is GOOD.\n        // But wait, if processes.length === 0, the existing code does:\n        // widgetsContainer.innerHTML = createPlaceholderMessage('empty', 'No active processes.');\n        // This is fine, it only clears the process list, not the analyst status!\n        \n        widgetsContainer.innerHTML = createPlaceholderMessage('empty', 'No active processes.');\n        updateTabBadgeCount(2, 0);\n        return;\n    }\n\n    if (widgetsContainer.querySelector('.tab-placeholder') || widgetsContainer.querySelector('p')) {\n        widgetsContainer.innerHTML = '';\n    }\n\n    function generateProcessWidgetHtml(proc) {\n        const duration = Math.floor((Date.now() / 1000) - proc.start_time);\n        const retryBadge = proc.retries > 0 ? `<span class=\"process-retry-badge\">Retry ${proc.retries}</span>` : '';\n\n        // Pretty-print common system IDs\n        let displayName = proc.channel_id;\n        const idMap = {\n            'system-discord': 'Discord Engine',\n            'system-analyst': 'Analyst Worker',\n            'system-cli-op': 'CLI Operation'\n        };\n        if (idMap[displayName]) {\n            displayName = idMap[displayName];\n        } else if (/^\\d+$/.test(displayName)) {\n            // If it's a numeric ID, it's likely a Discord channel ID\n            displayName = `Channel ${displayName}`;\n        }\n\n        return `\n                <div class=\"service-widget process-widget\" data-channel-id=\"${proc.channel_id}\">\n                    <div class=\"service-widget-header\">\n                        <i class=\"bx bx-loader-alt bx-spin\"></i>\n                        <h3>${displayName}</h3>\n                        ${retryBadge}\n                    </div>\n                    <div class=\"service-widget-body\">\n                        <div class=\"service-widget-info\">\n                            <span class=\"info-label\">State:</span>\n                            <span class=\"info-value\">${proc.state}</span>\n                        </div>\n                        <div class=\"service-widget-info\">\n                            <span class=\"info-label\">Duration:</span>\n                            <span class=\"info-value\">${duration}s</span>\n                        </div>\n                         <div class=\"service-widget-info\">\n                            <span class=\"info-label\">PID:</span>\n                            <span class=\"info-value\">${proc.pid}</span>\n                        </div>\n                    </div>\n                </div>`;\n    }\n\n    const existingWidgetsMap = new Map(Array.from(widgetsContainer.querySelectorAll('.process-widget')).map(widget => [widget.dataset.channelId, widget]));\n    const incomingIds = new Set(processes.map(p => p.channel_id));\n\n    for (const [id, widget] of existingWidgetsMap) {\n        if (!incomingIds.has(id)) {\n            widget.remove();\n        }\n    }\n\n    processes.forEach(proc => {\n        const newHtml = generateProcessWidgetHtml(proc);\n        const existingWidget = existingWidgetsMap.get(proc.channel_id);\n        if (existingWidget) {\n            if (existingWidget.outerHTML !== newHtml) existingWidget.outerHTML = newHtml;\n        } else {\n            widgetsContainer.insertAdjacentHTML('beforeend', newHtml);\n        }\n    });\n\n    updateTabBadgeCount(2, processes.length);\n}\n", "// Settings Window Logic\nimport { getCurrentTheme, setTheme, THEMES } from './theme.js';\nimport { getUserEmail } from './auth.js';\n\nexport function getSettingsContent() {\n    const currentTheme = getCurrentTheme();\n    const userEmail = getUserEmail() || 'user@easter.company';\n    const notificationState = { enabled: Notification.permission === 'granted', supported: 'Notification' in window };\n    const analyticsEnabled = localStorage.getItem('easter_analytics_enabled') !== 'false';\n\n    return `\n            <div class=\"theme-selector\">\n                ${Object.values(THEMES).map(theme => `\n                    <div class=\"theme-card ${currentTheme === theme ? 'active' : ''}\" data-theme=\"${theme}\">\n                        <div class=\"theme-preview theme-preview-${theme.toLowerCase()}\"></div>\n                        <div class=\"theme-info\">\n                            <h3>${theme}</h3>\n                            <p>${theme === THEMES.AUTO ? 'Automatic theme selection.' : theme === THEMES.DEFAULT ? 'Simple, black, default.' : 'Colourful, not bright.'}</p>\n                            <span class=\"theme-badge\">${currentTheme === theme ? 'Active' : 'Select'}</span>\n                        </div>\n                    </div>\n                `).join('')}\n            </div>\n\n            <div class=\"settings-divider\"></div>\n\n            <div class=\"settings-section\">\n                <h2 class=\"settings-section-title\">Configuration</h2>\n                <div class=\"settings-list\">\n                    <div class=\"settings-item settings-item-input\">\n                        <div>\n                            <label class=\"settings-item-label\">Services</label>\n                            <span class=\"settings-item-description\">Upload your service-map.json to connect this client to your services.</span>\n                        </div>\n                        <div class=\"file-upload-container\">\n                            <button class=\"file-upload-btn\" id=\"service-map-upload-btn\">Choose File</button>\n                            <span class=\"file-upload-name\" id=\"service-map-file-name\">${localStorage.getItem('service_map') ? 'service-map.json' : 'No file selected'}</span>\n                            <input type=\"file\" class=\"file-upload-input\" id=\"service-map-input\" accept=\".json,application/json\" hidden>\n                            ${localStorage.getItem('service_map') ? '<button class=\"file-delete-btn\" id=\"service-map-delete-btn\" title=\"Delete service map\">\u00D7</button>' : ''}\n                        </div>\n                        <div class=\"file-upload-error\" id=\"service-map-error\" style=\"display: none;\"></div>\n                    </div>\n                    <div class=\"settings-item settings-item-input\">\n                        <div>\n                            <label class=\"settings-item-label\">Servers</label>\n                            <span class=\"settings-item-description\">Upload your server-map.json to connect this client to your servers.</span>\n                        </div>\n                        <div class=\"file-upload-container\">\n                            <button class=\"file-upload-btn\" id=\"server-map-upload-btn\">Choose File</button>\n                            <span class=\"file-upload-name\" id=\"server-map-file-name\">${localStorage.getItem('server_map') ? 'server-map.json' : 'No file selected'}</span>\n                            <input type=\"file\" class=\"file-upload-input\" id=\"server-map-input\" accept=\".json,application/json\" hidden>\n                            ${localStorage.getItem('server_map') ? '<button class=\"file-delete-btn\" id=\"server-map-delete-btn\" title=\"Delete server map\">\u00D7</button>' : ''}\n                        </div>\n                        <div class=\"file-upload-error\" id=\"server-map-error\" style=\"display: none;\"></div>\n                    </div>\n                    <div class=\"settings-item settings-item-input\">\n                        <div>\n                            <label class=\"settings-item-label\">User Settings</label>\n                            <span class=\"settings-item-description\">Upload your options.json to configure user preferences.</span>\n                        </div>\n                        <div class=\"file-upload-container\">\n                            <button class=\"file-upload-btn\" id=\"options-upload-btn\">Choose File</button>\n                            <span class=\"file-upload-name\" id=\"options-file-name\">${localStorage.getItem('user_options') ? 'options.json' : 'No file selected'}</span>\n                            <input type=\"file\" class=\"file-upload-input\" id=\"options-input\" accept=\".json,application/json\" hidden>\n                            ${localStorage.getItem('user_options') ? '<button class=\"file-delete-btn\" id=\"options-delete-btn\" title=\"Delete user settings\">\u00D7</button>' : ''}\n                        </div>\n                        <div class=\"file-upload-error\" id=\"options-error\" style=\"display: none;\"></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"settings-divider\"></div>\n\n            <div class=\"settings-section\">\n                <h2 class=\"settings-section-title\">Preferences</h2>\n                <div class=\"settings-list\">\n                    <div class=\"settings-item\">\n                        <div class=\"settings-item-info\">\n                            <span class=\"settings-item-label\">Notifications</span>\n                            <span class=\"settings-item-description\">${notificationState.supported ? 'Receive desktop notifications' : 'Not supported in this browser'}</span>\n                        </div>\n                        <label class=\"toggle-switch\">\n                            <input type=\"checkbox\" id=\"notifications-toggle\" ${notificationState.enabled ? 'checked' : ''} ${!notificationState.supported ? 'disabled' : ''}>\n                            <span class=\"toggle-slider\"></span>\n                        </label>\n                    </div>\n                    <div class=\"settings-item\" id=\"microphone-setting-item\">\n                        <div class=\"settings-item-info\">\n                            <span class=\"settings-item-label\">Access Microphone</span>\n                            <span class=\"settings-item-description\">Allow access to your microphone</span>\n                        </div>\n                        <label class=\"toggle-switch\">\n                            <input type=\"checkbox\" id=\"microphone-toggle\" disabled>\n                            <span class=\"toggle-slider\"></span>\n                        </label>\n                    </div>\n                    <div class=\"settings-item\">\n                        <div class=\"settings-item-info\">\n                            <span class=\"settings-item-label\">Analytics</span>\n                            <span class=\"settings-item-description\">Help improve the platform (enables debug mode)</span>\n                        </div>\n                        <label class=\"toggle-switch\">\n                            <input type=\"checkbox\" id=\"analytics-toggle\" ${analyticsEnabled ? 'checked' : ''}>\n                            <span class=\"toggle-slider\"></span>\n                        </label>\n                    </div>\n                </div>\n            </div>`;\n}\n\nexport function attachSettingsListeners(settingsWindowInstance) {\n    const settingsContent = document.querySelector('#settings-window .window-content');\n    if (!settingsContent) return;\n\n    settingsContent.querySelectorAll('.theme-card').forEach(card => {\n        card.addEventListener('click', function () {\n            const newTheme = this.dataset.theme;\n            setTheme(newTheme);\n            settingsWindowInstance.setContent(getSettingsContent());\n            attachSettingsListeners(settingsWindowInstance);\n        });\n    });\n\n    function attachFileUploadListeners(buttonId, inputId, nameId, errorId, deleteId, localStorageKey, expectedFileName) {\n        const uploadBtn = document.getElementById(buttonId);\n        const fileInput = document.getElementById(inputId);\n        const fileNameSpan = document.getElementById(nameId);\n        const errorDiv = document.getElementById(errorId);\n        const deleteBtn = document.getElementById(deleteId);\n\n        if (uploadBtn && fileInput) {\n            uploadBtn.onclick = () => fileInput.click();\n            fileInput.onchange = (e) => {\n                const file = e.target.files[0];\n                if (!file) return;\n                if (file.name !== expectedFileName) {\n                    errorDiv.textContent = `File must be named \"${expectedFileName}\"`;\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                    return;\n                }\n                const reader = new FileReader();\n                reader.onload = (event) => {\n                    try {\n                        const jsonContent = JSON.parse(event.target.result);\n                        localStorage.setItem(localStorageKey, JSON.stringify(jsonContent));\n                        fileNameSpan.textContent = expectedFileName;\n                        errorDiv.style.display = 'none';\n                        settingsWindowInstance.setContent(getSettingsContent());\n                        attachSettingsListeners(settingsWindowInstance);\n                    } catch (error) {\n                        errorDiv.textContent = 'Invalid JSON format';\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                    }\n                };\n                reader.onerror = () => {\n                    errorDiv.textContent = 'Failed to read file';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                };\n                reader.readAsText(file);\n            };\n        }\n        if (deleteBtn) {\n            deleteBtn.onclick = () => {\n                localStorage.removeItem(localStorageKey);\n                settingsWindowInstance.setContent(getSettingsContent());\n                attachSettingsListeners(settingsWindowInstance);\n            };\n        }\n    }\n    attachFileUploadListeners('service-map-upload-btn', 'service-map-input', 'service-map-file-name', 'service-map-error', 'service-map-delete-btn', 'service_map', 'service-map.json');\n    attachFileUploadListeners('server-map-upload-btn', 'server-map-input', 'server-map-file-name', 'server-map-error', 'server-map-delete-btn', 'server_map', 'server-map.json');\n    attachFileUploadListeners('options-upload-btn', 'options-input', 'options-file-name', 'options-error', 'options-delete-btn', 'user_options', 'options.json');\n\n    const notificationToggle = document.getElementById('notifications-toggle');\n    if (notificationToggle) {\n        const micState = 'permissions' in navigator && navigator.permissions.query({ name: 'microphone' });\n        if (!micState || micState.state === 'denied') notificationToggle.disabled = true;\n\n        notificationToggle.onclick = async (e) => {\n            if (e.target.checked) {\n                try { const permission = await Notification.requestPermission(); if (permission !== 'granted') e.target.checked = false; }\n                catch (error) { e.target.checked = false; }\n            } else if (Notification.permission === 'granted') {\n                alert('To disable notifications, please use your browser settings.');\n                e.target.checked = true;\n            }\n        };\n    }\n\n    const microphoneToggle = document.getElementById('microphone-toggle');\n    async function updateMicrophoneToggleState() {\n        const micState = 'permissions' in navigator ? await navigator.permissions.query({ name: 'microphone' }) : null;\n        if (microphoneToggle) {\n            microphoneToggle.disabled = !micState || micState.state === 'denied';\n            microphoneToggle.checked = micState?.state === 'granted';\n        }\n        const description = document.querySelector('#microphone-setting-item .settings-item-description');\n        if (description) description.textContent = micState ? (micState.state === 'granted' ? 'Microphone access granted' : 'Allow access to your microphone') : 'Not supported in this browser';\n    }\n    updateMicrophoneToggleState();\n    if (microphoneToggle && !microphoneToggle.disabled) {\n        microphoneToggle.onclick = async (e) => {\n            if (e.target.checked) {\n                try { await navigator.mediaDevices.getUserMedia({ audio: true }); updateMicrophoneToggleState(); }\n                catch (error) { e.target.checked = false; updateMicrophoneToggleState(); }\n            } else {\n                const micState = 'permissions' in navigator && await navigator.permissions.query({ name: 'microphone' });\n                if (micState?.state === 'granted') {\n                    alert('To disable microphone access, please use your browser settings.');\n                    e.target.checked = true;\n                }\n            }\n        };\n    }\n\n    const analyticsToggle = document.getElementById('analytics-toggle');\n    if (analyticsToggle) {\n        analyticsToggle.checked = localStorage.getItem('easter_analytics_enabled') !== 'false';\n        analyticsToggle.onclick = (e) => {\n            const enabled = e.target.checked;\n            localStorage.setItem('easter_analytics_enabled', enabled);\n            window.EASTER_ANALYTICS_ENABLED = enabled;\n            window.EASTER_DEBUG_MODE = enabled;\n        };\n    }\n}\n", "// Roadmap Tab Logic\nimport { createPlaceholderMessage, escapeHtml } from './utils.js';\n\nexport const getRoadmapContent = () => `\n  <div class=\"notifications-actions\">\n    <button id=\"roadmap-new\" class=\"notif-action-btn\"><i class='bx bx-plus'></i> New Idea</button>\n    <button id=\"roadmap-expand-all\" class=\"notif-action-btn\"><i class='bx bx-expand'></i> Expand All</button>\n    <button id=\"roadmap-close-all\" class=\"notif-action-btn\"><i class='bx bx-collapse'></i> Close All</button>\n  </div>\n  <div id=\"roadmap-editor-container\" style=\"display: none; padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.1);\">\n    <textarea id=\"roadmap-editor-input\" class=\"settings-textarea\" style=\"min-height: 120px; margin-bottom: 10px;\" placeholder=\"Describe your visionary idea or strategic objective...\"></textarea>\n    <div style=\"display: flex; gap: 10px; justify-content: center;\">\n      <button id=\"roadmap-save\" class=\"notif-action-btn\"><i class='bx bx-save'></i> Save Draft</button>\n      <button id=\"roadmap-cancel\" class=\"notif-action-btn\"><i class='bx bx-x'></i> Cancel</button>\n    </div>\n  </div>\n  <div id=\"roadmap-list\" class=\"notifications-list events-timeline\" style=\"display: flex; flex-direction: column; gap: 15px;\">\n    <p>Loading roadmap...</p>\n  </div>\n`;\n\nlet activeExpandedIds = new Set();\nlet currentItems = [];\nlet editingItemId = null;\n\nexport async function updateRoadmapTab(forceReRender = false) {\n  const roadmapContainer = document.getElementById('roadmap-list');\n  if (!roadmapContainer) return;\n\n  attachRoadmapListeners();\n\n  const serviceMapString = localStorage.getItem('service_map');\n  if (!serviceMapString) return;\n\n  let eventService = null;\n  try {\n    const serviceMapData = JSON.parse(serviceMapString);\n    eventService = (serviceMapData.services?.cs || []).find(s => s.id === 'dex-event-service');\n  } catch (e) { return; } \n  if (!eventService) return;\n\n  const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n  const roadmapUrl = `http://${domain}:${eventService.port}/roadmap`;\n\n  try {\n    const response = await fetch(roadmapUrl);\n    if (!response.ok) throw new Error('Offline');\n\n    const items = await response.json();\n    currentItems = items;\n\n    if (items.length === 0) {\n      roadmapContainer.innerHTML = createPlaceholderMessage('empty', 'Your roadmap is empty.', 'Click \"New Idea\" to start planning Dexter\\'s future.');\n      return;\n    }\n\n    if (forceReRender) roadmapContainer.innerHTML = '';\n\n    const createItemElement = (item) => {\n      const isExpanded = activeExpandedIds.has(item.id);\n      const isDraft = item.state === 'draft';\n      const isPublished = item.state === 'published';\n      const isConsumed = item.state === 'consumed';\n\n      let borderClass = 'event-border-grey'; // Draft\n      if (isPublished) borderClass = 'event-border-blue';\n      if (isConsumed) borderClass = 'event-border-purple';\n\n      const utcDate = new Date(item.created_at * 1000);\n      const dateStr = utcDate.toLocaleDateString(navigator.language, { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });\n\n      const tempDiv = document.createElement('div');\n      tempDiv.className = `event-item notification-item ${borderClass} cursor-pointer ${isExpanded ? 'expanded' : ''}`;\n      tempDiv.dataset.itemId = item.id;\n\n      tempDiv.onclick = (e) => {\n        if (e.target.closest('button')) return;\n        const wasExpanded = tempDiv.classList.contains('expanded');\n        if (wasExpanded) {\n          tempDiv.classList.remove('expanded');\n          tempDiv.querySelector('.event-details').style.display = 'none';\n          activeExpandedIds.delete(item.id);\n        } else {\n          tempDiv.classList.add('expanded');\n          tempDiv.querySelector('.event-details').style.display = 'block';\n          activeExpandedIds.add(item.id);\n        }\n      };\n\n      let statusBadge = `<span style=\"font-size: 0.7em; opacity: 0.6; margin-left: 10px;\">[${item.state.toUpperCase()}]</span>`;\n\n      tempDiv.innerHTML = `\n        <div class=\"event-time\">\n          <span class=\"event-time-main\">${dateStr.split(',')[1]}</span>\n          <span class=\"event-date\">${dateStr.split(',')[0]}</span>\n        </div>\n        <div class=\"event-content\">\n          <div class=\"event-service\">ROADMAP ${statusBadge}</div>\n          <div class=\"event-message\" style=\"white-space: pre-wrap;\">${escapeHtml(item.content)}</div>\n          <div class=\"event-details\" style=\"${isExpanded ? 'display: block;' : 'display: none;'} \">\n            <div class=\"event-details-header\">\n              <h4>Item Controls</h4>\n              <i class=\"bx bx-x close-details-btn\"></i>\n            </div>\n            <div style=\"display: flex; gap: 10px; flex-wrap: wrap;\">\n              ${isConsumed ? '' : `<button class=\"notif-action-btn edit-btn\"><i class='bx bx-edit'></i> Edit</button>`}\n              <button class=\"notif-action-btn publish-toggle-btn\">\n                <i class='bx ${isPublished ? 'bx-pause' : 'bx-rocket'}'></i> ${isPublished ? 'Un-publish' : 'Publish'}\n              </button>\n              <button class=\"notif-action-btn delete-btn danger\"><i class='bx bx-trash'></i> Delete</button>\n            </div>\n            ${isConsumed ? `<div style=\"margin-top: 15px; font-size: 0.8em; color: #888;\">Consumed at: ${new Date(item.consumed_at * 1000).toLocaleString()}</div>` : ''}\n          </div>\n        </div>\n      `;\n\n      // Button listeners\n      tempDiv.querySelector('.edit-btn')?.addEventListener('click', () => startEditing(item));\n      tempDiv.querySelector('.publish-toggle-btn')?.addEventListener('click', () => togglePublish(item));\n      tempDiv.querySelector('.delete-btn')?.addEventListener('click', () => deleteItem(item.id));\n      tempDiv.querySelector('.close-details-btn')?.addEventListener('click', (e) => {\n        e.stopPropagation();\n        tempDiv.classList.remove('expanded');\n        tempDiv.querySelector('.event-details').style.display = 'none';\n        activeExpandedIds.delete(item.id);\n      });\n\n      return tempDiv;\n    };\n\n    const currentChildren = Array.from(roadmapContainer.children);\n    const currentMap = new Map(currentChildren.map(el => [el.dataset.itemId, el]));\n    const newIds = new Set(items.map(e => e.id));\n\n    // Remove old items OR placeholders\n    currentChildren.forEach(child => {\n      const id = child.dataset.itemId;\n      if (!id || !newIds.has(id)) {\n        child.remove();\n      }\n    });\n\n    let previousElement = null;\n    items.forEach((item, index) => {\n      let el = currentMap.get(item.id);\n      if (!el || forceReRender) {\n        if (el) el.remove();\n        el = createItemElement(item);\n        if (!el) return;\n      }\n      if (index === 0) {\n        if (roadmapContainer.firstElementChild !== el) roadmapContainer.prepend(el);\n      } else {\n        if (previousElement && previousElement.nextElementSibling !== el) previousElement.after(el);\n      }\n      previousElement = el;\n    });\n\n  } catch (e) {\n    roadmapContainer.innerHTML = createPlaceholderMessage('error', 'Failed to load roadmap.');\n  }\n}\n\nfunction attachRoadmapListeners() {\n  const newBtn = document.getElementById('roadmap-new');\n  const saveBtn = document.getElementById('roadmap-save');\n  const cancelBtn = document.getElementById('roadmap-cancel');\n  const expandAllBtn = document.getElementById('roadmap-expand-all');\n  const closeAllBtn = document.getElementById('roadmap-close-all');\n\n  if (newBtn && !newBtn.dataset.listenerAttached) {\n    newBtn.onclick = () => {\n      editingItemId = null;\n      document.getElementById('roadmap-editor-input').value = '';\n      document.getElementById('roadmap-editor-container').style.display = 'block';\n    };\n    newBtn.dataset.listenerAttached = \"true\";\n  }\n\n  if (cancelBtn && !cancelBtn.dataset.listenerAttached) {\n    cancelBtn.onclick = () => {\n      document.getElementById('roadmap-editor-container').style.display = 'none';\n      editingItemId = null;\n    };\n    cancelBtn.dataset.listenerAttached = \"true\";\n  }\n\n  if (saveBtn && !saveBtn.dataset.listenerAttached) {\n    saveBtn.onclick = async () => {\n      const content = document.getElementById('roadmap-editor-input').value;\n      if (!content.trim()) return;\n\n      const serviceMapData = JSON.parse(localStorage.getItem('service_map'));\n      const eventService = serviceMapData.services.cs.find(s => s.id === 'dex-event-service');\n      const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n\n      const url = editingItemId\n        ? `http://${domain}:${eventService.port}/roadmap/${editingItemId}`\n        : `http://${domain}:${eventService.port}/roadmap`;\n\n      const method = editingItemId ? 'PATCH' : 'POST';\n\n      try {\n        await fetch(url, {\n          method,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ content })\n        });\n        document.getElementById('roadmap-editor-container').style.display = 'none';\n        updateRoadmapTab(true);\n      } catch (e) { console.error(e); }\n    };\n    saveBtn.dataset.listenerAttached = \"true\";\n  }\n\n  if (expandAllBtn && !expandAllBtn.dataset.listenerAttached) {\n    expandAllBtn.onclick = () => {\n      currentItems.forEach(item => activeExpandedIds.add(item.id));\n      updateRoadmapTab(true);\n    };\n    expandAllBtn.dataset.listenerAttached = \"true\";\n  }\n\n  if (closeAllBtn && !closeAllBtn.dataset.listenerAttached) {\n    closeAllBtn.onclick = () => {\n      activeExpandedIds.clear();\n      updateRoadmapTab(true);\n    };\n    closeAllBtn.dataset.listenerAttached = \"true\";\n  }\n}\n\nfunction startEditing(item) {\n  editingItemId = item.id;\n  document.getElementById('roadmap-editor-input').value = item.content;\n  document.getElementById('roadmap-editor-container').style.display = 'block';\n  document.getElementById('roadmap-editor-container').scrollIntoView({ behavior: 'smooth' });\n}\n\nasync function togglePublish(item) {\n  const newState = item.state === 'published' ? 'draft' : 'published';\n  const serviceMapData = JSON.parse(localStorage.getItem('service_map'));\n  const eventService = serviceMapData.services.cs.find(s => s.id === 'dex-event-service');\n  const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n\n  try {\n    await fetch(`http://${domain}:${eventService.port}/roadmap/${item.id}`, {\n      method: 'PATCH',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ state: newState })\n    });\n    updateRoadmapTab(true);\n  } catch (e) { console.error(e); }\n}\n\nasync function deleteItem(id) {\n  if (!confirm(\"Delete this roadmap item?\")) return;\n  const serviceMapData = JSON.parse(localStorage.getItem('service_map'));\n  const eventService = serviceMapData.services.cs.find(s => s.id === 'dex-event-service');\n  const domain = eventService.domain === '0.0.0.0' ? '127.0.0.1' : eventService.domain;\n\n  try {\n    await fetch(`http://${domain}:${eventService.port}/roadmap/${id}`, { method: 'DELETE' });\n    activeExpandedIds.delete(id);\n    updateRoadmapTab(true);\n  } catch (e) { console.error(e); }\n}\n", "// Easter Company - Universal JS Entrypoint\nimport { applyBaseStyles, injectNavbar, injectFooter } from './styler.js';\nimport { createWindow } from './Window.js';\nimport { isLoggedIn, login, getUserEmail } from './auth.js';\nimport { initTheme } from './theme.js';\nimport { getLogsContent, updateLogs, lastLogsUpdate } from './logs.js';\nimport { createPlaceholderMessage, updateTabTimestamp } from './utils.js';\nimport { getEventsContent, updateEventsTimeline, lastEventsUpdate } from './events.js';\nimport { getNotificationsContent, updateNotificationsTab, lastNotificationsUpdate } from './notifications.js';\nimport { getBlueprintsContent, updateBlueprintsTab, lastBlueprintsUpdate } from './blueprints.js';\nimport { getServicesContent, getModelsContent, getProcessesContent, updateSystemMonitor, updateModelsTab, updateProcessesTab, lastServicesUpdate, lastModelsUpdate, lastProcessesUpdate } from './monitor.js';\nimport { getSettingsContent, attachSettingsListeners } from './settings.js';\nimport { getRoadmapContent, updateRoadmapTab } from './roadmap.js';\n\nfunction onReady() {\n  initTheme();\n  applyBaseStyles();\n  const loggedIn = isLoggedIn();\n  injectNavbar(loggedIn);\n  injectFooter();\n\n  // --- Window Management ---\n  const footer = document.querySelector('footer');\n  let openWindow = null;\n\n  function onWindowClose() {\n    openWindow = null;\n    footer?.classList.remove('hide');\n    document.querySelectorAll('.nav-right i').forEach(icon => icon.classList.remove('active', 'inactive'));\n  }\n\n  function handleWindow(windowInstance, clickedIcon = null) {\n    const isCurrentlyOpen = openWindow && openWindow.id === windowInstance.id;\n    if (openWindow) {\n      openWindow.close(isCurrentlyOpen ? false : true);\n    }\n    if (!isCurrentlyOpen) {\n      setTimeout(() => {\n        windowInstance.open();\n        openWindow = windowInstance;\n        document.querySelectorAll('.nav-right i').forEach(icon => {\n          const isActive = icon === clickedIcon;\n          icon.classList.toggle('active', isActive);\n          icon.classList.toggle('inactive', !isActive && clickedIcon);\n        });\n        footer?.classList.add('hide');\n      }, openWindow ? 220 : 0);\n    } else {\n      openWindow = null;\n    }\n  }\n\n  async function initializeMessageWindow() {\n    // Initial fetch for all tabs\n    await Promise.all([\n      updateSystemMonitor(),\n      updateModelsTab(),\n      updateEventsTimeline(),\n      updateProcessesTab(),\n      updateNotificationsTab(),\n      updateBlueprintsTab(),\n      updateLogs()\n    ]);\n\n    // Update timestamps every second\n    const timestampInterval = setInterval(() => {\n      if (!messageWindow.isOpen()) return clearInterval(timestampInterval);\n      updateTabTimestamp(4, lastLogsUpdate);\n      updateTabTimestamp(3, lastEventsUpdate);\n      updateTabTimestamp(5, lastModelsUpdate);\n      updateTabTimestamp(6, lastServicesUpdate);\n      updateTabTimestamp(2, lastProcessesUpdate);\n      updateTabTimestamp(1, lastBlueprintsUpdate);\n      updateTabTimestamp(0, lastNotificationsUpdate);\n    }, 1000);\n\n    // Frequent updates (3s)\n    const refreshInterval = setInterval(() => {\n      if (!messageWindow.isOpen()) return clearInterval(refreshInterval);\n      updateEventsTimeline();\n      updateProcessesTab();\n      updateNotificationsTab();\n      updateBlueprintsTab();\n      updateLogs();\n    }, 3000);\n\n    // Infrequent updates (60s)\n    const servicesRefreshInterval = setInterval(() => {\n      if (!messageWindow.isOpen()) return clearInterval(servicesRefreshInterval);\n      updateSystemMonitor();\n      updateModelsTab();\n    }, 60000);\n  }\n\n  async function initializeUserWindow() {\n    await updateRoadmapTab();\n    const refreshInterval = setInterval(() => {\n      if (!userWindow.isOpen()) return clearInterval(refreshInterval);\n      updateRoadmapTab();\n    }, 5000);\n  }\n\n  // Define windows\n  const loginWindow = createWindow({ \n    id: 'login-window', \n    title: 'Welcome', \n    content: `<div class=\"login-split-container\"><div class=\"login-top-section\"><div class=\"login-form\"><p>Enter your email to continue</p><form id=\"login-form\"><input type=\"email\" id=\"email-input\" placeholder=\"you@easter.company\" required autocomplete=\"email\" /><button type=\"submit\">Continue</button><div id=\"login-error\" class=\"error\" style=\"display: none;\"></div></form></div></div><div class=\"login-bottom-section\"><div class=\"login-disclaimer\"><h2>Early Access</h2><p>Contribute on <a href=\"https://github.com/eastercompany\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a> to unlock early access.</p></div></div></div>`, \n    icon: 'bx-log-in', \n    onClose: onWindowClose \n  });\n  \n  const userWindow = createWindow({ \n    id: 'user-window', \n    tabs: [\n      { icon: 'bx-user', title: 'Profile', content: `<p style=\"padding: 20px;\">Logged in as: ${getUserEmail() || 'Unknown'}<br><br><span style=\"font-family: monospace; font-size: 0.8em; opacity: 0.6;\">UUID: 313071000877137920</span></p>`, 'data-tab-index': 0 },\n      { icon: 'bx-map-alt', title: 'Roadmap', content: getRoadmapContent(), 'data-tab-index': 1 }\n    ],\n    icon: 'bx-user', \n    onClose: onWindowClose,\n    onOpen: () => setTimeout(initializeUserWindow, 100)\n  });\n\n  const settingsWindow = createWindow({\n    id: 'settings-window', \n    title: 'Settings', \n    content: getSettingsContent(), \n    icon: 'bx-cog', \n    onClose: onWindowClose, \n    onOpen: () => {\n      settingsWindow.setContent(getSettingsContent());\n      setTimeout(() => attachSettingsListeners(settingsWindow), 50);\n    }\n  });\n\n  const messageWindow = createWindow({\n    id: 'message-window',\n    tabs: [\n      { icon: 'bx-bell', title: 'Notifications', content: getNotificationsContent(), 'data-tab-index': 0 },\n      { icon: 'bx-paint', title: 'Blueprints', content: getBlueprintsContent(), 'data-tab-index': 1 },\n      { icon: 'bx-cog', title: 'Processes', content: getProcessesContent(), 'data-tab-index': 2 },\n      { icon: 'bx-calendar-event', title: 'Events', content: getEventsContent(), 'data-tab-index': 3 },\n      { icon: 'bx-history', title: 'Logs', content: getLogsContent(), 'data-tab-index': 4 },\n      { icon: 'bx-brain', title: 'Models', content: getModelsContent(), 'data-tab-index': 5 },\n      { icon: 'bx-line-chart', title: 'Services', content: getServicesContent(), 'data-tab-index': 6 }\n    ],\n    icon: 'bxs-message-dots',\n    onClose: onWindowClose,\n    onOpen: () => setTimeout(initializeMessageWindow, 100)\n  });\n\n  if (loggedIn) {\n    document.getElementById('user-icon')?.addEventListener('click', (e) => handleWindow(userWindow, e.currentTarget));\n    document.getElementById('message-icon')?.addEventListener('click', (e) => handleWindow(messageWindow, e.currentTarget));\n    document.getElementById('settings-icon')?.addEventListener('click', (e) => handleWindow(settingsWindow, e.currentTarget));\n  } else {\n    document.getElementById('login-btn')?.addEventListener('click', () => {\n      handleWindow(loginWindow);\n      setTimeout(() => {\n        document.getElementById('login-form')?.addEventListener('submit', e => {\n          e.preventDefault();\n          try {\n            login(document.getElementById('email-input').value);\n            window.location.reload();\n          } catch (error) {\n            const errorDiv = document.getElementById('login-error');\n            if (errorDiv) {\n              errorDiv.textContent = error.message;\n              errorDiv.style.display = 'block';\n            }\n          }\n        });\n      }, 100);\n    });\n  }\n}\n\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", onReady);\n} else {\n  onReady();\n}"],
  "mappings": "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",
  "names": ["applyBaseStyles", "injectNavbar", "isLoggedIn", "navbarHTML", "navbar", "injectFooter", "footerHTML", "footer", "createWindow", "options", "windowEl", "closeCallback", "openCallback", "open", "handleResize", "container", "iconClass", "tabBarHTML", "windowTitleHTML", "contentHTML", "tab", "index", "iconHtml", "headerHTML", "closeBtn", "e", "close", "tabIndex", "t", "c", "scrollToActiveTab", "activeTab", "tabBar", "tabs", "currentIndex", "barWidth", "leftNeighbor", "rightNeighbor", "leftPos", "windowWidth", "targetScroll", "immediate", "setContent", "content", "contentDiv", "isOpen", "AUTH_KEY", "isLoggedIn", "getUserEmail", "login", "email", "THEME_KEY", "THEMES", "getCurrentTheme", "resolveAutoTheme", "width", "height", "isFullscreen", "setTheme", "theme", "applyTheme", "skipTransition", "body", "resolvedTheme", "t", "bg", "initTheme", "currentTheme", "resizeTimeout", "createPlaceholderMessage", "type", "message", "actionText", "icon", "actionHtml", "getLogsContent", "lastLogsUpdate", "updateLogs", "logsContainer", "serviceMapString", "serviceMapData", "e", "eventService", "serviceGroups", "group", "found", "s", "logsUrl", "response", "logsData", "hiddenServiceIDs", "filteredLogsData", "logReport", "logsHtml", "logs", "btn", "error", "createPlaceholderMessage", "type", "message", "actionText", "icon", "actionHtml", "escapeHtml", "text", "updateTabTimestamp", "tabIndex", "timestamp", "subtitleElement", "now", "seconds", "timeStr", "updateTabBadgeCount", "count", "tabBtn", "badge", "updateUnreadNotificationCount", "notificationsList", "unreadCount", "EVENT_TEMPLATES", "formatEventSummary", "type", "data", "template", "summary", "match", "key", "getEventsContent", "lastEventsUpdate", "activeExpandedIds", "currentFilteredEvents", "updateEventsTimeline", "forceReRender", "eventsContainer", "attachEventActionListeners", "serviceMapString", "createPlaceholderMessage", "eventService", "s", "eventsUrl", "response", "events", "updateTabTimestamp", "createEventElement", "event", "eventData", "type", "isExpandable", "borderClass", "cursorClass", "isExpanded", "expandedClass", "detailsStyle", "utcDate", "timeStr", "dateStr", "summary", "formatEventSummary", "detailsHtml", "detailsContent", "escapeHtml", "imageHtml", "attachmentsHtml", "att", "isImage", "sizeStr", "tempDiv", "e", "details", "closeBtn", "item", "currentChildren", "currentMap", "el", "newIds", "child", "id", "previousElement", "index", "error", "expandAllBtn", "closeAllBtn", "getNotificationsContent", "lastNotificationsUpdate", "activeExpandedIds", "currentFilteredNotifications", "updateNotificationsTab", "forceReRender", "notificationsContainer", "attachActionListeners", "serviceMapString", "createPlaceholderMessage", "eventService", "s", "notificationsUrl", "response", "allNotifications", "updateTabTimestamp", "now", "persistenceThreshold", "filteredNotifications", "event", "readTSStr", "readTS", "updateUnreadNotificationCount", "createNotificationElement", "notificationEvent", "notificationData", "title", "body", "priority", "isAlert", "category", "relatedEventIDs", "isRead", "utcDate", "timeStr", "dateStr", "borderClass", "readClass", "isExpanded", "expandedClass", "detailsStyle", "detailsContent", "relatedEventsHtml", "id", "escapeHtml", "tempDiv", "e", "details", "newBorder", "closeBtn", "currentChildren", "currentMap", "el", "newIds", "child", "previousElement", "index", "error", "readAllBtn", "expandAllBtn", "closeAllBtn", "clearBtn", "notif", "longAgo", "getBlueprintsContent", "lastBlueprintsUpdate", "activeExpandedIds", "currentFilteredBlueprints", "updateBlueprintsTab", "forceReRender", "blueprintsContainer", "attachBlueprintActionListeners", "serviceMapString", "createPlaceholderMessage", "eventService", "s", "blueprintsUrl", "response", "allBlueprints", "updateTabTimestamp", "updateTabBadgeCount", "createBlueprintElement", "event", "blueprintData", "title", "summary", "content", "category", "affectedServices", "implementationPath", "utcDate", "timeStr", "dateStr", "isExpanded", "detailsStyle", "tempDiv", "e", "details", "affectedHtml", "pathHtml", "step", "escapeHtml", "closeBtn", "currentChildren", "currentMap", "el", "newIds", "child", "id", "previousElement", "index", "error", "expandAllBtn", "closeAllBtn", "b", "getServicesContent", "createPlaceholderMessage", "getModelsContent", "getProcessesContent", "lastServicesUpdate", "lastModelsUpdate", "lastProcessesUpdate", "fetchSystemData", "eventService", "s", "url", "response", "error", "fetchProcessData", "fetchAnalystStatus", "updateSystemMonitor", "widgetsContainer", "data", "updateTabTimestamp", "services", "child", "sanitizeValue", "value", "extractMajorMinorPatch", "versionStr", "match", "truncateAddress", "address", "formatUptime", "uptimeStr", "days", "hours", "minutes", "seconds", "totalSeconds", "totalDays", "totalHours", "totalMinutes", "generateWidgetHtml", "service", "isOnline", "statusClass", "statusIcon", "statusText", "versionDisplay", "cpuDisplay", "memDisplay", "cpuIconColor", "cpuTextColor", "memIconColor", "memTextColor", "uptime", "detailsHtml", "existingWidgetsMap", "widget", "incomingServiceIds", "id", "newHtml", "existingWidget", "updateModelsTab", "models", "whisperStatus", "generateWhisperWidgetHtml", "whisper", "isReady", "generateModelWidgetHtml", "model", "isDownloaded", "sizeDisplay", "modelDisplayName", "finalHtml", "updateProcessesTab", "t1Val", "t2Val", "t3Val", "idleVal", "resetBtn", "analystStatus", "now", "updateTimer", "el", "nextRun", "diff", "mins", "secs", "idle", "processes", "updateTabBadgeCount", "generateProcessWidgetHtml", "proc", "duration", "retryBadge", "displayName", "idMap", "incomingIds", "p", "getSettingsContent", "currentTheme", "getCurrentTheme", "userEmail", "getUserEmail", "notificationState", "analyticsEnabled", "THEMES", "theme", "attachSettingsListeners", "settingsWindowInstance", "settingsContent", "card", "newTheme", "setTheme", "attachFileUploadListeners", "buttonId", "inputId", "nameId", "errorId", "deleteId", "localStorageKey", "expectedFileName", "uploadBtn", "fileInput", "fileNameSpan", "errorDiv", "deleteBtn", "e", "file", "reader", "event", "jsonContent", "notificationToggle", "micState", "microphoneToggle", "updateMicrophoneToggleState", "description", "analyticsToggle", "enabled", "getRoadmapContent", "activeExpandedIds", "currentItems", "editingItemId", "updateRoadmapTab", "forceReRender", "roadmapContainer", "attachRoadmapListeners", "serviceMapString", "eventService", "s", "roadmapUrl", "response", "items", "createPlaceholderMessage", "createItemElement", "item", "isExpanded", "isDraft", "isPublished", "isConsumed", "borderClass", "dateStr", "tempDiv", "e", "statusBadge", "escapeHtml", "startEditing", "togglePublish", "deleteItem", "currentChildren", "currentMap", "el", "newIds", "child", "id", "previousElement", "index", "newBtn", "saveBtn", "cancelBtn", "expandAllBtn", "closeAllBtn", "content", "domain", "url", "method", "newState", "onReady", "initTheme", "applyBaseStyles", "loggedIn", "isLoggedIn", "injectNavbar", "injectFooter", "footer", "openWindow", "onWindowClose", "icon", "handleWindow", "windowInstance", "clickedIcon", "isCurrentlyOpen", "isActive", "initializeMessageWindow", "updateSystemMonitor", "updateModelsTab", "updateEventsTimeline", "updateProcessesTab", "updateNotificationsTab", "updateBlueprintsTab", "updateLogs", "timestampInterval", "messageWindow", "updateTabTimestamp", "lastLogsUpdate", "lastEventsUpdate", "lastModelsUpdate", "lastServicesUpdate", "lastProcessesUpdate", "lastBlueprintsUpdate", "lastNotificationsUpdate", "refreshInterval", "servicesRefreshInterval", "initializeUserWindow", "updateRoadmapTab", "userWindow", "loginWindow", "createWindow", "getUserEmail", "getRoadmapContent", "settingsWindow", "getSettingsContent", "attachSettingsListeners", "getNotificationsContent", "getBlueprintsContent", "getProcessesContent", "getEventsContent", "getLogsContent", "getModelsContent", "getServicesContent", "e", "login", "error", "errorDiv"]
}
