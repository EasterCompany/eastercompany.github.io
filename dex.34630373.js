(()=>{function R(){console.log("Applying base styles dynamically (e.g., for background animation or theme toggles).")}function Y(e=!1){let o=`
        <div class="nav-left">
            <img src="/static/meta/favicon.svg" alt="Easter Company Favicon" class="navbar-favicon">
            <i class='bx bx-microphone' id="navbar-microphone"></i>
        </div>
        <div class="nav-right">
            ${e?`
            <i id="message-icon" class='bx bxs-message-dots'></i>
            <i id="user-icon" class='bx bx-user'></i>
            <i id="settings-icon" class='bx bx-cog'></i>
        `:`
            <button id="login-btn" class="login-btn">LOGIN</button>
        `}
        </div>
    `,c=document.createElement("nav");c.innerHTML=o,document.body.prepend(c)}function X(){let e=`
        <div class="socials-section">
            <a href="https://facebook.com/eastercompany" aria-label="Facebook" target="_blank" rel="noopener noreferrer"><i class="bx bxl-facebook-square"></i></a>
            <a href="https://linkedin.com/company/72223947" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer"><i class="bx bxl-linkedin"></i></a>
            <a href="https://instagram.com/eastercompany" aria-label="Instagram" target="_blank" rel="noopener noreferrer"><i class="bx bxl-instagram-alt"></i></a>
            <a href="https://x.com/eastercompany" aria-label="X" target="_blank" rel="noopener noreferrer"><i class="bx bxl-twitter"></i></a>
            <a href="https://github.com/eastercompany" aria-label="GitHub" target="_blank" rel="noopener noreferrer"><i class="bx bxl-github"></i></a>
            <a href="https://youtube.com/@eastercompany" aria-label="YouTube" target="_blank" rel="noopener noreferrer"><i class="bx bxl-youtube"></i></a>
        </div>
    `,t=document.createElement("footer");t.innerHTML=e,document.body.appendChild(t)}function O(e){let t=null,o=e.onClose||null,c=e.onOpen||null;function u(){if(t){t.classList.add("open"),c&&setTimeout(c,10);return}let m=document.getElementById("windows-container");m||(m=document.createElement("div"),m.id="windows-container",m.className="windows-container",document.body.appendChild(m)),t=document.createElement("div"),t.id=e.id,t.className="window";let h=e.icon||"bx-window",I="",v="",w;e.tabs&&e.tabs.length>0?(I=`<div class="tab-bar">${e.tabs.map((y,x)=>{let $;return y.icon?$=`<i class="bx ${y.icon}"></i>`:y.title&&y.title.length>0?$=`<span class="tab-glyph">${y.title.charAt(0).toUpperCase()}</span>`:$='<i class="bx bx-question-mark"></i>',`
                    <div class="tab ${x===0?"active":""}" data-tab-index="${x}">
                        ${$}
                        <span class="tab-title">${y.title}</span>
                        <span class="tab-subtitle" data-tab-subtitle="${x}">Last updated: never</span>
                    </div>
                `}).join("")}</div>`,w=`<div class="window-content">${e.tabs.map((y,x)=>`<div class="tab-content ${x===0?"active":""}" data-tab-content="${x}">${y.content}</div>`).join("")}</div>`):(e.title&&(v=`<div class="window-title">${e.title}</div>`),w=`<div class="window-content">${e.content}</div>`);let T=`
            <div class="window-header">
                <i class="bx ${h}"></i>
                ${I}
                ${v}
                <i class="bx bx-x window-close"></i>
            </div>
        `;t.innerHTML=T+w,m.appendChild(t);let B=t.querySelector(".window-close");B&&B.addEventListener("click",H=>{H.stopPropagation(),f()}),e.tabs&&e.tabs.length>0&&t.querySelectorAll(".tab").forEach(C=>{C.addEventListener("click",()=>{let y=C.getAttribute("data-tab-index");t.querySelectorAll(".tab").forEach(x=>x.classList.remove("active")),C.classList.add("active"),t.querySelectorAll(".tab-content").forEach(x=>x.classList.remove("active")),t.querySelector(`.tab-content[data-tab-content="${y}"]`).classList.add("active")})}),setTimeout(()=>{t.classList.add("open"),c&&c()},10)}function f(m=!1){t&&(m?(t.classList.add("switching"),t.classList.remove("open"),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t),t=null},200)):(t.classList.remove("open"),o&&o(),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t),t=null},400)))}function b(m){if(t){let h=t.querySelector(".window-content");h&&(h.innerHTML=m)}}function L(){return t&&t.classList.contains("open")}return{open:u,close:f,setContent:b,isOpen:L,id:e.id}}var K="easter_user_email";function Z(){return localStorage.getItem(K)!==null}function Q(){return localStorage.getItem(K)}function ee(e){if(!e||!e.includes("@"))throw new Error("Invalid email address");if(!e.trim().toLowerCase().endsWith("@easter.company"))throw new Error("Access denied. Please check your credentials.");localStorage.setItem(K,e.trim())}var ae="easter_theme",M={AUTO:"auto",DEFAULT:"default",ANIMATED:"animated"};function re(){return localStorage.getItem(ae)||M.AUTO}function ce(){let e=window.innerWidth,t=window.innerHeight,o=window.innerHeight===window.screen.height&&window.innerWidth===window.screen.width;return e>1920&&t>1080?M.ANIMATED:(e===1920&&t===1080&&o||e<=1920||t<=1080,M.DEFAULT)}function te(e,t=!1){let o=document.body,c=e===M.AUTO?ce():e;if(t||(o.classList.add("theme-transitioning"),setTimeout(()=>{o.classList.remove("theme-transitioning")},300)),Object.values(M).forEach(u=>{o.classList.remove(`theme-${u}`)}),o.classList.add(`theme-${e}`),c===M.ANIMATED){if(!document.querySelector(".background")){let u=document.createElement("div");u.className="background",document.body.prepend(u)}}else{let u=document.querySelector(".background");u&&(t?u.remove():(u.style.animation="fadeOutBackground 0.4s ease forwards",setTimeout(()=>{u.remove()},400)))}}function ne(){let e=re();if(te(e,!0),e===M.AUTO){let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{te(M.AUTO)},300)})}}function A(e,t,o=null){let u={config:"bx-cog",error:"bx-error-circle",empty:"bx-info-circle",offline:"bx-wifi-off"}[e]||"bx-info-circle",f=o?`<p class="placeholder-action">${o}</p>`:"";return`
        <div class="tab-placeholder">
            <i class='bx ${u} placeholder-icon'></i>
            <p class="placeholder-message">${t}</p>
            ${f}
        </div>
    `}function ie(){return`
        <div id="logs-container" class="logs-container">
            <p>Loading logs...</p>
        </div>
    `}async function V(){let e=document.getElementById("logs-container");if(!e)return!1;e.classList.remove("placeholder-active");let t=localStorage.getItem("service_map");if(!t)return e.classList.add("placeholder-active"),e.innerHTML=A("config","No service map configured.","Please upload your service-map.json in Settings to enable log monitoring."),!1;let o;try{o=JSON.parse(t)}catch(b){return console.error("Error parsing service_map from localStorage:",b),e.classList.add("placeholder-active"),e.innerHTML=A("error","Invalid service map data.","Please re-upload a valid service-map.json file in Settings."),!1}let c=null;if(o&&typeof o.services=="object"){let b=["cs","be","th"];for(let L of b)if(Array.isArray(o.services[L])){let m=o.services[L].find(h=>h.short_name==="event"||h.id==="event"||h.id==="dex-event-service");if(m){c=m;break}}}if(!c)return e.classList.add("placeholder-active"),e.innerHTML=A("error","Event service not found in service map.","Please ensure dex-event-service is configured in your service-map.json."),!1;let f=`http://${c.domain==="0.0.0.0"?"localhost":c.domain}:${c.port}/logs`;try{let b=await fetch(f);if(!b.ok)return e.classList.add("placeholder-active"),e.innerHTML=A("offline","Event service is offline.","Please ensure the event service is running."),!1;let L=await b.json();if(!L||L.length===0)return e.classList.add("placeholder-active"),e.innerHTML=A("empty","No logs found.","Service logs will appear here when available."),!1;let m=["local-ollama-0","local-cache-0","cloud-cache-0","cloud-cache-1"],h=L.filter(v=>!m.includes(v.id));h.forEach(v=>{v.logs.reverse()}),h.reverse();let I=h.map(v=>{let w=v.logs.join(`
`);return`
                <div class="log-report">
                    <div class="log-report-header">
                        <h3>${v.id}</h3>
                        <button class="copy-logs-btn" data-logs="${escape(w)}">
                            <i class="bx bx-copy"></i>
                        </button>
                    </div>
                    <pre class="log-content">${w}</pre>
                </div>
            `}).join("");return e.innerHTML=I,document.querySelectorAll(".copy-logs-btn").forEach(v=>{v.addEventListener("click",()=>{let w=unescape(v.dataset.logs);navigator.clipboard.writeText(w).then(()=>{let T=v.querySelector("i");T.classList.remove("bx-copy"),T.classList.add("bx-check"),setTimeout(()=>{T.classList.remove("bx-check"),T.classList.add("bx-copy")},2e3)})})}),!0}catch(b){return console.error("Error fetching logs:",b),e.classList.add("placeholder-active"),e.innerHTML=A("offline","Failed to load logs.","The event service may be offline, unreachable, or blocked by a browser extension (e.g., ad blocker)."),!1}}function se(){console.log("Welcome to Easter Company."),ne(),R();let e=Z();Y(e),X();let t=document.querySelector("footer"),o=null;function c(){o=null,t?.classList.remove("hide"),document.querySelectorAll(".nav-right i").forEach(i=>i.classList.remove("active","inactive"))}function u(i,a=null){o&&o.id===i.id?i.close():(o&&o.close(!0),setTimeout(()=>{i.open(),o=i,document.querySelectorAll(".nav-right i").forEach(s=>{s.classList.toggle("active",s===a),s.classList.toggle("inactive",s!==a)}),t?.classList.add("hide")},o?220:0))}function f(i,a,s=null){let l={config:"bx-cog",error:"bx-error-circle",empty:"bx-info-circle",offline:"bx-wifi-off"}[i]||"bx-info-circle",d=s?`<p class="placeholder-action">${s}</p>`:"";return`<div class="tab-placeholder"><i class='bx ${l} placeholder-icon'></i><p class="placeholder-message">${a}</p>${d}</div>`}let b=null,L=null,m=null,h=()=>localStorage.getItem("service_map")?'<div id="system-monitor-widgets" class="system-monitor-widgets"><p>Loading services...</p></div>':f("config","No service map configured.","Upload service-map.json in Settings."),I=()=>localStorage.getItem("service_map")?'<div id="models-widgets" class="system-monitor-widgets"><p>Loading models...</p></div>':f("config","No service map configured.","Upload service-map.json in Settings."),v=()=>'<div id="events-timeline" class="events-timeline"><p>Loading events...</p></div>';async function w(){let i=localStorage.getItem("service_map");if(!i)return null;try{let s=(JSON.parse(i).services?.cs||[]).find(g=>g.id==="dex-event-service");if(!s)return null;let l=`http://${s.domain==="0.0.0.0"?"localhost":s.domain}:${s.port}/system_monitor_metrics`,d=await fetch(l);if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(a){return console.error("Error fetching system data:",a),null}}async function T(){let i=document.getElementById("system-monitor-widgets");if(!i)return;let a=await w();if(!a||!a.services){i.innerHTML=f("offline","Failed to load system metrics.","The event service may be offline or unreachable.");return}b=Date.now();let s=a.services||[];function p(n){return!n||n==="N/A"||n==="unknown"||n.trim()===""?"-":n}function l(n){if(!n||n==="N/A"||n==="unknown")return"-";let r=n.match(/^(\d+\.\d+\.\d+)/);return r?r[0]:n.split(".").slice(0,3).join(".")||"-"}function d(n){return!n||n.length<=28?n:n.substring(0,28)+"..."}function g(n){if(!n||!n.includes("%"))return"#666";let r=parseFloat(n);return r<30?"#00ff00":r<60?"#88ff00":r<80?"#ffaa00":"#ff0000"}function _(n){if(!n||n==="N/A"||n==="unknown")return"-";let r=n.match(/(?:(\d+)d)?(?:(\d+)h)?(?:(\d+)m)?(?:([\d.]+)s)?/);if(!r)return"-";let E=parseInt(r[1])||0,q=parseInt(r[2])||0,P=parseInt(r[3])||0,z=parseFloat(r[4])||0,S=E*86400+q*3600+P*60+z,N=Math.floor(S/60),j=Math.floor(S/3600),U=Math.floor(S/86400);return U>0?`${U}d`:j>0?`${j}h`:N>0?`${N}m`:`${Math.floor(S)}s`}function W(n){let r=n.status==="online",E=r?"service-widget-online":"service-widget-offline",q=r?"bx-check-circle":"bx-x-circle",P=r?"OK":"BAD",z=n.version?l(n.version.str):"-",S=p(n.cpu),N=p(n.memory),j=g(S),U=g(N),oe=_(n.uptime),G="";return r?G=`
                    <div class="service-widget-info">
                        <span class="info-label">Version:</span>
                        <span class="info-value metric-version-monospace">${z}</span>
                    </div>
                    <div class="service-widget-footer">
                        <div class="service-widget-item"><i class="bx bx-time-five"></i><span>${oe}</span></div>
                        <div class="service-widget-item"><i class="bx bxs-microchip" style="color: ${j};"></i><span style="color: ${j};">${S}</span></div>
                        <div class="service-widget-item"><i class="bx bxs-chip" style="color: ${U};"></i><span style="color: ${U};">${N}</span></div>
                    </div>
                `:G='<div class="service-widget-footer offline"><span>OFFLINE</span></div>',`<div class="service-widget ${E}" data-service-id="${n.id}">
                        <div class="service-widget-header">
                            <i class="bx ${q}"></i>
                            <h3>${n.short_name||n.id}</h3>
                            <span class="service-widget-status">${P}</span>
                        </div>
                        <div class="service-widget-body">
                             <div class="service-widget-info">
                                <span class="info-label">Address:</span>
                                <span class="info-value">${d(n.domain&&n.port?`${n.domain}:${n.port}`:"")}</span>
                            </div>
                            ${G}
                        </div>
                    </div>`}let D=new Map(Array.from(i.querySelectorAll(".service-widget")).map(n=>[n.dataset.serviceId,n])),k=new Set(s.map(n=>n.id));for(let[n,r]of D)k.has(n)||(r.remove(),D.delete(n));s.forEach(n=>{let r=W(n),E=D.get(n.id);E?E.outerHTML!==r&&(E.outerHTML=r):container.insertAdjacentHTML("beforeend",r)})}function B(i){let a=document.getElementById("models-widgets");if(!a)return;if(!i||!i.models){a.innerHTML=f("offline","Failed to load model status.","Event service may be unreachable.");return}let s=i.models||[];if(s.length===0){a.innerHTML=f("empty","No models to display.");return}a.innerHTML=s.map(p=>{let l=p.status==="Downloaded",d=l?"service-widget-online":"service-widget-offline",g=l?"OK":"MISSING",_=l&&p.size>0?`${(p.size/1e9).toFixed(2)} GB`:"-";return`<div class="service-widget ${d}" data-model-name="${p.name}"><div class="service-widget-header"><i class="bx ${l?"bx-check-circle":"bx-x-circle"}"></i><h3>${p.name}</h3><span class="service-widget-status">${g}</span></div><div class="service-widget-body"><div class="service-widget-info"><span class="info-label">Type:</span><span class="info-value">${p.type}</span></div><div class="service-widget-info"><span class="info-label">Size:</span><span class="info-value">${_}</span></div></div></div>`}).join("")}async function H(){let i=document.getElementById("events-timeline");if(!i)return;let a=localStorage.getItem("service_map");if(!a){i.innerHTML=f("config","No service map configured.","Upload service-map.json in Settings.");return}let s=null;try{s=(JSON.parse(a).services?.cs||[]).find(g=>g.id==="dex-event-service")}catch{i.innerHTML=f("error","Invalid service map data.");return}if(!s){i.innerHTML=f("error","Event service not found in service map.");return}let l=`http://${s.domain==="0.0.0.0"?"localhost":s.domain}:${s.port}/events?ml=50&format=text`;try{let d=await fetch(l);if(!d.ok)throw new Error("Service is offline or unreachable.");let g=await d.text();if(!g||g.trim()===""){i.innerHTML=f("empty","No events found.","Events will appear here as they occur.");return}let W=g.trim().split(`
`).map(D=>{let k=D.split(" | ");if(k.length<3)return"";let n=new Date(k[0].trim().replace(" UTC","Z")),r=n.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit"}),E=n.toLocaleDateString(navigator.language,{month:"short",day:"numeric",year:"numeric"});return`<div class="event-item"><div class="event-time"><span class="event-time-main">${r}</span><span class="event-date">${E}</span></div><div class="event-content"><div class="event-service">${k[1].trim()}</div><div class="event-message">${k[2].trim()}</div></div></div>`}).join("");i.innerHTML=W,L=Date.now()}catch(d){console.error("Error fetching events:",d),i.innerHTML=f("offline","Failed to load events.","The event service may be offline or unreachable.")}}let C=O({id:"login-window",title:"Welcome",content:"... login form HTML ...",icon:"bx-log-in",onClose:c}),y=O({id:"user-window",title:"User Profile",content:`<p>Logged in as: ${Q()||"Unknown"}</p>`,icon:"bx-user",onClose:c}),x=O({id:"settings-window",title:"Settings",content:"Loading settings...",icon:"bx-cog",onClose:c,onOpen:()=>{}}),$=O({id:"message-window",tabs:[{icon:"bx-bell",title:"Notifications",content:f("empty","No notifications yet.")},{icon:"bx-history",title:"Logs",content:ie()},{icon:"bx-brain",title:"Models",content:I()},{icon:"bx-calendar-event",title:"Events",content:v()},{icon:"bx-line-chart",title:"System Monitor",content:h()}],icon:"bxs-message-dots",onClose:c,onOpen:()=>setTimeout(J,100)});async function J(){let i=await w();T(i),updateModelsTab(i),await H(),await V()&&(m=Date.now());let a=setInterval(()=>{if(!$.isOpen())return clearInterval(a);F(1,m),F(3,L),F(4,b)},1e3),s=setInterval(async()=>{if(!$.isOpen())return clearInterval(s);await H(),await V()&&(m=Date.now())},5e3),p=setInterval(async()=>{if(!$.isOpen())return clearInterval(p);let l=await w();T(l),updateModelsTab(l)},3e4)}function F(i,a){let s=document.querySelector(`[data-tab-subtitle="${i}"]`);if(!s)return;if(!a){s.textContent="Last updated: never";return}let l=(Date.now()-a)/1e3,d;if(l<10)d=`${l.toFixed(1)}s ago`;else if(l<60)d=`${Math.floor(l)}s ago`;else{let g=Math.floor(l/60);d=g===1?"1 minute ago":`${g} minutes ago`}s.textContent=`Last updated: ${d}`}e?(document.getElementById("user-icon")?.addEventListener("click",i=>u(y,i.currentTarget)),document.getElementById("message-icon")?.addEventListener("click",i=>u($,i.currentTarget)),document.getElementById("settings-icon")?.addEventListener("click",i=>u(x,i.currentTarget))):document.getElementById("login-btn")?.addEventListener("click",()=>{u(C),setTimeout(()=>{document.getElementById("login-form")?.addEventListener("submit",i=>{i.preventDefault();try{ee(document.getElementById("email-input").value),window.location.reload()}catch(a){let s=document.getElementById("login-error");s.textContent=a.message,s.style.display="block"}})},100)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",se):se();})();
//# sourceMappingURL=dex.34630373.js.map
