(()=>{function Y(){console.log("Applying base styles dynamically (e.g., for background animation or theme toggles).")}function X(e=!1){let o=`
        <div class="nav-left">
            <img src="/static/meta/favicon.svg" alt="Easter Company Favicon" class="navbar-favicon">
            <i class='bx bx-microphone' id="navbar-microphone"></i>
        </div>
        <div class="nav-right">
            ${e?`
            <i id="message-icon" class='bx bxs-message-dots'></i>
            <i id="user-icon" class='bx bx-user'></i>
            <i id="settings-icon" class='bx bx-cog'></i>
        `:`
            <button id="login-btn" class="login-btn">LOGIN</button>
        `}
        </div>
    `,d=document.createElement("nav");d.innerHTML=o,document.body.prepend(d)}function Z(){let e=`
        <div class="socials-section">
            <a href="https://facebook.com/eastercompany" aria-label="Facebook" target="_blank" rel="noopener noreferrer"><i class="bx bxl-facebook-square"></i></a>
            <a href="https://linkedin.com/company/72223947" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer"><i class="bx bxl-linkedin"></i></a>
            <a href="https://instagram.com/eastercompany" aria-label="Instagram" target="_blank" rel="noopener noreferrer"><i class="bx bxl-instagram-alt"></i></a>
            <a href="https://x.com/eastercompany" aria-label="X" target="_blank" rel="noopener noreferrer"><i class="bx bxl-twitter"></i></a>
            <a href="https://github.com/eastercompany" aria-label="GitHub" target="_blank" rel="noopener noreferrer"><i class="bx bxl-github"></i></a>
            <a href="https://youtube.com/@eastercompany" aria-label="YouTube" target="_blank" rel="noopener noreferrer"><i class="bx bxl-youtube"></i></a>
        </div>
    `,t=document.createElement("footer");t.innerHTML=e,document.body.appendChild(t)}function B(e){let t=null,o=e.onClose||null,d=e.onOpen||null;function u(){if(t){t.classList.add("open"),d&&setTimeout(d,10);return}let m=document.getElementById("windows-container");m||(m=document.createElement("div"),m.id="windows-container",m.className="windows-container",document.body.appendChild(m)),t=document.createElement("div"),t.id=e.id,t.className="window";let h=e.icon||"bx-window",A="",g="",T;e.tabs&&e.tabs.length>0?(A=`<div class="tab-bar">${e.tabs.map((y,x)=>{let D;return y.icon?D=`<i class="bx ${y.icon}"></i>`:y.title&&y.title.length>0?D=`<span class="tab-glyph">${y.title.charAt(0).toUpperCase()}</span>`:D='<i class="bx bx-question-mark"></i>',`
                    <div class="tab ${x===0?"active":""}" data-tab-index="${x}">
                        ${D}
                        <span class="tab-title">${y.title}</span>
                        <span class="tab-subtitle" data-tab-subtitle="${x}">Last updated: never</span>
                    </div>
                `}).join("")}</div>`,T=`<div class="window-content">${e.tabs.map((y,x)=>`<div class="tab-content ${x===0?"active":""}" data-tab-content="${x}">${y.content}</div>`).join("")}</div>`):(e.title&&(g=`<div class="window-title">${e.title}</div>`),T=`<div class="window-content">${e.content}</div>`);let $=`
            <div class="window-header">
                <i class="bx ${h}"></i>
                ${A}
                ${g}
                <i class="bx bx-x window-close"></i>
            </div>
        `;t.innerHTML=$+T,m.appendChild(t);let O=t.querySelector(".window-close");O&&O.addEventListener("click",N=>{N.stopPropagation(),p()}),e.tabs&&e.tabs.length>0&&t.querySelectorAll(".tab").forEach(I=>{I.addEventListener("click",()=>{let y=I.getAttribute("data-tab-index");t.querySelectorAll(".tab").forEach(x=>x.classList.remove("active")),I.classList.add("active"),t.querySelectorAll(".tab-content").forEach(x=>x.classList.remove("active")),t.querySelector(`.tab-content[data-tab-content="${y}"]`).classList.add("active")})}),setTimeout(()=>{t.classList.add("open"),d&&d()},10)}function p(m=!1){t&&(m?(t.classList.add("switching"),t.classList.remove("open"),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t),t=null},200)):(t.classList.remove("open"),o&&o(),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t),t=null},400)))}function b(m){if(t){let h=t.querySelector(".window-content");h&&(h.innerHTML=m)}}function L(){return t&&t.classList.contains("open")}return{open:u,close:p,setContent:b,isOpen:L,id:e.id}}var K="easter_user_email";function Q(){return localStorage.getItem(K)!==null}function ee(){return localStorage.getItem(K)}function te(e){if(!e||!e.includes("@"))throw new Error("Invalid email address");if(!e.trim().toLowerCase().endsWith("@easter.company"))throw new Error("Access denied. Please check your credentials.");localStorage.setItem(K,e.trim())}var le="easter_theme",S={AUTO:"auto",DEFAULT:"default",ANIMATED:"animated"};function V(){return localStorage.getItem(le)||S.AUTO}function de(){let e=window.innerWidth,t=window.innerHeight,o=window.innerHeight===window.screen.height&&window.innerWidth===window.screen.width;return e>1920&&t>1080?S.ANIMATED:(e===1920&&t===1080&&o||e<=1920||t<=1080,S.DEFAULT)}function ne(e,t=!1){let o=document.body,d=e===S.AUTO?de():e;if(t||(o.classList.add("theme-transitioning"),setTimeout(()=>{o.classList.remove("theme-transitioning")},300)),Object.values(S).forEach(u=>{o.classList.remove(`theme-${u}`)}),o.classList.add(`theme-${e}`),d===S.ANIMATED){if(!document.querySelector(".background")){let u=document.createElement("div");u.className="background",document.body.prepend(u)}}else{let u=document.querySelector(".background");u&&(t?u.remove():(u.style.animation="fadeOutBackground 0.4s ease forwards",setTimeout(()=>{u.remove()},400)))}}function ie(){let e=V();if(ne(e,!0),e===S.AUTO){let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{ne(S.AUTO)},300)})}}function j(e,t,o=null){let u={config:"bx-cog",error:"bx-error-circle",empty:"bx-info-circle",offline:"bx-wifi-off"}[e]||"bx-info-circle",p=o?`<p class="placeholder-action">${o}</p>`:"";return`
        <div class="tab-placeholder">
            <i class='bx ${u} placeholder-icon'></i>
            <p class="placeholder-message">${t}</p>
            ${p}
        </div>
    `}function oe(){return`
        <div id="logs-container" class="logs-container">
            <p>Loading logs...</p>
        </div>
    `}async function J(){let e=document.getElementById("logs-container");if(!e)return!1;e.classList.remove("placeholder-active");let t=localStorage.getItem("service_map");if(!t)return e.classList.add("placeholder-active"),e.innerHTML=j("config","No service map configured.","Please upload your service-map.json in Settings to enable log monitoring."),!1;let o;try{o=JSON.parse(t)}catch(b){return console.error("Error parsing service_map from localStorage:",b),e.classList.add("placeholder-active"),e.innerHTML=j("error","Invalid service map data.","Please re-upload a valid service-map.json file in Settings."),!1}let d=null;if(o&&typeof o.services=="object"){let b=["cs","be","th"];for(let L of b)if(Array.isArray(o.services[L])){let m=o.services[L].find(h=>h.short_name==="event"||h.id==="event"||h.id==="dex-event-service");if(m){d=m;break}}}if(!d)return e.classList.add("placeholder-active"),e.innerHTML=j("error","Event service not found in service map.","Please ensure dex-event-service is configured in your service-map.json."),!1;let p=`http://${d.domain==="0.0.0.0"?"localhost":d.domain}:${d.port}/logs`;try{let b=await fetch(p);if(!b.ok)return e.classList.add("placeholder-active"),e.innerHTML=j("offline","Event service is offline.","Please ensure the event service is running."),!1;let L=await b.json();if(!L||L.length===0)return e.classList.add("placeholder-active"),e.innerHTML=j("empty","No logs found.","Service logs will appear here when available."),!1;let m=["local-ollama-0","local-cache-0","cloud-cache-0","cloud-cache-1"],h=L.filter(g=>!m.includes(g.id));h.forEach(g=>{g.logs.reverse()}),h.reverse();let A=h.map(g=>{let T=g.logs.join(`
`);return`
                <div class="log-report">
                    <div class="log-report-header">
                        <h3>${g.id}</h3>
                        <button class="copy-logs-btn" data-logs="${escape(T)}">
                            <i class="bx bx-copy"></i>
                        </button>
                    </div>
                    <pre class="log-content">${T}</pre>
                </div>
            `}).join("");return e.innerHTML=A,document.querySelectorAll(".copy-logs-btn").forEach(g=>{g.addEventListener("click",()=>{let T=unescape(g.dataset.logs);navigator.clipboard.writeText(T).then(()=>{let $=g.querySelector("i");$.classList.remove("bx-copy"),$.classList.add("bx-check"),setTimeout(()=>{$.classList.remove("bx-check"),$.classList.add("bx-copy")},2e3)})})}),!0}catch(b){return console.error("Error fetching logs:",b),e.classList.add("placeholder-active"),e.innerHTML=j("offline","Failed to load logs.","The event service may be offline, unreachable, or blocked by a browser extension (e.g., ad blocker)."),!1}}function se(){console.log("Welcome to Easter Company."),ie(),Y();let e=Q();X(e),Z();let t=document.querySelector("footer"),o=null;function d(){o=null,t?.classList.remove("hide"),document.querySelectorAll(".nav-right i").forEach(i=>i.classList.remove("active","inactive"))}function u(i,s=null){let r=o&&o.id===i.id;o&&o.close(!r),r?o=null:setTimeout(()=>{i.open(),o=i,document.querySelectorAll(".nav-right i").forEach(v=>{let l=v===s;v.classList.toggle("active",l),v.classList.toggle("inactive",!l&&s)}),t?.classList.add("hide")},o?220:0)}function p(i,s,r=null){let l={config:"bx-cog",error:"bx-error-circle",empty:"bx-info-circle",offline:"bx-wifi-off"}[i]||"bx-info-circle",f=r?`<p class="placeholder-action">${r}</p>`:"";return`<div class="tab-placeholder"><i class='bx ${l} placeholder-icon'></i><p class="placeholder-message">${s}</p>${f}</div>`}let b=null,L=null,m=null,h=()=>localStorage.getItem("service_map")?'<div id="system-monitor-widgets" class="system-monitor-widgets"><p>Loading services...</p></div>':p("config","No service map configured.","Upload service-map.json in Settings."),A=()=>localStorage.getItem("service_map")?'<div id="models-widgets" class="system-monitor-widgets"><p>Loading models...</p></div>':p("config","No service map configured.","Upload service-map.json in Settings."),g=()=>'<div id="events-timeline" class="events-timeline"><p>Loading events...</p></div>';async function T(){if(!localStorage.getItem("service_map"))return null;try{let s=(JSON.parse(localStorage.getItem("service_map")).services?.cs||[]).find(f=>f.id==="dex-event-service");if(!s)return null;let v=`http://${s.domain==="0.0.0.0"?"localhost":s.domain}:${s.port}/system_monitor_metrics`,l=await fetch(v);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(i){return console.error("Error fetching system data:",i),null}}async function $(){let i=document.getElementById("system-monitor-widgets");if(!i)return;let s=await T();if(!s||!s.services){i.innerHTML=p("offline","Failed to load system metrics.","The event service may be offline or unreachable.");return}b=Date.now();let r=s.services||[];function v(n){return!n||n==="N/A"||n==="unknown"||n.trim()===""?"-":n}function l(n){if(!n||n==="N/A"||n==="unknown")return"-";let c=n.match(/^(\d+\.\d+\.\d+)/);return c?c[0]:n.split(".").slice(0,3).join(".")||"-"}function f(n){return!n||n.length<=28?n:n.substring(0,28)+"..."}function a(n){if(!n||!n.includes("%"))return"#666";let c=parseFloat(n);return c<30?"#00ff00":c<60?"#88ff00":c<80?"#ffaa00":"#ff0000"}function w(n){if(!n||n==="N/A"||n==="unknown")return"-";let c=n.match(/(?:(\d+)d)?(?:(\d+)h)?(?:(\d+)m)?(?:([\d.]+)s)?/);if(!c)return"-";let M=parseInt(c[1])||0,F=parseInt(c[2])||0,P=parseInt(c[3])||0,z=parseFloat(c[4])||0,k=M*86400+F*3600+P*60+z,U=Math.floor(k/86400);if(U>0)return`${U}d`;let _=Math.floor(k/3600);if(_>0)return`${_}h`;let W=Math.floor(k/60);return W>0?`${W}m`:`${Math.floor(k)}s`}function E(n){let c=n.status==="online",M=c?"service-widget-online":"service-widget-offline",F=c?"bx-check-circle":"bx-x-circle",P=c?"OK":"BAD",z=n.version?l(n.version.str):"-",k=v(n.cpu),U=v(n.memory),_=a(k),W=a(U),ce=w(n.uptime),G="";return c?G=`<div class="service-widget-info"><span class="info-label">Version:</span><span class="info-value metric-version-monospace">${z}</span></div><div class="service-widget-footer"><div class="service-widget-item"><i class="bx bx-time-five"></i><span>${ce}</span></div><div class="service-widget-item"><i class="bx bxs-microchip" style="color: ${_};"></i><span style="color: ${_};">${k}<\b></span></div><div class="service-widget-item"><i class="bx bxs-chip" style="color: ${W};"></i><span style="color: ${W};">${U}<\b></span></div></div>`:G='<div class="service-widget-footer offline"><span>OFFLINE</span></div>',`<div class="service-widget ${M}" data-service-id="${n.id}"><div class="service-widget-header"><i class="bx ${F}"></i><h3>${n.short_name||n.id}</h3><span class="service-widget-status">${P}<\b></span></div><div class="service-widget-body"><div class="service-widget-info"><span class="info-label">Address:</span><span class="info-value">${f(n.domain&&n.port?`${n.domain}:${n.port}`:"")}<\b></span></div>${G}<\b></div></div>`}let C=new Map(Array.from(i.querySelectorAll(".service-widget")).map(n=>[n.dataset.serviceId,n])),H=new Set(r.map(n=>n.id));for(let[n,c]of C)H.has(n)||(c.remove(),C.delete(n));r.forEach(n=>{let c=E(n),M=C.get(n.id);M?M.outerHTML!==c&&(M.outerHTML=c):i.insertAdjacentHTML("beforeend",c)})}async function O(){let i=document.getElementById("models-widgets");if(!i)return;let s=await T();if(!s||!s.models){i.innerHTML=p("offline","Failed to load model status.");return}let r=s.models||[];if(r.length===0){i.innerHTML=p("empty","No models found.");return}function v(a){let w=a.status==="Downloaded",E=w?"service-widget-online":"service-widget-offline",C=w?"OK":"MISSING",H=w&&a.size>0?`${(a.size/1e9).toFixed(2)} GB`:"-";return`<div class="service-widget ${E}" data-model-name="${a.name}"><div class="service-widget-header"><i class="bx ${w?"bx-check-circle":"bx-x-circle"}"></i><h3>${a.name}</h3><span class="service-widget-status">${C}<\b></span></div><div class="service-widget-body"><div class="service-widget-info"><span class="info-label">Type:</span><span class="info-value">${a.type}<\b></span></div><div class="service-widget-info"><span class="info-label">Size:</span><span class="info-value">${H}<\b></span></div></div></div>`}let l=new Map(Array.from(i.querySelectorAll(".service-widget")).map(a=>[a.dataset.modelName,a])),f=new Set(r.map(a=>a.name));for(let[a,w]of l)f.has(a)||(w.remove(),l.delete(a));r.forEach(a=>{let w=v(a),E=l.get(a.name);E?E.outerHTML!==w&&(E.outerHTML=w):i.insertAdjacentHTML("beforeend",w)})}async function N(){let i=document.getElementById("events-timeline");if(!i)return;let s=localStorage.getItem("service_map");if(!s){i.innerHTML=p("config","No service map configured.","Upload service-map.json in Settings.");return}let r=null;try{r=(JSON.parse(s).services?.cs||[]).find(a=>a.id==="dex-event-service")}catch{i.innerHTML=p("error","Invalid service map data.");return}if(!r){i.innerHTML=p("error","Event service not found in service map.");return}let l=`http://${r.domain==="0.0.0.0"?"localhost":r.domain}:${r.port}/events?ml=50&format=text`;try{let f=await fetch(l);if(!f.ok)throw new Error("Service is offline or unreachable.");let a=await f.text();if(!a||a.trim()===""){i.innerHTML=p("empty","No events found.","Events will appear here as they occur.");return}let E=a.trim().split(`
`).map(C=>{let H=C.split(" | ");if(H.length<3)return"";let n=new Date(H[0].trim().replace(" UTC","Z")),c=n.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit"}),M=n.toLocaleDateString(navigator.language,{month:"short",day:"numeric"});return`<div class="event-item"><div class="event-time"><span class="event-time-main">${c}<\b></span><span class="event-date">${M}<\b></span></div><div class="event-content"><div class="event-service">${H[1].trim()}<\b></div><div class="event-message">${H[2].trim()}<\b></div></div></div>`}).join("");i.innerHTML=E,L=Date.now()}catch(f){console.error("Error fetching events:",f),i.innerHTML=p("offline","Failed to load events.","The event service may be offline or unreachable.")}}function I(i,s){let r=document.querySelector(`.tab[data-tab-index="${i}"] .tab-subtitle`);if(!r)return;if(!s){r.textContent="never";return}let l=(Date.now()-s)/1e3,f;l<10?f=`${l.toFixed(1)}s ago`:l<60?f=`${Math.floor(l)}s ago`:f=`${Math.floor(l/60)}m ago`,r.textContent=`Last updated: ${f}`}async function y(){await Promise.all([$(),O(),N(),J().then(v=>{v&&(m=Date.now())})]);let i=setInterval(()=>{if(!q.isOpen())return clearInterval(i);I(1,m),I(3,L),I(4,b)},1e3),s=setInterval(()=>{if(!q.isOpen())return clearInterval(s);N(),J().then(v=>{v&&(m=Date.now())})},5e3),r=setInterval(()=>{if(!q.isOpen())return clearInterval(r);$(),O()},3e4)}let x=B({id:"login-window",title:"Welcome",content:'<div class="login-split-container"><div class="login-top-section"><div class="login-form"><p>Enter your email to continue</p><form id="login-form"><input type="email" id="email-input" placeholder="you@easter.company" required autocomplete="email" /><button type="submit">Continue</button><div id="login-error" class="error" style="display: none;"></div></form></div></div><div class="login-bottom-section"><div class="login-disclaimer"><h2>Early Access</h2><p>Contribute on <a href="https://github.com/eastercompany" target="_blank" rel="noopener noreferrer">GitHub</a> to unlock early access.</p></div></div></div>',icon:"bx-log-in",onClose:d}),D=B({id:"user-window",title:"User Profile",content:`<p>Logged in as: ${ee()||"Unknown"}<\b></p>`,icon:"bx-user",onClose:d});function R(){let i=V();return'<div class="theme-selector">...</div>'}function ae(){}let re=B({id:"settings-window",title:"Settings",content:R(),icon:"bx-cog",onClose:d,onOpen:ae}),q=B({id:"message-window",tabs:[{icon:"bx-bell",title:"Notifications",content:p("empty","No notifications yet.")},{icon:"bx-history",title:"Logs",content:oe()},{icon:"bx-brain",title:"Models",content:A()},{icon:"bx-calendar-event",title:"Events",content:g()},{icon:"bx-line-chart",title:"System Monitor",content:h()}],icon:"bxs-message-dots",onClose:d,onOpen:()=>setTimeout(y,100)});e?(document.getElementById("user-icon")?.addEventListener("click",i=>u(D,i.currentTarget)),document.getElementById("message-icon")?.addEventListener("click",i=>u(q,i.currentTarget)),document.getElementById("settings-icon")?.addEventListener("click",i=>u(re,i.currentTarget))):document.getElementById("login-btn")?.addEventListener("click",()=>{u(x),setTimeout(()=>{document.getElementById("login-form")?.addEventListener("submit",i=>{i.preventDefault();try{te(document.getElementById("email-input").value),window.location.reload()}catch(s){document.getElementById("login-error").textContent=s.message,document.getElementById("login-error").style.display="block"}})},100)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",se):se();})();
//# sourceMappingURL=dex.7b71eb68.js.map
