{
  "version": 3,
  "sources": ["source/dex/styler.js", "source/dex/Window.js", "source/dex/auth.js", "source/dex/theme.js", "source/dex/logs.js", "source/dex/main.js"],
  "sourcesContent": ["// styler.js - Placeholder for dynamic styles and elements.\n\nexport function applyBaseStyles() {\n    console.log(\"Applying base styles dynamically (e.g., for background animation or theme toggles).\");\n}\n\nfunction getCleanHostname() {\n    let hostname = window.location.hostname;\n\n    // Remove port if present (e.g., localhost:8000 -> localhost)\n    if (hostname.includes(':')) {\n        hostname = hostname.split(':')[0];\n    }\n\n    const parts = hostname.split('.');\n    const tlds = ['com', 'org', 'net', 'info', 'biz', 'co', 'io', 'company', 'xyz', 'app']; // Add more TLDs as needed\n\n    // Handle localhost and IP addresses\n    if (hostname === 'localhost' || hostname.match(/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/)) {\n        return hostname;\n    }\n\n    // Iterate from the end to find the significant part\n    // Example: test.dev.easter.company\n    // parts = [\"test\", \"dev\", \"easter\", \"company\"]\n    // i=3: \"company\" is a TLD\n    // i=2: \"easter\" is not a TLD, so current = \"easter\"\n    // i=1: \"dev\" is not a TLD, so current = \"dev\"\n    // i=0: \"test\" is not a TLD, so current = \"test\"\n    // The logic needs to find the *effective* domain and then the subdomain part.\n\n    // A simpler approach: find the last part that's not a TLD or common secondary domain,\n    // and if there's a part before it, use that as the subdomain.\n    let cleanName = hostname;\n    for (let i = parts.length - 1; i >= 0; i--) {\n        const part = parts[i];\n        if (tlds.includes(part)) {\n            // This is a TLD, continue to the next part\n            cleanName = parts.slice(0, i).join('.'); // Reconstruct hostname without TLDs\n        } else {\n            // Found a non-TLD part. This is likely the main domain or a subdomain.\n            // If there's only one part left (e.g., \"easter\"), or it's an IP/localhost after stripping TLDs, use it.\n            // If there are multiple parts (e.g., \"dev.easter\"), the last one is the domain, the one before is the subdomain.\n            const remainingParts = cleanName.split('.');\n            if (remainingParts.length > 1 && remainingParts[remainingParts.length - 1] !== 'www') {\n                return remainingParts[0]; // Return the deepest subdomain\n            } else if (remainingParts.length === 1 && remainingParts[0] === 'www') {\n                // If only \"www\", try to get the next part if it's there\n                if (i > 0 && !tlds.includes(parts[i-1])) {\n                    return parts[i-1];\n                }\n            }\n            return remainingParts[remainingParts.length -1]; // Default to main domain if no deep subdomain\n        }\n    }\n    \n    // Fallback for cases like \"www.google.com\" -> \"www\", or single word domains\n    // Let's refine the logic to always get the effective domain or the most specific subdomain.\n    const effectiveDomainParts = [];\n    let foundNonTld = false;\n    for (let i = parts.length - 1; i >= 0; i--) {\n        const part = parts[i];\n        if (tlds.includes(part) && !foundNonTld) {\n            // Skip TLDs from the right\n            continue;\n        } else {\n            foundNonTld = true;\n            effectiveDomainParts.unshift(part); // Add to the beginning\n        }\n    }\n\n    if (effectiveDomainParts.length === 0) {\n        return hostname; // Fallback if nothing found (e.g., just TLDs or malformed)\n    }\n\n    // Now effectiveDomainParts could be [\"easter\", \"company\"] or [\"dev\", \"easter\", \"company\"]\n    // If it's [\"www\", \"easter\"], we want \"easter\"\n    if (effectiveDomainParts[0] === 'www' && effectiveDomainParts.length > 1) {\n        return effectiveDomainParts[1];\n    }\n    \n    // If there's more than one part, return the first (deepest subdomain)\n    if (effectiveDomainParts.length > 1) {\n        return effectiveDomainParts[0];\n    }\n    \n    return effectiveDomainParts[0]; // Otherwise, return the single part (e.g., \"localhost\", \"easter\")\n}\n\n\n/**\n * Injects the navbar with conditional content based on login state\n * @param {boolean} isLoggedIn - Whether the user is logged in\n */\nexport function injectNavbar(isLoggedIn = false) {\n    const navRightContent = isLoggedIn\n        ? `\n            <i id=\"message-icon\" class='bx bxs-message-dots'></i>\n            <i id=\"user-icon\" class='bx bx-user'></i>\n            <i id=\"settings-icon\" class='bx bx-cog'></i>\n        `\n        : `\n            <button id=\"login-btn\" class=\"login-btn\">LOGIN</button>\n        `;\n\n    const navbarHTML = `\n        <div class=\"nav-left\">\n            <img src=\"/static/meta/favicon.svg\" alt=\"Easter Company Favicon\" class=\"navbar-favicon\">\n            <i class='bx bx-microphone' id=\"navbar-microphone\"></i>\n        </div>\n        <div class=\"nav-right\">\n            ${navRightContent}\n        </div>\n    `;\n\n    const navbar = document.createElement('nav');\n    navbar.innerHTML = navbarHTML;\n    document.body.prepend(navbar);\n}\n\nexport function injectFooter() {\n    const footerHTML = `\n        <div class=\"socials-section\">\n            <a href=\"https://facebook.com/eastercompany\" aria-label=\"Facebook\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-facebook-square\"></i></a>\n            <a href=\"https://linkedin.com/company/72223947\" aria-label=\"LinkedIn\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-linkedin\"></i></a>\n            <a href=\"https://instagram.com/eastercompany\" aria-label=\"Instagram\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-instagram-alt\"></i></a>\n            <a href=\"https://x.com/eastercompany\" aria-label=\"X\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-twitter\"></i></a>\n            <a href=\"https://github.com/eastercompany\" aria-label=\"GitHub\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-github\"></i></a>\n            <a href=\"https://youtube.com/@eastercompany\" aria-label=\"YouTube\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-youtube\"></i></a>\n        </div>\n    `;\n    \n    const footer = document.createElement('footer');\n    footer.innerHTML = footerHTML;\n    document.body.appendChild(footer);\n}", "// source/dex/Window.js\n\n/**\n * Creates and manages a single window instance.\n * @param {object} options - Configuration for the window.\n * @param {string} options.id - A unique ID for the window.\n * @param {string} [options.content] - The initial HTML content for the window (if not using tabs).\n * @param {Array<object>} [options.tabs] - An array of tab objects, each with a 'title', 'content', and optional 'scrollable' (default true).\n * @param {string} options.icon - Optional boxicon class for the header icon (e.g., 'bx-user', 'bxs-message-dots')\n * @param {function} options.onClose - Optional callback when window is closed\n * @param {function} options.onOpen - Optional callback when window is opened\n */\nexport function createWindow(options) {\n    let windowEl = null;\n    let closeCallback = options.onClose || null;\n    let openCallback = options.onOpen || null;\n\n    function open() {\n        if (windowEl) {\n            windowEl.classList.add('open');\n            // Call onOpen callback when reopening existing window\n            if (openCallback) {\n                setTimeout(openCallback, 10);\n            }\n            return;\n        }\n\n        let container = document.getElementById('windows-container');\n        if (!container) {\n            container = document.createElement('div');\n            container.id = 'windows-container';\n            container.className = 'windows-container';\n            document.body.appendChild(container);\n        }\n\n        windowEl = document.createElement('div');\n        windowEl.id = options.id;\n        windowEl.className = 'window';\n\n        const iconClass = options.icon || 'bx-window';\n        let tabBarHTML = '';\n        let windowTitleHTML = ''; // New variable for window title\n        let contentHTML;\n\n        if (options.tabs && options.tabs.length > 0) {\n            const tabTitles = options.tabs.map((tab, index) => {\n                let iconHtml;\n                if (tab.icon) {\n                    iconHtml = `<i class=\"bx ${tab.icon}\"></i>`;\n                } else if (tab.title && tab.title.length > 0) {\n                    const glyph = tab.title.charAt(0).toUpperCase();\n                    iconHtml = `<span class=\"tab-glyph\">${glyph}</span>`;\n                } else {\n                    iconHtml = `<i class=\"bx bx-question-mark\"></i>`; // Default fallback if no icon or title\n                }\n\n                return `\n                    <div class=\"tab ${index === 0 ? 'active' : ''}\" data-tab-index=\"${index}\">\n                        ${iconHtml}\n                        <span class=\"tab-title\">${tab.title}</span>\n                        <span class=\"tab-subtitle\" data-tab-subtitle=\"${index}\">Last updated: never</span>\n                    </div>\n                `;\n            }).join('');\n\n            tabBarHTML = `<div class=\"tab-bar\">${tabTitles}</div>`;\n\n            const tabContents = options.tabs.map((tab, index) => {\n                return `<div class=\"tab-content ${index === 0 ? 'active' : ''}\" data-tab-content=\"${index}\">${tab.content}</div>`;\n            }).join('');\n            contentHTML = `<div class=\"window-content\">${tabContents}</div>`;\n\n        } else {\n            // No tabs, so render a window title if provided\n            if (options.title) {\n                windowTitleHTML = `<div class=\"window-title\">${options.title}</div>`;\n            }\n            contentHTML = `<div class=\"window-content\">${options.content}</div>`;\n        }\n\n        const headerHTML = `\n            <div class=\"window-header\">\n                <i class=\"bx ${iconClass}\"></i>\n                ${tabBarHTML}\n                ${windowTitleHTML}\n                <i class=\"bx bx-x window-close\"></i>\n            </div>\n        `;\n\n        windowEl.innerHTML = headerHTML + contentHTML;\n        container.appendChild(windowEl);\n\n        const closeBtn = windowEl.querySelector('.window-close');\n        if (closeBtn) {\n            closeBtn.addEventListener('click', (e) => {\n                e.stopPropagation();\n                close();\n            });\n        }\n\n        // This logic remains the same, as it operates on the rendered elements\n        if (options.tabs && options.tabs.length > 0) {\n            const tabs = windowEl.querySelectorAll('.tab');\n            tabs.forEach(tab => {\n                tab.addEventListener('click', () => {\n                    const tabIndex = tab.getAttribute('data-tab-index');\n\n                    windowEl.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));\n                    tab.classList.add('active');\n\n                    windowEl.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));\n                    windowEl.querySelector(`.tab-content[data-tab-content=\"${tabIndex}\"]`).classList.add('active');\n                });\n            });\n        }\n\n        setTimeout(() => {\n            windowEl.classList.add('open');\n            // Call onOpen callback after window is opened\n            if (openCallback) {\n                openCallback();\n            }\n        }, 10);\n    }\n\n    function close(immediate = false) {\n        if (!windowEl) return;\n\n        if (immediate) {\n            windowEl.classList.add('switching');\n            windowEl.classList.remove('open');\n            setTimeout(() => {\n                if (windowEl && windowEl.parentNode) {\n                    windowEl.parentNode.removeChild(windowEl);\n                }\n                windowEl = null;\n            }, 200);\n        } else {\n            windowEl.classList.remove('open');\n            if (closeCallback) {\n                closeCallback();\n            }\n            setTimeout(() => {\n                if (windowEl && windowEl.parentNode) {\n                    windowEl.parentNode.removeChild(windowEl);\n                }\n                windowEl = null;\n            }, 400);\n        }\n    }\n\n    function setContent(content) {\n        if (windowEl) {\n            const contentDiv = windowEl.querySelector('.window-content');\n            if (contentDiv) {\n                // This is more complex with tabs, for now, we just replace the whole content\n                contentDiv.innerHTML = content;\n            }\n        }\n    }\n    \n    function isOpen() {\n        return windowEl && windowEl.classList.contains('open');\n    }\n\n    return {\n        open,\n        close,\n        setContent,\n        isOpen,\n        id: options.id,\n    };\n}\n", "// auth.js - Simple email-based authentication\n\nconst AUTH_KEY = 'easter_user_email';\n\n/**\n * Check if user is logged in\n * @returns {boolean}\n */\nexport function isLoggedIn() {\n    return localStorage.getItem(AUTH_KEY) !== null;\n}\n\n/**\n * Get the logged in user's email\n * @returns {string|null}\n */\nexport function getUserEmail() {\n    return localStorage.getItem(AUTH_KEY);\n}\n\n/**\n * Login with email\n * @param {string} email\n */\nexport function login(email) {\n    if (!email || !email.includes('@')) {\n        throw new Error('Invalid email address');\n    }\n\n    // Restrict to @easter.company emails only\n    if (!email.trim().toLowerCase().endsWith('@easter.company')) {\n        throw new Error('Access denied. Please check your credentials.');\n    }\n\n    localStorage.setItem(AUTH_KEY, email.trim());\n}\n\n/**\n * Logout user\n */\nexport function logout() {\n    localStorage.removeItem(AUTH_KEY);\n}\n", "// theme.js - Theme management system\n\nconst THEME_KEY = 'easter_theme';\n\nexport const THEMES = {\n    AUTO: 'auto',\n    DEFAULT: 'default',\n    ANIMATED: 'animated'\n};\n\n/**\n * Get the current theme preference\n * @returns {string}\n */\nexport function getCurrentTheme() {\n    return localStorage.getItem(THEME_KEY) || THEMES.AUTO;\n}\n\n/**\n * Determine which theme to apply based on Auto rules\n * @returns {string} Either THEMES.DEFAULT or THEMES.ANIMATED\n */\nfunction resolveAutoTheme() {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const isFullscreen = window.innerHeight === window.screen.height && window.innerWidth === window.screen.width;\n\n    // Use Legacy if window is above 1920x1080\n    if (width > 1920 && height > 1080) {\n        return THEMES.ANIMATED;\n    }\n\n    // Use Default if equal to 1920x1080 AND fullscreen, OR below 1920x1080\n    if ((width === 1920 && height === 1080 && isFullscreen) || width <= 1920 || height <= 1080) {\n        return THEMES.DEFAULT;\n    }\n\n    return THEMES.DEFAULT;\n}\n\n/**\n * Set the theme\n * @param {string} theme\n */\nexport function setTheme(theme) {\n    if (!Object.values(THEMES).includes(theme)) {\n        throw new Error('Invalid theme');\n    }\n    localStorage.setItem(THEME_KEY, theme);\n    applyTheme(theme);\n}\n\n/**\n * Apply the theme to the document\n * @param {string} theme - The theme preference (can be AUTO, DEFAULT, or ANIMATED)\n * @param {boolean} skipTransition - Whether to skip the transition animation\n */\nexport function applyTheme(theme, skipTransition = false) {\n    const body = document.body;\n\n    // Resolve AUTO theme to actual theme\n    const resolvedTheme = theme === THEMES.AUTO ? resolveAutoTheme() : theme;\n\n    if (!skipTransition) {\n        // Add transition class for fade effect\n        body.classList.add('theme-transitioning');\n\n        // Remove transition class after animation\n        setTimeout(() => {\n            body.classList.remove('theme-transitioning');\n        }, 300);\n    }\n\n    // Remove all theme classes\n    Object.values(THEMES).forEach(t => {\n        body.classList.remove(`theme-${t}`);\n    });\n\n    // Add current theme class\n    body.classList.add(`theme-${theme}`);\n\n    // Handle background element with smooth transition\n    if (resolvedTheme === THEMES.ANIMATED) {\n        // Create background element if it doesn't exist\n        if (!document.querySelector('.background')) {\n            const bg = document.createElement('div');\n            bg.className = 'background';\n            document.body.prepend(bg);\n        }\n    } else {\n        // Remove background element with fade out\n        const bg = document.querySelector('.background');\n        if (bg) {\n            if (skipTransition) {\n                bg.remove();\n            } else {\n                bg.style.animation = 'fadeOutBackground 0.4s ease forwards';\n                setTimeout(() => {\n                    bg.remove();\n                }, 400);\n            }\n        }\n    }\n}\n\n/**\n * Initialize theme on page load\n */\nexport function initTheme() {\n    const currentTheme = getCurrentTheme();\n    applyTheme(currentTheme, true); // Skip transition on initial load\n\n    // Add resize listener for auto theme\n    if (currentTheme === THEMES.AUTO) {\n        let resizeTimeout;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimeout);\n            resizeTimeout = setTimeout(() => {\n                applyTheme(THEMES.AUTO);\n            }, 300); // Debounce resize events\n        });\n    }\n}\n", "// Easter Company - Logs\n\n// Standardized error/placeholder message component\nfunction createPlaceholderMessage(type, message, actionText = null) {\n    const iconMap = {\n        'config': 'bx-cog',\n        'error': 'bx-error-circle',\n        'empty': 'bx-info-circle',\n        'offline': 'bx-wifi-off'\n    };\n\n    const icon = iconMap[type] || 'bx-info-circle';\n    const actionHtml = actionText ? `<p class=\"placeholder-action\">${actionText}</p>` : '';\n\n    return `\n        <div class=\"tab-placeholder\">\n            <i class='bx ${icon} placeholder-icon'></i>\n            <p class=\"placeholder-message\">${message}</p>\n            ${actionHtml}\n        </div>\n    `;\n}\n\nexport function getLogsContent() {\n    return `\n        <div id=\"logs-container\" class=\"logs-container\">\n            <p>Loading logs...</p>\n        </div>\n    `;\n}\n\nexport async function updateLogs() {\n    const logsContainer = document.getElementById('logs-container');\n    if (!logsContainer) return;\n\n    const serviceMapString = localStorage.getItem('service_map');\n    if (!serviceMapString) {\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'config',\n            'No service map configured.',\n            'Please upload your service-map.json in Settings to enable log monitoring.'\n        );\n        return;\n    }\n\n    let serviceMapData;\n    try {\n        serviceMapData = JSON.parse(serviceMapString);\n    } catch (e) {\n        console.error(\"Error parsing service_map from localStorage:\", e);\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'error',\n            'Invalid service map data.',\n            'Please re-upload a valid service-map.json file in Settings.'\n        );\n        return;\n    }\n\n    // Find the event service\n    let eventService = null;\n    if (serviceMapData && typeof serviceMapData.services === 'object') {\n        const serviceGroups = ['cs', 'be', 'th'];\n        for (const group of serviceGroups) {\n            if (Array.isArray(serviceMapData.services[group])) {\n                const found = serviceMapData.services[group].find(s => s.short_name === 'event' || s.id === 'event' || s.id === 'dex-event-service');\n                if (found) {\n                    eventService = found;\n                    break;\n                }\n            }\n        }\n    }\n\n    if (!eventService) {\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'error',\n            'Event service not found in service map.',\n            'Please ensure dex-event-service is configured in your service-map.json.'\n        );\n        return;\n    }\n\n    const domain = eventService.domain === '0.0.0.0' ? 'localhost' : eventService.domain;\n    const logsUrl = `http://${domain}:${eventService.port}/logs`;\n\n    try {\n        const response = await fetch(logsUrl);\n        if (!response.ok) {\n            logsContainer.innerHTML = createPlaceholderMessage(\n                'offline',\n                'Event service is offline.',\n                'Please ensure the event service is running.'\n            );\n            return;\n        }\n\n        const logsData = await response.json();\n        if (!logsData || logsData.length === 0) {\n            logsContainer.innerHTML = createPlaceholderMessage(\n                'empty',\n                'No logs found.',\n                'Service logs will appear here when available.'\n            );\n            return;\n        }\n\n        const hiddenServiceIDs = [\"local-ollama-0\", \"local-cache-0\", \"cloud-cache-0\", \"cloud-cache-1\"];\n\n        const filteredLogsData = logsData.filter(logReport => !hiddenServiceIDs.includes(logReport.id));\n\n        // Reverse the order of log reports so newest appear at the top\n        filteredLogsData.forEach(logReport => {\n            logReport.logs.reverse();\n        });\n        filteredLogsData.reverse();\n\n        const logsHtml = filteredLogsData.map(logReport => {\n            const logs = logReport.logs.join('\\n');\n            return `\n                <div class=\"log-report\">\n                    <div class=\"log-report-header\">\n                        <h3>${logReport.id}</h3>\n                        <button class=\"copy-logs-btn\" data-logs=\"${escape(logs)}\">\n                            <i class=\"bx bx-copy\"></i>\n                        </button>\n                    </div>\n                    <pre class=\"log-content\">${logs}</pre>\n                </div>\n            `;\n        }).join('');\n\n        logsContainer.innerHTML = logsHtml;\n\n        // Add event listeners for copy buttons\n        document.querySelectorAll('.copy-logs-btn').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const logs = unescape(btn.dataset.logs);\n                navigator.clipboard.writeText(logs).then(() => {\n                    const icon = btn.querySelector('i');\n                    icon.classList.remove('bx-copy');\n                    icon.classList.add('bx-check');\n                    setTimeout(() => {\n                        icon.classList.remove('bx-check');\n                        icon.classList.add('bx-copy');\n                    }, 2000);\n                });\n            });\n        });\n\n    } catch (error) {\n        console.error('Error fetching logs:', error);\n        logsContainer.innerHTML = createPlaceholderMessage(\n            'offline',\n            'Failed to load logs.',\n            'The event service may be offline or unreachable.'\n        );\n    }\n}\n", "// Easter Company - Universal JS Entrypoint\nimport { applyBaseStyles, injectNavbar, injectFooter } from './styler.js';\nimport { createWindow } from './Window.js';\nimport { isLoggedIn, login, getUserEmail } from './auth.js';\nimport { initTheme, setTheme, getCurrentTheme, THEMES } from './theme.js';\nimport { getLogsContent, updateLogs } from './logs.js';\n\nfunction onReady() {\n    console.log(\"Welcome to Easter Company.\");\n\n    // Initialize theme first\n    initTheme();\n\n    applyBaseStyles();\n\n    const loggedIn = isLoggedIn();\n    injectNavbar(loggedIn);\n    injectFooter();\n\n    // --- Window Management ---\n    const footer = document.querySelector('footer');\n    let openWindow = null;\n\n    // Callback to handle footer visibility when window closes\n    function onWindowClose() {\n        openWindow = null;\n        footer?.classList.remove('hide');\n\n        // Reset all navbar icon states\n        const allIcons = document.querySelectorAll('.nav-right i');\n        allIcons.forEach(icon => {\n            icon.classList.remove('active', 'inactive');\n        });\n    }\n\n    // Login window\n    const loginWindow = createWindow({\n        id: 'login-window',\n        title: 'Welcome',\n        content: `\n            <div class=\"login-split-container\">\n                <div class=\"login-top-section\">\n                    <div class=\"login-form\">\n                        <p>Enter your email to continue</p>\n                        <form id=\"login-form\">\n                            <input\n                                type=\"email\"\n                                id=\"email-input\"\n                                placeholder=\"you@easter.company\"\n                                required\n                                autocomplete=\"email\"\n                            />\n                            <button type=\"submit\">Continue</button>\n                            <div id=\"login-error\" class=\"error\" style=\"display: none;\"></div>\n                        </form>\n                    </div>\n                </div>\n                <div class=\"login-bottom-section\">\n                    <div class=\"login-disclaimer\">\n                        <h2>Early Access</h2>\n                        <p>We're not ready to take on new users yet.</p>\n                        <p>Want early access? Contribute to our open source projects on the <a href=\"https://github.com/eastercompany\" target=\"_blank\" rel=\"noopener noreferrer\">Easter Company GitHub</a> community to unlock early access privileges.</p>\n                    </div>\n                </div>\n            </div>\n        `,\n        icon: 'bx-log-in',\n        onClose: onWindowClose\n    });\n\n    // Standardized error/placeholder message component\n    function createPlaceholderMessage(type, message, actionText = null) {\n        const iconMap = {\n            'config': 'bx-cog',\n            'error': 'bx-error-circle',\n            'empty': 'bx-info-circle',\n            'offline': 'bx-wifi-off'\n        };\n\n        const icon = iconMap[type] || 'bx-info-circle';\n        const actionHtml = actionText ? `<p class=\"placeholder-action\">${actionText}</p>` : '';\n\n        return `\n            <div class=\"tab-placeholder\">\n                <i class='bx ${icon} placeholder-icon'></i>\n                <p class=\"placeholder-message\">${message}</p>\n                ${actionHtml}\n            </div>\n        `;\n    }\n\n    // System Monitor Functions\n    let lastSystemMonitorUpdate = null;\n\n    function getSystemMonitorContent() {\n        const serviceMapString = localStorage.getItem('service_map');\n\n        if (!serviceMapString) {\n            return createPlaceholderMessage(\n                'config',\n                'No service map configured.',\n                'Please upload your service-map.json in Settings to enable live monitoring.'\n            );\n        }\n\n        return `\n            <div id=\"system-monitor-widgets\" class=\"system-monitor-widgets\">\n                <p>Loading services...</p>\n            </div>\n        `;\n    }\n\n    async function updateSystemMonitor() {\n        const widgetsContainer = document.getElementById('system-monitor-widgets');\n        if (!widgetsContainer) return;\n\n        const serviceMapString = localStorage.getItem('service_map');\n        if (!serviceMapString) {\n            widgetsContainer.innerHTML = createPlaceholderMessage(\n                'config',\n                'No service map configured.',\n                'Please upload your service-map.json in Settings to enable live monitoring.'\n            );\n            return;\n        }\n\n        let serviceMapData;\n        try {\n            serviceMapData = JSON.parse(serviceMapString);\n        } catch (e) {\n            console.error(\"Error parsing service_map from localStorage:\", e);\n            widgetsContainer.innerHTML = createPlaceholderMessage(\n                'error',\n                'Invalid service map data.',\n                'Please re-upload a valid service-map.json file in Settings.'\n            );\n            return;\n        }\n\n        // Find the event service to get its URL\n        let eventService = null;\n        if (serviceMapData && typeof serviceMapData.services === 'object') {\n            const serviceGroups = ['cs', 'be', 'th']; // Assuming event service is in one of these\n            for (const group of serviceGroups) {\n                if (Array.isArray(serviceMapData.services[group])) {\n                    const found = serviceMapData.services[group].find(s => s.id === 'dex-event-service');\n                    if (found) {\n                        eventService = found;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (!eventService) {\n            widgetsContainer.innerHTML = createPlaceholderMessage(\n                'error',\n                'Event service not found in service map.',\n                'Please ensure dex-event-service is configured in your service-map.json.'\n            );\n            return;\n        }\n\n        const domain = eventService.domain === '0.0.0.0' ? 'localhost' : eventService.domain;\n        const systemMonitorUrl = `http://${domain}:${eventService.port}/system_monitor_metrics`;\n\n        let results = [];\n        try {\n            const response = await fetch(systemMonitorUrl);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            results = await response.json();\n        } catch (error) {\n            console.error('Error fetching system monitor metrics:', error);\n            widgetsContainer.innerHTML = createPlaceholderMessage(\n                'offline',\n                'Failed to load system metrics.',\n                'The event service may be offline or unreachable.'\n            );\n            return;\n        }\n\n        // Update timestamp after all services have been checked\n        lastSystemMonitorUpdate = Date.now();\n        updateTabTimestamp(3, lastSystemMonitorUpdate); // System Monitor is tab index 3\n\n        // Helper function to sanitize values - replace N/A, unknown, empty with dash\n        function sanitizeValue(value) {\n            if (!value || value === 'N/A' || value === 'unknown' || value.trim() === '') {\n                return '-';\n            }\n            return value;\n        }\n\n        // Helper function to extract major.minor.patch from any version string\n        function extractMajorMinorPatch(versionStr) {\n            if (!versionStr || versionStr === 'N/A' || versionStr === 'unknown' || versionStr.trim() === '') {\n                return '-';\n            }\n\n            // Match the first three numeric segments separated by dots\n            // This handles formats like:\n            // - \"2.7.1.main.adf\" -> \"2.7.1\"\n            // - \"0.8.0\" -> \"0.8.0\"\n            // - \"7.2.4-alpine\" -> \"7.2.4\"\n            // - \"1.0.0-rc1\" -> \"1.0.0\"\n            const match = versionStr.match(/^(\\d+)\\.(\\d+)\\.(\\d+)/);\n            if (match) {\n                return `${match[1]}.${match[2]}.${match[3]}`;\n            }\n\n            // If we can't extract major.minor.patch, try major.minor\n            const shortMatch = versionStr.match(/^(\\d+)\\.(\\d+)/);\n            if (shortMatch) {\n                return `${shortMatch[1]}.${shortMatch[2]}.0`;\n            }\n\n            // If we can't extract anything, return the original or dash\n            return versionStr.split('.').slice(0, 3).join('.') || '-';\n        }\n\n        // Helper function to truncate address to max 28 characters\n        function truncateAddress(address) {\n            if (!address || address === '-') {\n                return address;\n            }\n            if (address.length > 28) {\n                return address.substring(0, 28) + '...';\n            }\n            return address;\n        }\n\n        // Helper function to get color based on percentage value\n        function getStatColor(value) {\n            if (!value || value === '-' || value === 'N/A') {\n                return '#666'; // Gray for no data\n            }\n\n            // Extract percentage value\n            const percentMatch = value.match(/([\\d.]+)%/);\n            if (!percentMatch) {\n                return '#666'; // Gray if not a percentage\n            }\n\n            const percent = parseFloat(percentMatch[1]);\n\n            // Color coding based on usage levels\n            if (percent < 30) {\n                return '#00ff00'; // Green - low usage\n            } else if (percent < 60) {\n                return '#88ff00'; // Yellow-green - moderate\n            } else if (percent < 80) {\n                return '#ffaa00'; // Orange - high\n            } else {\n                return '#ff0000'; // Red - critical\n            }\n        }\n\n        // Helper function to format uptime (moved from global for local access)\n        function formatUptime(uptimeStr) {\n            if (!uptimeStr || uptimeStr === 'N/A' || uptimeStr === 'unknown') return '-';\n\n            // Parse the Go duration string (e.g., \"14m28.364693775s\" or \"1d4h\")\n            const match = uptimeStr.match(/(?:(\\d+)d)?(?:(\\d+)h)?(?:(\\d+)m)?(?:([\\d.]+)s)?/);\n            if (!match) return '-';\n\n            const days = parseInt(match[1]) || 0;\n            const hours = parseInt(match[2]) || 0;\n            const minutes = parseInt(match[3]) || 0;\n            const seconds = parseFloat(match[4]) || 0;\n\n            // Calculate total time in different units\n            const totalSeconds = (days * 86400) + (hours * 3600) + (minutes * 60) + seconds;\n            const totalMinutes = Math.floor(totalSeconds / 60);\n            const totalHours = Math.floor(totalSeconds / 3600);\n            const totalDays = Math.floor(totalSeconds / 86400);\n            const totalMonths = Math.floor(totalDays / 30);\n            const totalYears = Math.floor(totalDays / 365);\n\n            // Format based on magnitude\n            if (totalYears >= 1) {\n                return totalYears === 1 ? '1 year' : `${totalYears} years`;\n            } else if (totalMonths >= 1) {\n                return totalMonths === 1 ? '1 month' : `${totalMonths} months`;\n            } else if (totalDays >= 1) {\n                return totalDays === 1 ? '1 day' : `${totalDays} days`;\n            } else if (totalHours >= 1) {\n                return totalHours === 1 ? '1 hour' : `${totalHours} hours`;\n            } else if (totalMinutes >= 1) {\n                return totalMinutes === 1 ? '1 minute' : `${totalMinutes} minutes`;\n            } else {\n                return Math.floor(totalSeconds) === 1 ? '1 second' : `${Math.floor(totalSeconds)} seconds`;\n            }\n        }\n\n        // Helper function to generate widget HTML\n        function generateWidgetHtml(service) {\n            const isOnline = service.status === 'online';\n            const statusClass = isOnline ? 'service-widget-online' : 'service-widget-offline';\n            const statusIcon = isOnline ? 'bx-check-circle' : 'bx-x-circle';\n            const statusText = isOnline ? 'OK' : 'BAD';\n\n            let detailsHtml = '';\n            let footerHtml = '';\n\n            if (isOnline) {\n                // Determine version display - always extract major.minor.patch\n                let versionDisplay = '-';\n\n                if (service.version && service.version.str && service.version.str.trim() !== '') {\n                    // Parse the version string to extract major.minor.patch\n                    versionDisplay = extractMajorMinorPatch(service.version.str);\n                } else if (service.version && service.version.obj) {\n                    const versionObj = service.version.obj;\n                    // Build version from parts if they exist\n                    if (versionObj.major || versionObj.minor || versionObj.patch) {\n                        const major = sanitizeValue(versionObj.major);\n                        const minor = sanitizeValue(versionObj.minor);\n                        const patch = sanitizeValue(versionObj.patch);\n\n                        if (major !== '-' || minor !== '-' || patch !== '-') {\n                            versionDisplay = `${major !== '-' ? major : '0'}.${minor !== '-' ? minor : '0'}.${patch !== '-' ? patch : '0'}`;\n                        }\n                    }\n                }\n\n                detailsHtml = `\n                    <div class=\"service-widget-info\">\n                        <span class=\"info-label\">Version:</span>\n                        <span class=\"info-value\">\n                            <span class=\"metric-version-monospace\" style=\"font-size: 1.2em; font-weight: bold; color: white;\">${versionDisplay}</span>\n                        </span>\n                    </div>\n                `;\n\n                const cpuValue = sanitizeValue(service.cpu);\n                const memoryValue = sanitizeValue(service.memory);\n                const cpuColor = getStatColor(cpuValue);\n                const memoryColor = getStatColor(memoryValue);\n\n                footerHtml = `\n                    <div class=\"service-widget-footer\">\n                        <div class=\"service-widget-item\">\n                            <i class=\"bx bx-time-five\" style=\"color: #00bfff;\"></i>\n                            <span>${formatUptime(service.uptime)}</span>\n                        </div>\n                        <div class=\"service-widget-item\">\n                            <i class=\"bx bxs-microchip\" style=\"color: ${cpuColor};\"></i>\n                            <span style=\"color: ${cpuColor};\">${cpuValue}</span>\n                        </div>\n                        <div class=\"service-widget-item\">\n                            <i class=\"bx bxs-chip\" style=\"color: ${memoryColor};\"></i>\n                            <span style=\"color: ${memoryColor};\">${memoryValue}</span>\n                        </div>\n                    </div>\n                `;\n            } else {\n                detailsHtml = ``; // No details for offline services\n                footerHtml = `\n                    <div class=\"service-widget-footer offline\">\n                        <span>OFFLINE</span>\n                    </div>\n                `;\n            }\n\n            const displayName = service.short_name || service.id;\n            const rawAddress = service.domain && service.port ? `${service.domain}:${service.port}` : service.domain || service.port || '';\n            const address = truncateAddress(sanitizeValue(rawAddress));\n\n            return `\n                <div class=\"service-widget ${statusClass}\" data-service-id=\"${service.id}\">\n                    <div class=\"service-widget-header\">\n                        <i class=\"bx ${statusIcon}\"></i>\n                        <h3>${displayName}</h3>\n                        <span class=\"service-widget-status\">${statusText}</span>\n                    </div>\n                    <div class=\"service-widget-body\">\n                        <div class=\"service-widget-info\">\n                            <span class=\"info-label\">Address:</span>\n                            <span class=\"info-value\">${address}</span>\n                        </div>\n                        ${detailsHtml}\n                    </div>\n                    ${footerHtml}\n                </div>\n            `;\n        }\n\n        // Update widgets in place or create new ones\n        const existingWidgets = widgetsContainer.querySelectorAll('.service-widget');\n        const existingWidgetsMap = new Map();\n\n        // Remove any non-widget elements (like loading messages)\n        Array.from(widgetsContainer.children).forEach(child => {\n            if (!child.classList.contains('service-widget')) {\n                child.remove();\n            }\n        });\n\n        // Build map of existing widgets by service ID\n        existingWidgets.forEach(widget => {\n            const serviceId = widget.getAttribute('data-service-id');\n            if (serviceId) {\n                existingWidgetsMap.set(serviceId, widget);\n            }\n        });\n\n        // Update or create widgets based on new data\n        results.forEach((service, index) => {\n            const existingWidget = existingWidgetsMap.get(service.id);\n\n            if (existingWidget) {\n                // Update existing widget in place\n                const tempDiv = document.createElement('div');\n                tempDiv.innerHTML = generateWidgetHtml(service);\n                const newWidget = tempDiv.firstElementChild;\n\n                // Replace content while maintaining DOM position\n                existingWidget.className = newWidget.className;\n                existingWidget.innerHTML = newWidget.innerHTML;\n\n                // Mark as processed\n                existingWidgetsMap.delete(service.id);\n            } else {\n                // Create new widget\n                const tempDiv = document.createElement('div');\n                tempDiv.innerHTML = generateWidgetHtml(service);\n                const newWidget = tempDiv.firstElementChild;\n\n                // Insert at the correct position\n                if (index < widgetsContainer.children.length) {\n                    widgetsContainer.insertBefore(newWidget, widgetsContainer.children[index]);\n                } else {\n                    widgetsContainer.appendChild(newWidget);\n                }\n            }\n        });\n\n        // Remove widgets that no longer exist in the data\n        existingWidgetsMap.forEach(widget => {\n            widget.remove();\n        });\n    }\n\n    // Authenticated windows\n    const userWindow = createWindow({\n        id: 'user-window',\n        title: 'User Profile',\n        content: `<p>Logged in as: ${getUserEmail() || 'Unknown'}</p>`,\n        icon: 'bx-user',\n        onClose: onWindowClose\n    });\n\n    // Events Timeline Functions\n    let lastEventsUpdate = null;\n    let lastLogsUpdate = null;\n\n    function getEventsContent() {\n        return `\n            <div id=\"events-timeline\" class=\"events-timeline\">\n                <p>Loading events...</p>\n            </div>\n        `;\n    }\n\n    function updateTabTimestamp(tabIndex, timestamp) {\n        const subtitleElement = document.querySelector(`[data-tab-subtitle=\"${tabIndex}\"]`);\n        if (!subtitleElement || !timestamp) return;\n\n        const now = Date.now();\n        const diff = now - timestamp;\n        const ms = diff;\n        const seconds = diff / 1000;\n        const minutes = Math.floor(seconds / 60);\n        const hours = Math.floor(minutes / 60);\n\n        let timeStr;\n        if (seconds < 10) {\n            // Show seconds 0-9 with 2 decimal places (format: 0.00s)\n            const paddedSeconds = seconds.toFixed(2);\n            timeStr = `${paddedSeconds}s ago`;\n        } else if (seconds < 100) {\n            // Show seconds 10-99 with 2 decimal places (format: XX.XXs)\n            const paddedSeconds = seconds.toFixed(2);\n            timeStr = `${paddedSeconds}s ago`;\n        } else if (minutes < 60) {\n            timeStr = minutes === 1 ? '1 minute ago' : `${minutes} minutes ago`;\n        } else {\n            timeStr = hours === 1 ? '1 hour ago' : `${hours} hours ago`;\n        }\n\n        subtitleElement.textContent = `Last updated: ${timeStr}`;\n    }\n\n    async function updateEventsTimeline() {\n        const eventsContainer = document.getElementById('events-timeline');\n        if (!eventsContainer) return;\n\n        const serviceMapString = localStorage.getItem('service_map');\n        if (!serviceMapString) {\n            eventsContainer.innerHTML = createPlaceholderMessage(\n                'config',\n                'No service map configured.',\n                'Please upload your service-map.json in Settings to enable event monitoring.'\n            );\n            return;\n        }\n\n        let serviceMapData;\n        try {\n            serviceMapData = JSON.parse(serviceMapString);\n        } catch (e) {\n            console.error(\"Error parsing service_map from localStorage:\", e);\n            eventsContainer.innerHTML = createPlaceholderMessage(\n                'error',\n                'Invalid service map data.',\n                'Please re-upload a valid service-map.json file in Settings.'\n            );\n            return;\n        }\n\n        // Find the event service\n        let eventService = null;\n        if (serviceMapData && typeof serviceMapData.services === 'object') {\n            const serviceGroups = ['cs', 'be', 'th'];\n            for (const group of serviceGroups) {\n                if (Array.isArray(serviceMapData.services[group])) {\n                    const found = serviceMapData.services[group].find(s => s.short_name === 'event' || s.id === 'event' || s.id === 'dex-event-service');\n                    if (found) {\n                        eventService = found;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (!eventService) {\n            eventsContainer.innerHTML = createPlaceholderMessage(\n                'error',\n                'Event service not found in service map.',\n                'Please ensure dex-event-service is configured in your service-map.json.'\n            );\n            return;\n        }\n\n        const domain = eventService.domain === '0.0.0.0' ? 'localhost' : eventService.domain;\n        const eventsUrl = `http://${domain}:${eventService.port}/events?ml=50&format=text`;\n\n        try {\n            const response = await fetch(eventsUrl);\n            if (!response.ok) {\n                eventsContainer.innerHTML = createPlaceholderMessage(\n                    'offline',\n                    'Event service is offline.',\n                    'Please ensure the event service is running.'\n                );\n                return;\n            }\n\n            const textData = await response.text();\n            if (!textData || textData.trim() === '') {\n                eventsContainer.innerHTML = createPlaceholderMessage(\n                    'empty',\n                    'No events found.',\n                    'Events will appear here as they occur.'\n                );\n                return;\n            }\n\n            // Parse the text format: \"2025-11-28 23:15:24 UTC | dex-discord-service | Dexter changed status to joined Admin voice channel\"\n            const lines = textData.trim().split('\\n');\n            const eventsHtml = lines.map(line => {\n                const parts = line.split(' | ');\n                if (parts.length < 3) return '';\n\n                const timestampStr = parts[0].trim(); // \"2025-11-28 23:15:24 UTC\"\n                const service = parts[1].trim();\n                const message = parts[2].trim();\n\n                // Parse the UTC timestamp and convert to local time\n                const utcDate = new Date(timestampStr.replace(' UTC', '') + ' UTC');\n                const timeStr = utcDate.toLocaleTimeString(navigator.language, {\n                    hour: '2-digit',\n                    minute: '2-digit',\n                    second: '2-digit'\n                });\n                const dateStr = utcDate.toLocaleDateString(navigator.language, {\n                    month: 'short',\n                    day: 'numeric',\n                    year: 'numeric'\n                });\n\n                return `\n                    <div class=\"event-item\">\n                        <div class=\"event-time\">\n                            <span class=\"event-time-main\">${timeStr}</span>\n                            <span class=\"event-date\">${dateStr}</span>\n                        </div>\n                        <div class=\"event-content\">\n                            <div class=\"event-service\">${service}</div>\n                            <div class=\"event-message\">${message}</div>\n                        </div>\n                    </div>\n                `;\n            }).join('');\n\n            eventsContainer.innerHTML = eventsHtml;\n            lastEventsUpdate = Date.now();\n            updateTabTimestamp(2, lastEventsUpdate); // Events is tab index 2\n        } catch (error) {\n            console.error('Error fetching events:', error);\n            eventsContainer.innerHTML = createPlaceholderMessage(\n                'offline',\n                'Failed to load events.',\n                'The event service may be offline or unreachable.'\n            );\n        }\n    }\n\n    // Function to initialize message window intervals and updates\n    async function initializeMessageWindow() {\n        const serviceMapString = localStorage.getItem('service_map');\n        if (serviceMapString) {\n            await updateSystemMonitor();\n            await updateEventsTimeline();\n            await updateLogs();\n            lastLogsUpdate = Date.now();\n\n            // Update tab timestamps every 100ms for smooth millisecond counting\n            const timestampInterval = setInterval(() => {\n                if (messageWindow.isOpen()) {\n                    updateTabTimestamp(1, lastLogsUpdate); // Logs tab\n                    updateTabTimestamp(2, lastEventsUpdate); // Events tab\n                    updateTabTimestamp(3, lastSystemMonitorUpdate); // System Monitor tab\n                } else {\n                    clearInterval(timestampInterval);\n                }\n            }, 100);\n\n            // Set up auto-refresh for Events and Logs every 5 seconds\n            const refreshInterval = setInterval(async () => {\n                if (messageWindow.isOpen()) {\n                    await updateEventsTimeline();\n                    await updateLogs();\n                    lastLogsUpdate = Date.now();\n                } else {\n                    clearInterval(refreshInterval);\n                }\n            }, 5000);\n\n            // Set up auto-refresh for System Monitor every 30 seconds\n            const systemMonitorRefreshInterval = setInterval(async () => {\n                if (messageWindow.isOpen()) {\n                    await updateSystemMonitor();\n                } else {\n                    clearInterval(systemMonitorRefreshInterval);\n                }\n            }, 30000);\n        }\n    }\n\n    const messageWindow = createWindow({\n        id: 'message-window',\n        tabs: [\n            {\n                icon: 'bx-bell',\n                title: 'Notifications',\n                content: createPlaceholderMessage(\n                    'empty',\n                    'No notifications yet.',\n                    'Notifications will appear here when available.'\n                )\n            },\n            { icon: 'bx-history', title: 'Logs', content: getLogsContent() },\n            { icon: 'bx-calendar-event', title: 'Events', content: getEventsContent() },\n            { icon: 'bx-line-chart', title: 'System Monitor', content: getSystemMonitorContent() }\n        ],\n        icon: 'bxs-message-dots',\n        onClose: onWindowClose,\n        onOpen: () => {\n            // Initialize message window updates whenever it opens\n            setTimeout(initializeMessageWindow, 100);\n        }\n    });\n\n    // Analytics and Debug mode state\n    const ANALYTICS_KEY = 'easter_analytics_enabled';\n    const DEBUG_KEY = 'easter_debug_mode';\n\n    function isAnalyticsEnabled() {\n        const stored = localStorage.getItem(ANALYTICS_KEY);\n        return stored === null ? true : stored === 'true'; // Default to true\n    }\n\n    function isDebugEnabled() {\n        return isAnalyticsEnabled(); // Debug mode follows analytics setting\n    }\n\n    function setAnalytics(enabled) {\n        localStorage.setItem(ANALYTICS_KEY, enabled.toString());\n        window.EASTER_ANALYTICS_ENABLED = enabled;\n        window.EASTER_DEBUG_MODE = enabled;\n\n        if (enabled) {\n            console.log('[Easter Analytics] Analytics and debug mode enabled');\n        } else {\n            console.log('[Easter Analytics] Analytics and debug mode disabled');\n        }\n    }\n\n    // Initialize global state\n    window.EASTER_ANALYTICS_ENABLED = isAnalyticsEnabled();\n    window.EASTER_DEBUG_MODE = isDebugEnabled();\n\n    if (window.EASTER_DEBUG_MODE) {\n        console.log('[Easter Debug] Debug mode is active');\n        console.log('[Easter Debug] Analytics enabled:', window.EASTER_ANALYTICS_ENABLED);\n    }\n\n    // Function to check notification permission state\n    function getNotificationState() {\n        if (!('Notification' in window)) {\n            return { enabled: false, supported: false };\n        }\n        return {\n            enabled: Notification.permission === 'granted',\n            supported: true\n        };\n    }\n\n    async function getMicrophoneState() {\n        if (!navigator.permissions) {\n            // Permissions API not supported\n            return { enabled: false, supported: false };\n        }\n        try {\n            const permissionStatus = await navigator.permissions.query({ name: 'microphone' });\n            return {\n                enabled: permissionStatus.state === 'granted',\n                supported: true,\n                state: permissionStatus.state // 'granted', 'prompt', 'denied'\n            };\n        } catch (e) {\n            console.error(\"Error querying microphone permission:\", e);\n            return { enabled: false, supported: false };\n        }\n    }\n\n    async function updateMicrophoneToggleState() {\n        const microphoneToggle = document.getElementById('microphone-toggle');\n        if (!microphoneToggle) return;\n\n        const micState = await getMicrophoneState();\n\n        const description = document.querySelector('#microphone-setting-item .settings-item-description');\n\n        if (micState.supported) {\n            microphoneToggle.disabled = false;\n            microphoneToggle.checked = micState.enabled;\n            if (description) description.textContent = 'Allow access to your microphone';\n        } else {\n            microphoneToggle.disabled = true;\n            microphoneToggle.checked = false;\n            if (description) description.textContent = 'Not supported in this browser';\n        }\n    }\n\n    // Function to generate settings content\n        function getSettingsContent() {\n            const currentTheme = getCurrentTheme();\n            const userEmail = getUserEmail() || 'user@easter.company';\n            const notificationState = getNotificationState();\n            const analyticsEnabled = isAnalyticsEnabled();\n\n                        return `\n                        <div class=\"theme-selector\">                    <div class=\"theme-card ${currentTheme === THEMES.AUTO ? 'active' : ''}\" data-theme=\"${THEMES.AUTO}\">\n                        <div class=\"theme-preview theme-preview-auto\"></div>\n                                                                                    <div class=\"theme-info\">\n                                                                                        <h3>Auto</h3>\n                                                                                        <p>Automatic theme selection.</p>\n                                                                                        <span class=\"theme-badge\">${currentTheme === THEMES.AUTO ? 'Active' : 'Select'}</span>\n                                                                                    </div>                    </div>\n                    <div class=\"theme-card ${currentTheme === THEMES.DEFAULT ? 'active' : ''}\" data-theme=\"${THEMES.DEFAULT}\">\n                        <div class=\"theme-preview theme-preview-default\"></div>\n                                                                <div class=\"theme-info\">\n                                                                    <h3>Default</h3>\n                                                                    <p>Simple, black, default.</p>\n                                                                    <span class=\"theme-badge\">${currentTheme === THEMES.DEFAULT ? 'Active' : 'Select'}</span>\n                                                                </div>                    </div>\n                    <div class=\"theme-card ${currentTheme === THEMES.ANIMATED ? 'active' : ''}\" data-theme=\"${THEMES.ANIMATED}\">\n                        <div class=\"theme-preview theme-preview-animated\"></div>\n                                                                <div class=\"theme-info\">\n                                                                    <h3>Legacy</h3>\n                                                                    <p>Colourful, not bright.</p>\n                                                                    <span class=\"theme-badge\">${currentTheme === THEMES.ANIMATED ? 'Active' : 'Select'}</span>\n                                                                </div>                    </div>\n                </div>\n    \n                <div class=\"settings-divider\"></div>\n    \n                <div class=\"settings-section\">\n                    <h2 class=\"settings-section-title\">Configuration</h2>\n                    <div class=\"settings-list\">\n                        <div class=\"settings-item settings-item-input\">\n                            <div>\n                                <label class=\"settings-item-label\">Services</label>\n                                <span class=\"settings-item-description\">Upload your service-map.json to connect this client to your services.</span>\n                            </div>\n                            <div class=\"file-upload-container\">\n                                <button class=\"file-upload-btn\" id=\"service-map-upload-btn\">Choose File</button>\n                                <span class=\"file-upload-name\" id=\"service-map-file-name\">${localStorage.getItem('service_map') ? 'service-map.json' : 'No file selected'}</span>\n                                <input type=\"file\" class=\"file-upload-input\" id=\"service-map-input\" accept=\".json,application/json\" hidden>\n                                ${localStorage.getItem('service_map') ? '<button class=\"file-delete-btn\" id=\"service-map-delete-btn\" title=\"Delete service map\">\u00D7</button>' : ''}\n                            </div>\n                            <div class=\"file-upload-error\" id=\"service-map-error\" style=\"display: none;\"></div>\n                        </div>\n                        <div class=\"settings-item settings-item-input\">\n                            <div>\n                                <label class=\"settings-item-label\">Servers</label>\n                                <span class=\"settings-item-description\">Upload your server-map.json to connect this client to your servers.</span>\n                            </div>\n                            <div class=\"file-upload-container\">\n                                <button class=\"file-upload-btn\" id=\"server-map-upload-btn\">Choose File</button>\n                                <span class=\"file-upload-name\" id=\"server-map-file-name\">${localStorage.getItem('server_map') ? 'server-map.json' : 'No file selected'}</span>\n                                <input type=\"file\" class=\"file-upload-input\" id=\"server-map-input\" accept=\".json,application/json\" hidden>\n                                ${localStorage.getItem('server_map') ? '<button class=\"file-delete-btn\" id=\"server-map-delete-btn\" title=\"Delete server map\">\u00D7</button>' : ''}\n                            </div>\n                            <div class=\"file-upload-error\" id=\"server-map-error\" style=\"display: none;\"></div>\n                        </div>\n                        <div class=\"settings-item settings-item-input\">\n                            <div>\n                                <label class=\"settings-item-label\">User Settings</label>\n                                <span class=\"settings-item-description\">Upload your options.json to configure user preferences.</span>\n                            </div>\n                            <div class=\"file-upload-container\">\n                                <button class=\"file-upload-btn\" id=\"options-upload-btn\">Choose File</button>\n                                <span class=\"file-upload-name\" id=\"options-file-name\">${localStorage.getItem('user_options') ? 'options.json' : 'No file selected'}</span>\n                                <input type=\"file\" class=\"file-upload-input\" id=\"options-input\" accept=\".json,application/json\" hidden>\n                                ${localStorage.getItem('user_options') ? '<button class=\"file-delete-btn\" id=\"options-delete-btn\" title=\"Delete user settings\">\u00D7</button>' : ''}\n                            </div>\n                            <div class=\"file-upload-error\" id=\"options-error\" style=\"display: none;\"></div>\n                        </div>\n                    </div>\n                </div>\n    \n                <div class=\"settings-divider\"></div>\n    \n                <div class=\"settings-section\">\n                    <h2 class=\"settings-section-title\">Preferences</h2>\n                    <div class=\"settings-list\">\n                        <div class=\"settings-item\">\n                            <div class=\"settings-item-info\">\n                                <span class=\"settings-item-label\">Notifications</span>\n                                <span class=\"settings-item-description\">${notificationState.supported ? 'Receive desktop notifications' : 'Not supported in this browser'}</span>\n                            </div>\n                            <label class=\"toggle-switch\">\n                                <input type=\"checkbox\" id=\"notifications-toggle\" ${notificationState.enabled ? 'checked' : ''} ${!notificationState.supported ? 'disabled' : ''}>\n                                <span class=\"toggle-slider\"></span>\n                            </label>\n                        </div>\n                        <div class=\"settings-item\" id=\"microphone-setting-item\">\n                            <div class=\"settings-item-info\">\n                                <span class=\"settings-item-label\">Access Microphone</span>\n                                <span class=\"settings-item-description\">Allow access to your microphone</span>\n                            </div>\n                            <label class=\"toggle-switch\">\n                                <input type=\"checkbox\" id=\"microphone-toggle\" disabled>\n                                <span class=\"toggle-slider\"></span>\n                            </label>\n                        </div>\n                        <div class=\"settings-item\">\n                            <div class=\"settings-item-info\">\n                                <span class=\"settings-item-label\">Analytics</span>\n                                <span class=\"settings-item-description\">Help improve the platform (enables debug mode)</span>\n                            </div>\n                            <label class=\"toggle-switch\">\n                                <input type=\"checkbox\" id=\"analytics-toggle\" ${analyticsEnabled ? 'checked' : ''}>\n                                <span class=\"toggle-slider\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n            `;\n        }\n\n    // Function to attach theme selector event listeners\n    function attachThemeListeners() {\n        const themeCards = document.querySelectorAll('.theme-card');\n        themeCards.forEach(card => {\n            card.addEventListener('click', function handleThemeClick() {\n                const theme = this.getAttribute('data-theme');\n                setTheme(theme);\n\n                // Update the settings window content to reflect new theme\n                settingsWindow.setContent(getSettingsContent());\n\n                // Re-attach listeners after content update\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 10);\n            });\n        });\n    }\n\n    // Function to attach service map upload listeners\n    function attachServiceMapListeners() {\n        const uploadBtn = document.getElementById('service-map-upload-btn');\n        const fileInput = document.getElementById('service-map-input');\n        const fileName = document.getElementById('service-map-file-name');\n        const errorDiv = document.getElementById('service-map-error');\n        const deleteBtn = document.getElementById('service-map-delete-btn');\n\n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('click', () => {\n                fileInput.click();\n            });\n\n            fileInput.addEventListener('change', (e) => {\n                const file = e.target.files[0];\n                if (!file) return;\n\n                // Validate filename\n                if (file.name !== 'service-map.json') {\n                    errorDiv.textContent = 'File must be named \"service-map.json\"';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                    return;\n                }\n\n                // Read and validate JSON\n                const reader = new FileReader();\n                reader.onload = (event) => {\n                    try {\n                        const jsonContent = JSON.parse(event.target.result);\n\n                        // Store in localStorage\n                        localStorage.setItem('service_map', JSON.stringify(jsonContent));\n\n                        // Update UI\n                        fileName.textContent = 'service-map.json';\n                        errorDiv.style.display = 'none';\n\n                        // Refresh settings to show delete button\n                        settingsWindow.setContent(getSettingsContent());\n                        setTimeout(() => {\n                            attachThemeListeners();\n                            attachServiceMapListeners();\n                            attachServerMapListeners();\n                            attachOptionsListeners();\n                            attachNotificationListener();\n                            attachAnalyticsListener();\n                            updateMicrophoneToggleState();\n                            attachMicrophoneListener();\n                        }, 10);\n                    } catch (error) {\n                        errorDiv.textContent = 'Invalid JSON format';\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                    }\n                };\n                reader.onerror = () => {\n                    errorDiv.textContent = 'Failed to read file';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                };\n                reader.readAsText(file);\n            });\n        }\n\n        if (deleteBtn) {\n            deleteBtn.addEventListener('click', () => {\n                localStorage.removeItem('service_map');\n\n                // Refresh settings to remove delete button\n                settingsWindow.setContent(getSettingsContent());\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 10);\n            });\n        }\n    }\n\n    // Function to attach server map upload listeners\n    function attachServerMapListeners() {\n        const uploadBtn = document.getElementById('server-map-upload-btn');\n        const fileInput = document.getElementById('server-map-input');\n        const fileName = document.getElementById('server-map-file-name');\n        const errorDiv = document.getElementById('server-map-error');\n        const deleteBtn = document.getElementById('server-map-delete-btn');\n\n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('click', () => {\n                fileInput.click();\n            });\n\n            fileInput.addEventListener('change', (e) => {\n                const file = e.target.files[0];\n                if (!file) return;\n\n                // Validate filename\n                if (file.name !== 'server-map.json') {\n                    errorDiv.textContent = 'File must be named \"server-map.json\"';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                    return;\n                }\n\n                // Read and validate JSON\n                const reader = new FileReader();\n                reader.onload = (event) => {\n                    try {\n                        const jsonContent = JSON.parse(event.target.result);\n\n                        // Store in localStorage\n                        localStorage.setItem('server_map', JSON.stringify(jsonContent));\n\n                        // Update UI\n                        fileName.textContent = 'server-map.json';\n                        errorDiv.style.display = 'none';\n\n                        // Refresh settings to show delete button\n                        settingsWindow.setContent(getSettingsContent());\n                        setTimeout(() => {\n                            attachThemeListeners();\n                            attachServiceMapListeners();\n                            attachServerMapListeners();\n                            updateMicrophoneToggleState();\n                            attachMicrophoneListener();\n                        }, 10);\n                    } catch (error) {\n                        errorDiv.textContent = 'Invalid JSON format';\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                    }\n                };\n                reader.onerror = () => {\n                    errorDiv.textContent = 'Failed to read file';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                };\n                reader.readAsText(file);\n            });\n        }\n\n        if (deleteBtn) {\n            deleteBtn.addEventListener('click', () => {\n                localStorage.removeItem('server_map');\n\n                // Refresh settings to remove delete button\n                settingsWindow.setContent(getSettingsContent());\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 10);\n            });\n        }\n    }\n\n    // Function to attach notification toggle listener\n    function attachNotificationListener() {\n        const notificationToggle = document.getElementById('notifications-toggle');\n\n        if (notificationToggle && !notificationToggle.disabled) {\n            notificationToggle.addEventListener('change', async (e) => {\n                if (e.target.checked) {\n                    // Request permission\n                    try {\n                        const permission = await Notification.requestPermission();\n                        if (permission === 'granted') {\n                            // Send a test notification\n                            new Notification('Easter Company', {\n                                body: 'Notifications are now enabled!',\n                                icon: '/favicon.ico'\n                            });\n                        } else {\n                            // Permission denied, uncheck the toggle\n                            e.target.checked = false;\n                        }\n                    } catch (error) {\n                        console.error('Notification permission error:', error);\n                        e.target.checked = false;\n                    }\n                } else {\n                    // Cannot programmatically revoke permission, just inform user\n                    if (Notification.permission === 'granted') {\n                        alert('To disable notifications, please use your browser settings.');\n                        e.target.checked = true;\n                    }\n                }\n            });\n        }\n    }\n\n    function attachMicrophoneListener() {\n        const microphoneToggle = document.getElementById('microphone-toggle');\n\n        if (microphoneToggle && !microphoneToggle.disabled) {\n            microphoneToggle.addEventListener('change', async (e) => {\n                if (e.target.checked) {\n                    // Request permission\n                    try {\n                        await navigator.mediaDevices.getUserMedia({ audio: true });\n                        // Permission granted\n                    } catch (error) {\n                        console.error('Microphone permission error:', error);\n                        e.target.checked = false;\n                    }\n                } else {\n                    // Cannot programmatically revoke permission, just inform user\n                    const micState = await getMicrophoneState();\n                    if (micState.enabled) {\n                        alert('To disable microphone access, please use your browser settings.');\n                        e.target.checked = true;\n                    }\n                }\n            });\n        }\n    }\n\n    // Function to attach analytics toggle listener\n    function attachAnalyticsListener() {\n        const analyticsToggle = document.getElementById('analytics-toggle');\n\n        if (analyticsToggle) {\n            analyticsToggle.addEventListener('change', (e) => {\n                const enabled = e.target.checked;\n                setAnalytics(enabled);\n\n                if (enabled) {\n                    console.log('[Easter Analytics] Tracking user interactions');\n                    console.log('[Easter Debug] Debug mode activated');\n                } else {\n                    console.log('[Easter Analytics] Analytics disabled');\n                }\n            });\n        }\n    }\n\n    // Function to attach options upload listeners\n    function attachOptionsListeners() {\n        const uploadBtn = document.getElementById('options-upload-btn');\n        const fileInput = document.getElementById('options-input');\n        const fileName = document.getElementById('options-file-name');\n        const errorDiv = document.getElementById('options-error');\n        const deleteBtn = document.getElementById('options-delete-btn');\n\n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('click', () => {\n                fileInput.click();\n            });\n\n            fileInput.addEventListener('change', (e) => {\n                const file = e.target.files[0];\n                if (!file) return;\n\n                // Validate filename\n                if (file.name !== 'options.json') {\n                    errorDiv.textContent = 'File must be named \"options.json\"';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                    return;\n                }\n\n                // Read and validate JSON\n                const reader = new FileReader();\n                reader.onload = (event) => {\n                    try {\n                        const jsonContent = JSON.parse(event.target.result);\n\n                        // Store in localStorage\n                        localStorage.setItem('user_options', JSON.stringify(jsonContent));\n\n                        // Update UI\n                        fileName.textContent = 'options.json';\n                        errorDiv.style.display = 'none';\n\n                        // Refresh settings to show delete button\n                        settingsWindow.setContent(getSettingsContent());\n                        setTimeout(() => {\n                            attachThemeListeners();\n                            attachServiceMapListeners();\n                            attachServerMapListeners();\n                            attachOptionsListeners();\n                            updateMicrophoneToggleState();\n                            attachMicrophoneListener();\n                        }, 10);\n                    } catch (error) {\n                        errorDiv.textContent = 'Invalid JSON format';\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                    }\n                };\n                reader.onerror = () => {\n                    errorDiv.textContent = 'Failed to read file';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                };\n                reader.readAsText(file);\n            });\n        }\n\n        if (deleteBtn) {\n            deleteBtn.addEventListener('click', () => {\n                localStorage.removeItem('user_options');\n\n                // Refresh settings to remove delete button\n                settingsWindow.setContent(getSettingsContent());\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 10);\n            });\n        }\n    }\n\n\n\n    function attachSettingsListeners() {\n        attachThemeListeners();\n        attachServiceMapListeners();\n        attachServerMapListeners();\n        attachOptionsListeners();\n        attachNotificationListener();\n        attachAnalyticsListener();\n        updateMicrophoneToggleState();\n        attachMicrophoneListener();\n    }\n\n    const settingsWindow = createWindow({\n        id: 'settings-window',\n        title: 'Settings',\n        content: getSettingsContent(),\n        icon: 'bx-cog',\n        onClose: onWindowClose,\n        onOpen: () => {\n            // Update content before attaching listeners to ensure it's fresh\n            settingsWindow.setContent(getSettingsContent());\n            // Attach listeners every time the settings window is opened\n            setTimeout(attachSettingsListeners, 50);\n        }\n    });\n\n    function handleWindow(windowInstance, clickedIcon = null) {\n        if (openWindow && openWindow.id === windowInstance.id) {\n            // If the clicked window is already open, close it normally.\n            windowInstance.close();\n            openWindow = null;\n            // Reset icon states\n            if (clickedIcon) {\n                const allIcons = document.querySelectorAll('.nav-right i');\n                allIcons.forEach(icon => {\n                    icon.classList.remove('active', 'inactive');\n                });\n            }\n        } else {\n            // If another window is open, close it with quick transition\n            if (openWindow) {\n                openWindow.close(true); // immediate = true for smooth switching\n\n                // Wait for the switch animation, then open new window\n                setTimeout(() => {\n                    windowInstance.open();\n                    openWindow = windowInstance;\n                    // Update icon states\n                    if (clickedIcon) {\n                        const allIcons = document.querySelectorAll('.nav-right i');\n                        allIcons.forEach(icon => {\n                            if (icon === clickedIcon) {\n                                icon.classList.add('active');\n                                icon.classList.remove('inactive');\n                            } else {\n                                icon.classList.add('inactive');\n                                icon.classList.remove('active');\n                            }\n                        });\n                    }\n                }, 220); // Slightly longer than switching animation\n            } else {\n                // No window open, just open the new one\n                windowInstance.open();\n                openWindow = windowInstance;\n                // Update icon states\n                if (clickedIcon) {\n                    const allIcons = document.querySelectorAll('.nav-right i');\n                    allIcons.forEach(icon => {\n                        if (icon === clickedIcon) {\n                            icon.classList.add('active');\n                            icon.classList.remove('inactive');\n                        } else {\n                            icon.classList.add('inactive');\n                            icon.classList.remove('active');\n                        }\n                    });\n                }\n            }\n        }\n\n        // Update footer visibility based on whether any window is open.\n        if (openWindow) {\n            footer?.classList.add('hide');\n        } else {\n            footer?.classList.remove('hide');\n        }\n    }\n\n    const navbarMicrophone = document.getElementById('navbar-microphone');\n    let animationFrameId;\n    let audioContext;\n    let analyser;\n\n    function startAudioVisualization(canvas) {\n        const canvasCtx = canvas.getContext('2d');\n        audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        analyser = audioContext.createAnalyser();\n\n        // Create a dummy oscillator to have some audio data\n        const oscillator = audioContext.createOscillator();\n        oscillator.type = 'sine';\n        oscillator.frequency.setValueAtTime(440, audioContext.currentTime);\n        oscillator.connect(analyser);\n        analyser.connect(audioContext.destination);\n        oscillator.start();\n\n        analyser.fftSize = 256;\n        const bufferLength = analyser.frequencyBinCount;\n        const dataArray = new Uint8Array(bufferLength);\n\n        function draw() {\n            animationFrameId = requestAnimationFrame(draw);\n            analyser.getByteTimeDomainData(dataArray);\n\n            canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n\n            canvasCtx.lineWidth = 2;\n            canvasCtx.strokeStyle = 'rgb(0, 255, 255)';\n            canvasCtx.shadowBlur = 10;\n            canvasCtx.shadowColor = 'rgb(0, 255, 255)';\n\n            canvasCtx.beginPath();\n\n            const sliceWidth = canvas.width * 1.0 / bufferLength;\n            let x = 0;\n\n            for (let i = 0; i < bufferLength; i++) {\n                const v = dataArray[i] / 128.0;\n                const y = v * canvas.height / 2;\n\n                if (i === 0) {\n                    canvasCtx.moveTo(x, y);\n                } else {\n                    canvasCtx.lineTo(x, y);\n                }\n\n                x += sliceWidth;\n            }\n\n            canvasCtx.lineTo(canvas.width, canvas.height / 2);\n            canvasCtx.stroke();\n        }\n\n        draw();\n    }\n\n    function stopAudioVisualization() {\n        cancelAnimationFrame(animationFrameId);\n        if (audioContext) {\n            audioContext.close();\n        }\n    }\n\n    if (navbarMicrophone) {\n        navbarMicrophone.addEventListener('click', () => {\n            const nav = document.querySelector('nav');\n            const navLeft = document.querySelector('.nav-left');\n            const openWindowContent = openWindow?.isOpen() ? openWindow.id : null;\n            const windowContent = openWindowContent ? document.querySelector(`#${openWindowContent} .window-content`) : null;\n\n\n            if (nav.classList.contains('recording')) {\n                // Stop recording\n                nav.classList.remove('recording');\n                navLeft.classList.remove('recording');\n                stopAudioVisualization();\n                const canvas = document.getElementById('audio-canvas');\n                if (canvas) {\n                    canvas.remove();\n                }\n            } else {\n                // Start recording\n                nav.classList.add('recording');\n                navLeft.classList.add('recording');\n\n                const canvas = document.createElement('canvas');\n                canvas.id = 'audio-canvas';\n                canvas.style.position = 'absolute';\n                canvas.style.top = '0';\n                canvas.style.left = '0';\n                canvas.style.width = '100%';\n                canvas.style.height = '100%';\n                canvas.style.zIndex = '-1';\n                nav.prepend(canvas);\n                startAudioVisualization(canvas);\n\n                // Stop recording after 30 seconds\n                setTimeout(() => {\n                    nav.classList.remove('recording');\n                    navLeft.classList.remove('recording');\n                    stopAudioVisualization();\n                    const canvas = document.getElementById('audio-canvas');\n                    if (canvas) {\n                        canvas.remove();\n                    }\n                }, 30000);\n            }\n        });\n    }\n\n\n    // Handle login form submission\n    function handleLoginSubmit(e) {\n        e.preventDefault();\n        const emailInput = document.getElementById('email-input');\n        const errorDiv = document.getElementById('login-error');\n\n        try {\n            login(emailInput.value);\n            // Reload page to show authenticated state\n            window.location.reload();\n        } catch (error) {\n            errorDiv.textContent = error.message;\n            errorDiv.style.display = 'block';\n        }\n    }\n\n    // Setup event listeners based on login state\n    if (loggedIn) {\n        // Authenticated user - setup window icons\n        const userIcon = document.getElementById('user-icon');\n        const messageIcon = document.getElementById('message-icon');\n        const settingsIcon = document.getElementById('settings-icon');\n\n        if (userIcon) {\n            userIcon.addEventListener('click', () => handleWindow(userWindow, userIcon));\n        }\n\n        if (messageIcon) {\n            messageIcon.addEventListener('click', () => {\n                handleWindow(messageWindow, messageIcon);\n            });\n        }\n\n        if (settingsIcon) {\n            settingsIcon.addEventListener('click', () => {\n                handleWindow(settingsWindow, settingsIcon);\n            });\n        }\n    } else {\n        // Not logged in - setup login button\n        const loginBtn = document.getElementById('login-btn');\n\n        if (loginBtn) {\n            loginBtn.addEventListener('click', () => {\n                handleWindow(loginWindow);\n\n                // Wait for window to open, then attach form listener\n                setTimeout(() => {\n                    const loginForm = document.getElementById('login-form');\n                    if (loginForm) {\n                        loginForm.addEventListener('submit', handleLoginSubmit);\n                    }\n                }, 100);\n            });\n        }\n    }\n}\n\n// Run when the DOM is ready\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", onReady);\n} else {\n    onReady();\n}\n"],
  "mappings": "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",
  "names": ["applyBaseStyles", "injectNavbar", "isLoggedIn", "navbarHTML", "navbar", "injectFooter", "footerHTML", "footer", "createWindow", "options", "windowEl", "closeCallback", "openCallback", "open", "container", "iconClass", "tabBarHTML", "windowTitleHTML", "contentHTML", "tab", "index", "iconHtml", "headerHTML", "closeBtn", "e", "close", "tabIndex", "t", "c", "immediate", "setContent", "content", "contentDiv", "isOpen", "AUTH_KEY", "isLoggedIn", "getUserEmail", "login", "email", "THEME_KEY", "THEMES", "getCurrentTheme", "resolveAutoTheme", "width", "height", "isFullscreen", "setTheme", "theme", "applyTheme", "skipTransition", "body", "resolvedTheme", "t", "bg", "initTheme", "currentTheme", "resizeTimeout", "createPlaceholderMessage", "type", "message", "actionText", "icon", "actionHtml", "getLogsContent", "updateLogs", "logsContainer", "serviceMapString", "serviceMapData", "e", "eventService", "serviceGroups", "group", "found", "s", "logsUrl", "response", "logsData", "hiddenServiceIDs", "filteredLogsData", "logReport", "logsHtml", "logs", "btn", "error", "onReady", "initTheme", "applyBaseStyles", "loggedIn", "isLoggedIn", "injectNavbar", "injectFooter", "footer", "openWindow", "onWindowClose", "icon", "loginWindow", "createWindow", "createPlaceholderMessage", "type", "message", "actionText", "actionHtml", "lastSystemMonitorUpdate", "getSystemMonitorContent", "updateSystemMonitor", "widgetsContainer", "serviceMapString", "serviceMapData", "e", "eventService", "serviceGroups", "group", "found", "s", "systemMonitorUrl", "results", "response", "error", "updateTabTimestamp", "sanitizeValue", "value", "extractMajorMinorPatch", "versionStr", "match", "shortMatch", "truncateAddress", "address", "getStatColor", "percentMatch", "percent", "formatUptime", "uptimeStr", "days", "hours", "minutes", "seconds", "totalSeconds", "totalMinutes", "totalHours", "totalDays", "totalMonths", "totalYears", "generateWidgetHtml", "service", "isOnline", "statusClass", "statusIcon", "statusText", "detailsHtml", "footerHtml", "versionDisplay", "versionObj", "major", "minor", "patch", "cpuValue", "memoryValue", "cpuColor", "memoryColor", "displayName", "rawAddress", "existingWidgets", "existingWidgetsMap", "child", "widget", "serviceId", "index", "existingWidget", "tempDiv", "newWidget", "userWindow", "getUserEmail", "lastEventsUpdate", "lastLogsUpdate", "getEventsContent", "tabIndex", "timestamp", "subtitleElement", "diff", "ms", "timeStr", "updateEventsTimeline", "eventsContainer", "eventsUrl", "textData", "eventsHtml", "line", "parts", "timestampStr", "utcDate", "dateStr", "initializeMessageWindow", "updateLogs", "timestampInterval", "messageWindow", "refreshInterval", "systemMonitorRefreshInterval", "getLogsContent", "ANALYTICS_KEY", "DEBUG_KEY", "isAnalyticsEnabled", "stored", "isDebugEnabled", "setAnalytics", "enabled", "getNotificationState", "getMicrophoneState", "permissionStatus", "updateMicrophoneToggleState", "microphoneToggle", "micState", "description", "getSettingsContent", "currentTheme", "getCurrentTheme", "userEmail", "notificationState", "analyticsEnabled", "THEMES", "attachThemeListeners", "card", "theme", "setTheme", "settingsWindow", "attachServiceMapListeners", "attachServerMapListeners", "attachOptionsListeners", "attachNotificationListener", "attachAnalyticsListener", "attachMicrophoneListener", "uploadBtn", "fileInput", "fileName", "errorDiv", "deleteBtn", "file", "reader", "event", "jsonContent", "notificationToggle", "analyticsToggle", "attachSettingsListeners", "handleWindow", "windowInstance", "clickedIcon", "navbarMicrophone", "animationFrameId", "audioContext", "analyser", "startAudioVisualization", "canvas", "canvasCtx", "oscillator", "bufferLength", "dataArray", "draw", "sliceWidth", "x", "i", "y", "stopAudioVisualization", "nav", "navLeft", "openWindowContent", "windowContent", "handleLoginSubmit", "emailInput", "login", "userIcon", "messageIcon", "settingsIcon", "loginBtn", "loginForm"]
}
