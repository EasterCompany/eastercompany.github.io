{
  "version": 3,
  "sources": ["source/dex/styler.js", "source/dex/Window.js", "source/dex/auth.js", "source/dex/theme.js", "source/dex/main.js"],
  "sourcesContent": ["// styler.js - Placeholder for dynamic styles and elements.\n\nexport function applyBaseStyles() {\n    console.log(\"Applying base styles dynamically (e.g., for background animation or theme toggles).\");\n}\n\nfunction getCleanHostname() {\n    let hostname = window.location.hostname;\n\n    // Remove port if present (e.g., localhost:8000 -> localhost)\n    if (hostname.includes(':')) {\n        hostname = hostname.split(':')[0];\n    }\n\n    const parts = hostname.split('.');\n    const tlds = ['com', 'org', 'net', 'info', 'biz', 'co', 'io', 'company', 'xyz', 'app']; // Add more TLDs as needed\n\n    // Handle localhost and IP addresses\n    if (hostname === 'localhost' || hostname.match(/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/)) {\n        return hostname;\n    }\n\n    // Iterate from the end to find the significant part\n    // Example: test.dev.easter.company\n    // parts = [\"test\", \"dev\", \"easter\", \"company\"]\n    // i=3: \"company\" is a TLD\n    // i=2: \"easter\" is not a TLD, so current = \"easter\"\n    // i=1: \"dev\" is not a TLD, so current = \"dev\"\n    // i=0: \"test\" is not a TLD, so current = \"test\"\n    // The logic needs to find the *effective* domain and then the subdomain part.\n\n    // A simpler approach: find the last part that's not a TLD or common secondary domain,\n    // and if there's a part before it, use that as the subdomain.\n    let cleanName = hostname;\n    for (let i = parts.length - 1; i >= 0; i--) {\n        const part = parts[i];\n        if (tlds.includes(part)) {\n            // This is a TLD, continue to the next part\n            cleanName = parts.slice(0, i).join('.'); // Reconstruct hostname without TLDs\n        } else {\n            // Found a non-TLD part. This is likely the main domain or a subdomain.\n            // If there's only one part left (e.g., \"easter\"), or it's an IP/localhost after stripping TLDs, use it.\n            // If there are multiple parts (e.g., \"dev.easter\"), the last one is the domain, the one before is the subdomain.\n            const remainingParts = cleanName.split('.');\n            if (remainingParts.length > 1 && remainingParts[remainingParts.length - 1] !== 'www') {\n                return remainingParts[0]; // Return the deepest subdomain\n            } else if (remainingParts.length === 1 && remainingParts[0] === 'www') {\n                // If only \"www\", try to get the next part if it's there\n                if (i > 0 && !tlds.includes(parts[i-1])) {\n                    return parts[i-1];\n                }\n            }\n            return remainingParts[remainingParts.length -1]; // Default to main domain if no deep subdomain\n        }\n    }\n    \n    // Fallback for cases like \"www.google.com\" -> \"www\", or single word domains\n    // Let's refine the logic to always get the effective domain or the most specific subdomain.\n    const effectiveDomainParts = [];\n    let foundNonTld = false;\n    for (let i = parts.length - 1; i >= 0; i--) {\n        const part = parts[i];\n        if (tlds.includes(part) && !foundNonTld) {\n            // Skip TLDs from the right\n            continue;\n        } else {\n            foundNonTld = true;\n            effectiveDomainParts.unshift(part); // Add to the beginning\n        }\n    }\n\n    if (effectiveDomainParts.length === 0) {\n        return hostname; // Fallback if nothing found (e.g., just TLDs or malformed)\n    }\n\n    // Now effectiveDomainParts could be [\"easter\", \"company\"] or [\"dev\", \"easter\", \"company\"]\n    // If it's [\"www\", \"easter\"], we want \"easter\"\n    if (effectiveDomainParts[0] === 'www' && effectiveDomainParts.length > 1) {\n        return effectiveDomainParts[1];\n    }\n    \n    // If there's more than one part, return the first (deepest subdomain)\n    if (effectiveDomainParts.length > 1) {\n        return effectiveDomainParts[0];\n    }\n    \n    return effectiveDomainParts[0]; // Otherwise, return the single part (e.g., \"localhost\", \"easter\")\n}\n\n\n/**\n * Injects the navbar with conditional content based on login state\n * @param {boolean} isLoggedIn - Whether the user is logged in\n */\nexport function injectNavbar(isLoggedIn = false) {\n    const navRightContent = isLoggedIn\n        ? `\n            <i id=\"message-icon\" class='bx bxs-message-dots'></i>\n            <i id=\"user-icon\" class='bx bx-user'></i>\n            <i id=\"settings-icon\" class='bx bx-cog'></i>\n        `\n        : `\n            <button id=\"login-btn\" class=\"login-btn\">LOGIN</button>\n        `;\n\n    const navbarHTML = `\n        <div class=\"nav-left\">\n            <img src=\"/static/meta/favicon.svg\" alt=\"Easter Company Favicon\" class=\"navbar-favicon\">\n            <i class='bx bx-microphone' id=\"navbar-microphone\"></i>\n        </div>\n        <div class=\"nav-right\">\n            ${navRightContent}\n        </div>\n    `;\n\n    const navbar = document.createElement('nav');\n    navbar.innerHTML = navbarHTML;\n    document.body.prepend(navbar);\n}\n\nexport function injectFooter() {\n    const footerHTML = `\n        <div class=\"socials-section\">\n            <a href=\"https://facebook.com/eastercompany\" aria-label=\"Facebook\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-facebook-square\"></i></a>\n            <a href=\"https://linkedin.com/company/72223947\" aria-label=\"LinkedIn\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-linkedin\"></i></a>\n            <a href=\"https://instagram.com/eastercompany\" aria-label=\"Instagram\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-instagram-alt\"></i></a>\n            <a href=\"https://x.com/eastercompany\" aria-label=\"X\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-twitter\"></i></a>\n            <a href=\"https://github.com/eastercompany\" aria-label=\"GitHub\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-github\"></i></a>\n            <a href=\"https://youtube.com/@eastercompany\" aria-label=\"YouTube\" target=\"_blank\" rel=\"noopener noreferrer\"><i class=\"bx bxl-youtube\"></i></a>\n        </div>\n    `;\n    \n    const footer = document.createElement('footer');\n    footer.innerHTML = footerHTML;\n    document.body.appendChild(footer);\n}", "// source/dex/Window.js\n\n/**\n * Creates and manages a single window instance.\n * @param {object} options - Configuration for the window.\n * @param {string} options.id - A unique ID for the window.\n * @param {string} [options.content] - The initial HTML content for the window (if not using tabs).\n * @param {Array<object>} [options.tabs] - An array of tab objects, each with a 'title' and 'content'.\n * @param {string} options.icon - Optional boxicon class for the header icon (e.g., 'bx-user', 'bxs-message-dots')\n * @param {function} options.onClose - Optional callback when window is closed\n */\nexport function createWindow(options) {\n    let windowEl = null;\n    let closeCallback = options.onClose || null;\n\n    function open() {\n        if (windowEl) {\n            windowEl.classList.add('open');\n            return;\n        }\n\n        let container = document.getElementById('windows-container');\n        if (!container) {\n            container = document.createElement('div');\n            container.id = 'windows-container';\n            container.className = 'windows-container';\n            document.body.appendChild(container);\n        }\n\n        windowEl = document.createElement('div');\n        windowEl.id = options.id;\n        windowEl.className = 'window';\n\n        const iconClass = options.icon || 'bx-window';\n        let contentHTML;\n        let headerHTML = `\n            <div class=\"window-header\">\n                <i class=\"bx ${iconClass}\"></i>\n                <i class=\"bx bx-x window-close\"></i>\n            </div>\n        `;\n\n        if (options.tabs && options.tabs.length > 0) {\n            const tabTitles = options.tabs.map((tab, index) => `\n                <div class=\"tab ${index === 0 ? 'active' : ''}\" data-tab-index=\"${index}\">${tab.title}</div>\n            `).join('');\n\n            const tabContents = options.tabs.map((tab, index) => `\n                <div class=\"tab-content ${index === 0 ? 'active' : ''}\" data-tab-content=\"${index}\">${tab.content}</div>\n            `).join('');\n\n            contentHTML = `\n                <div class=\"tab-bar\">${tabTitles}</div>\n                <div class=\"window-content\">${tabContents}</div>\n            `;\n        } else {\n            contentHTML = `<div class=\"window-content\">${options.content}</div>`;\n        }\n\n        windowEl.innerHTML = headerHTML + contentHTML;\n        container.appendChild(windowEl);\n\n        const closeBtn = windowEl.querySelector('.window-close');\n        if (closeBtn) {\n            closeBtn.addEventListener('click', (e) => {\n                e.stopPropagation();\n                close();\n            });\n        }\n\n        if (options.tabs && options.tabs.length > 0) {\n            const tabs = windowEl.querySelectorAll('.tab');\n            tabs.forEach(tab => {\n                tab.addEventListener('click', () => {\n                    const tabIndex = tab.getAttribute('data-tab-index');\n\n                    windowEl.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));\n                    tab.classList.add('active');\n\n                    windowEl.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));\n                    windowEl.querySelector(`.tab-content[data-tab-content=\"${tabIndex}\"]`).classList.add('active');\n                });\n            });\n        }\n\n        setTimeout(() => {\n            windowEl.classList.add('open');\n        }, 10);\n    }\n\n    function close(immediate = false) {\n        if (!windowEl) return;\n\n        if (immediate) {\n            windowEl.classList.add('switching');\n            windowEl.classList.remove('open');\n            setTimeout(() => {\n                if (windowEl && windowEl.parentNode) {\n                    windowEl.parentNode.removeChild(windowEl);\n                }\n                windowEl = null;\n            }, 200);\n        } else {\n            windowEl.classList.remove('open');\n            if (closeCallback) {\n                closeCallback();\n            }\n            setTimeout(() => {\n                if (windowEl && windowEl.parentNode) {\n                    windowEl.parentNode.removeChild(windowEl);\n                }\n                windowEl = null;\n            }, 400);\n        }\n    }\n\n    function setContent(content) {\n        if (windowEl) {\n            const contentDiv = windowEl.querySelector('.window-content');\n            if (contentDiv) {\n                // This is more complex with tabs, for now, we just replace the whole content\n                contentDiv.innerHTML = content;\n            }\n        }\n    }\n    \n    function isOpen() {\n        return windowEl && windowEl.classList.contains('open');\n    }\n\n    return {\n        open,\n        close,\n        setContent,\n        isOpen,\n        id: options.id,\n    };\n}\n", "// auth.js - Simple email-based authentication\n\nconst AUTH_KEY = 'easter_user_email';\n\n/**\n * Check if user is logged in\n * @returns {boolean}\n */\nexport function isLoggedIn() {\n    return localStorage.getItem(AUTH_KEY) !== null;\n}\n\n/**\n * Get the logged in user's email\n * @returns {string|null}\n */\nexport function getUserEmail() {\n    return localStorage.getItem(AUTH_KEY);\n}\n\n/**\n * Login with email\n * @param {string} email\n */\nexport function login(email) {\n    if (!email || !email.includes('@')) {\n        throw new Error('Invalid email address');\n    }\n\n    // Restrict to @easter.company emails only\n    if (!email.trim().toLowerCase().endsWith('@easter.company')) {\n        throw new Error('Access denied. Please check your credentials.');\n    }\n\n    localStorage.setItem(AUTH_KEY, email.trim());\n}\n\n/**\n * Logout user\n */\nexport function logout() {\n    localStorage.removeItem(AUTH_KEY);\n}\n", "// theme.js - Theme management system\n\nconst THEME_KEY = 'easter_theme';\n\nexport const THEMES = {\n    AUTO: 'auto',\n    DEFAULT: 'default',\n    ANIMATED: 'animated'\n};\n\n/**\n * Get the current theme preference\n * @returns {string}\n */\nexport function getCurrentTheme() {\n    return localStorage.getItem(THEME_KEY) || THEMES.AUTO;\n}\n\n/**\n * Determine which theme to apply based on Auto rules\n * @returns {string} Either THEMES.DEFAULT or THEMES.ANIMATED\n */\nfunction resolveAutoTheme() {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const isFullscreen = window.innerHeight === window.screen.height && window.innerWidth === window.screen.width;\n\n    // Use Legacy if window is above 1920x1080\n    if (width > 1920 && height > 1080) {\n        return THEMES.ANIMATED;\n    }\n\n    // Use Default if equal to 1920x1080 AND fullscreen, OR below 1920x1080\n    if ((width === 1920 && height === 1080 && isFullscreen) || width <= 1920 || height <= 1080) {\n        return THEMES.DEFAULT;\n    }\n\n    return THEMES.DEFAULT;\n}\n\n/**\n * Set the theme\n * @param {string} theme\n */\nexport function setTheme(theme) {\n    if (!Object.values(THEMES).includes(theme)) {\n        throw new Error('Invalid theme');\n    }\n    localStorage.setItem(THEME_KEY, theme);\n    applyTheme(theme);\n}\n\n/**\n * Apply the theme to the document\n * @param {string} theme - The theme preference (can be AUTO, DEFAULT, or ANIMATED)\n * @param {boolean} skipTransition - Whether to skip the transition animation\n */\nexport function applyTheme(theme, skipTransition = false) {\n    const body = document.body;\n\n    // Resolve AUTO theme to actual theme\n    const resolvedTheme = theme === THEMES.AUTO ? resolveAutoTheme() : theme;\n\n    if (!skipTransition) {\n        // Add transition class for fade effect\n        body.classList.add('theme-transitioning');\n\n        // Remove transition class after animation\n        setTimeout(() => {\n            body.classList.remove('theme-transitioning');\n        }, 300);\n    }\n\n    // Remove all theme classes\n    Object.values(THEMES).forEach(t => {\n        body.classList.remove(`theme-${t}`);\n    });\n\n    // Add current theme class\n    body.classList.add(`theme-${theme}`);\n\n    // Handle background element with smooth transition\n    if (resolvedTheme === THEMES.ANIMATED) {\n        // Create background element if it doesn't exist\n        if (!document.querySelector('.background')) {\n            const bg = document.createElement('div');\n            bg.className = 'background';\n            document.body.prepend(bg);\n        }\n    } else {\n        // Remove background element with fade out\n        const bg = document.querySelector('.background');\n        if (bg) {\n            if (skipTransition) {\n                bg.remove();\n            } else {\n                bg.style.animation = 'fadeOutBackground 0.4s ease forwards';\n                setTimeout(() => {\n                    bg.remove();\n                }, 400);\n            }\n        }\n    }\n}\n\n/**\n * Initialize theme on page load\n */\nexport function initTheme() {\n    const currentTheme = getCurrentTheme();\n    applyTheme(currentTheme, true); // Skip transition on initial load\n\n    // Add resize listener for auto theme\n    if (currentTheme === THEMES.AUTO) {\n        let resizeTimeout;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimeout);\n            resizeTimeout = setTimeout(() => {\n                applyTheme(THEMES.AUTO);\n            }, 300); // Debounce resize events\n        });\n    }\n}\n", "// Easter Company - Universal JS Entrypoint\nimport { applyBaseStyles, injectNavbar, injectFooter } from './styler.js';\nimport { createWindow } from './Window.js';\nimport { isLoggedIn, login, getUserEmail } from './auth.js';\nimport { initTheme, setTheme, getCurrentTheme, THEMES } from './theme.js';\n\nfunction onReady() {\n    console.log(\"Welcome to Easter Company.\");\n\n    // Initialize theme first\n    initTheme();\n\n    applyBaseStyles();\n\n    const loggedIn = isLoggedIn();\n    injectNavbar(loggedIn);\n    injectFooter();\n\n    // --- Window Management ---\n    const footer = document.querySelector('footer');\n    let openWindow = null;\n\n    // Callback to handle footer visibility when window closes\n    function onWindowClose() {\n        openWindow = null;\n        footer?.classList.remove('hide');\n\n        // Reset all navbar icon states\n        const allIcons = document.querySelectorAll('.nav-right i');\n        allIcons.forEach(icon => {\n            icon.classList.remove('active', 'inactive');\n        });\n    }\n\n    // Login window\n    const loginWindow = createWindow({\n        id: 'login-window',\n        content: `\n            <div class=\"login-split-container\">\n                <div class=\"login-top-section\">\n                    <div class=\"login-form\">\n                        <h1>Welcome</h1>\n                        <p>Enter your email to continue</p>\n                        <form id=\"login-form\">\n                            <input\n                                type=\"email\"\n                                id=\"email-input\"\n                                placeholder=\"you@easter.company\"\n                                required\n                                autocomplete=\"email\"\n                            />\n                            <button type=\"submit\">Continue</button>\n                            <div id=\"login-error\" class=\"error\" style=\"display: none;\"></div>\n                        </form>\n                    </div>\n                </div>\n                <div class=\"login-bottom-section\">\n                    <div class=\"login-disclaimer\">\n                        <h2>Early Access</h2>\n                        <p>We're not ready to take on new users yet.</p>\n                        <p>Want early access? Contribute to our open source projects on the <a href=\"https://github.com/eastercompany\" target=\"_blank\" rel=\"noopener noreferrer\">Easter Company GitHub</a> community to unlock early access privileges.</p>\n                    </div>\n                </div>\n            </div>\n        `,\n        icon: 'bx-log-in',\n        onClose: onWindowClose\n    });\n\n    // Authenticated windows\n    const userWindow = createWindow({\n        id: 'user-window',\n        content: `<h1>User Profile</h1><p>Logged in as: ${getUserEmail() || 'Unknown'}</p>`,\n        icon: 'bx-user',\n        onClose: onWindowClose\n    });\n\n    const messageWindow = createWindow({\n        id: 'message-window',\n        tabs: [\n            { title: 'Logs', content: '<h1>Logs</h1><p>This is the logs tab.</p>' },\n            { title: 'Notifications', content: '<h1>Notifications</h1><p>This is the notifications tab.</p>' },\n            { title: 'Conversations', content: '<h1>Conversations</h1><p>This is the conversations tab.</p>' }\n        ],\n        icon: 'bxs-message-dots',\n        onClose: onWindowClose\n    });\n\n    // Analytics and Debug mode state\n    const ANALYTICS_KEY = 'easter_analytics_enabled';\n    const DEBUG_KEY = 'easter_debug_mode';\n\n    function isAnalyticsEnabled() {\n        const stored = localStorage.getItem(ANALYTICS_KEY);\n        return stored === null ? true : stored === 'true'; // Default to true\n    }\n\n    function isDebugEnabled() {\n        return isAnalyticsEnabled(); // Debug mode follows analytics setting\n    }\n\n    function setAnalytics(enabled) {\n        localStorage.setItem(ANALYTICS_KEY, enabled.toString());\n        window.EASTER_ANALYTICS_ENABLED = enabled;\n        window.EASTER_DEBUG_MODE = enabled;\n\n        if (enabled) {\n            console.log('[Easter Analytics] Analytics and debug mode enabled');\n        } else {\n            console.log('[Easter Analytics] Analytics and debug mode disabled');\n        }\n    }\n\n    // Initialize global state\n    window.EASTER_ANALYTICS_ENABLED = isAnalyticsEnabled();\n    window.EASTER_DEBUG_MODE = isDebugEnabled();\n\n    if (window.EASTER_DEBUG_MODE) {\n        console.log('[Easter Debug] Debug mode is active');\n        console.log('[Easter Debug] Analytics enabled:', window.EASTER_ANALYTICS_ENABLED);\n    }\n\n    // Function to check notification permission state\n    function getNotificationState() {\n        if (!('Notification' in window)) {\n            return { enabled: false, supported: false };\n        }\n        return {\n            enabled: Notification.permission === 'granted',\n            supported: true\n        };\n    }\n\n    async function getMicrophoneState() {\n        if (!navigator.permissions) {\n            // Permissions API not supported\n            return { enabled: false, supported: false };\n        }\n        try {\n            const permissionStatus = await navigator.permissions.query({ name: 'microphone' });\n            return {\n                enabled: permissionStatus.state === 'granted',\n                supported: true,\n                state: permissionStatus.state // 'granted', 'prompt', 'denied'\n            };\n        } catch (e) {\n            console.error(\"Error querying microphone permission:\", e);\n            return { enabled: false, supported: false };\n        }\n    }\n\n    async function updateMicrophoneToggleState() {\n        const microphoneToggle = document.getElementById('microphone-toggle');\n        if (!microphoneToggle) return;\n\n        const micState = await getMicrophoneState();\n\n        const description = document.querySelector('#microphone-setting-item .settings-item-description');\n\n        if (micState.supported) {\n            microphoneToggle.disabled = false;\n            microphoneToggle.checked = micState.enabled;\n            if (description) description.textContent = 'Allow access to your microphone';\n        } else {\n            microphoneToggle.disabled = true;\n            microphoneToggle.checked = false;\n            if (description) description.textContent = 'Not supported in this browser';\n        }\n    }\n\n    // Function to generate settings content\n        function getSettingsContent() {\n            const currentTheme = getCurrentTheme();\n            const userEmail = getUserEmail() || 'user@easter.company';\n            const notificationState = getNotificationState();\n            const analyticsEnabled = isAnalyticsEnabled();\n    \n            // Get data from localStorage\n            const serviceMapString = localStorage.getItem('service_map');\n            const serverMapString = localStorage.getItem('server_map');\n            const userOptionsString = localStorage.getItem('user_options');\n    \n            let metricsHtml;\n    \n            if (serviceMapString && serverMapString && userOptionsString) {\n                metricsHtml = `<p>Loading metrics...</p>`;\n                setTimeout(updateMetricsDashboard, 0);\n            } else {\n                metricsHtml = `<p>Please upload your config files to enable metrics.</p>`;\n            }\n    \n    \n            return `\n                <h1 style=\"text-align: center; margin-bottom: 30px;\">Settings</h1>\n                <div class=\"theme-selector\">\n                    <div class=\"theme-card ${currentTheme === THEMES.AUTO ? 'active' : ''}\" data-theme=\"${THEMES.AUTO}\">\n                        <div class=\"theme-preview theme-preview-auto\"></div>\n                        <div class=\"theme-info\">\n                            <h3>Auto</h3>\n                            <p>Automatically switches between Default and Legacy based on screen size and display settings.</p>\n                            <span class=\"theme-badge\">${currentTheme === THEMES.AUTO ? 'Active' : 'Select'}</span>\n                        </div>\n                    </div>\n                    <div class=\"theme-card ${currentTheme === THEMES.DEFAULT ? 'active' : ''}\" data-theme=\"${THEMES.DEFAULT}\">\n                        <div class=\"theme-preview theme-preview-default\"></div>\n                        <div class=\"theme-info\">\n                            <h3>Default</h3>\n                            <p>Clean, minimalist dark theme with solid black background.</p>\n                            <span class=\"theme-badge\">${currentTheme === THEMES.DEFAULT ? 'Active' : 'Select'}</span>\n                        </div>\n                    </div>\n                    <div class=\"theme-card ${currentTheme === THEMES.ANIMATED ? 'active' : ''}\" data-theme=\"${THEMES.ANIMATED}\">\n                        <div class=\"theme-preview theme-preview-animated\"></div>\n                        <div class=\"theme-info\">\n                            <h3>Legacy</h3>\n                            <p>Beautiful GPU-accelerated rainbow gradient background animation.</p>\n                            <span class=\"theme-badge\">${currentTheme === THEMES.ANIMATED ? 'Active' : 'Select'}</span>\n                        </div>\n                    </div>\n                </div>\n    \n                <div class=\"settings-divider\"></div>\n    \n                <div class=\"settings-section\">\n                    <h2 class=\"settings-section-title\">Configuration</h2>\n                    <div class=\"settings-list\">\n                        <div class=\"settings-item settings-item-input\">\n                            <div>\n                                <label class=\"settings-item-label\">Services</label>\n                                <span class=\"settings-item-description\">Upload your service-map.json to connect this client to your services.</span>\n                            </div>\n                            <div class=\"file-upload-container\">\n                                <button class=\"file-upload-btn\" id=\"service-map-upload-btn\">Choose File</button>\n                                <span class=\"file-upload-name\" id=\"service-map-file-name\">${localStorage.getItem('service_map') ? 'service-map.json' : 'No file selected'}</span>\n                                <input type=\"file\" class=\"file-upload-input\" id=\"service-map-input\" accept=\".json,application/json\" hidden>\n                                ${localStorage.getItem('service_map') ? '<button class=\"file-delete-btn\" id=\"service-map-delete-btn\" title=\"Delete service map\">\u00D7</button>' : ''}\n                            </div>\n                            <div class=\"file-upload-error\" id=\"service-map-error\" style=\"display: none;\"></div>\n                        </div>\n                        <div class=\"settings-item settings-item-input\">\n                            <div>\n                                <label class=\"settings-item-label\">Servers</label>\n                                <span class=\"settings-item-description\">Upload your server-map.json to connect this client to your servers.</span>\n                            </div>\n                            <div class=\"file-upload-container\">\n                                <button class=\"file-upload-btn\" id=\"server-map-upload-btn\">Choose File</button>\n                                <span class=\"file-upload-name\" id=\"server-map-file-name\">${localStorage.getItem('server_map') ? 'server-map.json' : 'No file selected'}</span>\n                                <input type=\"file\" class=\"file-upload-input\" id=\"server-map-input\" accept=\".json,application/json\" hidden>\n                                ${localStorage.getItem('server_map') ? '<button class=\"file-delete-btn\" id=\"server-map-delete-btn\" title=\"Delete server map\">\u00D7</button>' : ''}\n                            </div>\n                            <div class=\"file-upload-error\" id=\"server-map-error\" style=\"display: none;\"></div>\n                        </div>\n                        <div class=\"settings-item settings-item-input\">\n                            <div>\n                                <label class=\"settings-item-label\">User Settings</label>\n                                <span class=\"settings-item-description\">Upload your options.json to configure user preferences.</span>\n                            </div>\n                            <div class=\"file-upload-container\">\n                                <button class=\"file-upload-btn\" id=\"options-upload-btn\">Choose File</button>\n                                <span class=\"file-upload-name\" id=\"options-file-name\">${localStorage.getItem('user_options') ? 'options.json' : 'No file selected'}</span>\n                                <input type=\"file\" class=\"file-upload-input\" id=\"options-input\" accept=\".json,application/json\" hidden>\n                                ${localStorage.getItem('user_options') ? '<button class=\"file-delete-btn\" id=\"options-delete-btn\" title=\"Delete user settings\">\u00D7</button>' : ''}\n                            </div>\n                            <div class=\"file-upload-error\" id=\"options-error\" style=\"display: none;\"></div>\n                        </div>\n                    </div>\n                </div>\n    \n                <div class=\"settings-divider\"></div>\n    \n                <div class=\"settings-section\">\n                    <h2 class=\"settings-section-title\">Preferences</h2>\n                    <div class=\"settings-list\">\n                        <div class=\"settings-item\">\n                            <div class=\"settings-item-info\">\n                                <span class=\"settings-item-label\">Notifications</span>\n                                <span class=\"settings-item-description\">${notificationState.supported ? 'Receive desktop notifications' : 'Not supported in this browser'}</span>\n                            </div>\n                            <label class=\"toggle-switch\">\n                                <input type=\"checkbox\" id=\"notifications-toggle\" ${notificationState.enabled ? 'checked' : ''} ${!notificationState.supported ? 'disabled' : ''}>\n                                <span class=\"toggle-slider\"></span>\n                            </label>\n                        </div>\n                        <div class=\"settings-item\" id=\"microphone-setting-item\">\n                            <div class=\"settings-item-info\">\n                                <span class=\"settings-item-label\">Access Microphone</span>\n                                <span class=\"settings-item-description\">Allow access to your microphone</span>\n                            </div>\n                            <label class=\"toggle-switch\">\n                                <input type=\"checkbox\" id=\"microphone-toggle\" disabled>\n                                <span class=\"toggle-slider\"></span>\n                            </label>\n                        </div>\n                        <div class=\"settings-item\">\n                            <div class=\"settings-item-info\">\n                                <span class=\"settings-item-label\">Analytics</span>\n                                <span class=\"settings-item-description\">Help improve the platform (enables debug mode)</span>\n                            </div>\n                            <label class=\"toggle-switch\">\n                                <input type=\"checkbox\" id=\"analytics-toggle\" ${analyticsEnabled ? 'checked' : ''}>\n                                <span class=\"toggle-slider\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n    \n                <div class=\"settings-divider\"></div>\n    \n                <div class=\"settings-section\">\n                    <h2 class=\"settings-section-title\">Metrics</h2>\n                    <div class=\"settings-metrics\">\n                        ${metricsHtml}\n                    </div>\n                </div>\n            `;\n        }\n    \n                async function updateMetricsDashboard() {\n                    const serviceMapString = localStorage.getItem('service_map');\n                    if (!serviceMapString) return;\n            \n                    let serviceMapData;\n                    try {\n                        serviceMapData = JSON.parse(serviceMapString);\n                    } catch (e) {\n                        console.error(\"Error parsing service_map from localStorage:\", e);\n                        return;\n                    }\n            \n                    const metricsContainer = document.querySelector('.settings-metrics');\n                    if (!metricsContainer) return;\n            \n                    let services = [];\n                    if (serviceMapData && typeof serviceMapData.services === 'object') {\n                        const serviceGroupsToInclude = ['cs', 'be', 'th'];\n                        for (const group of serviceGroupsToInclude) {\n                            if (Array.isArray(serviceMapData.services[group])) {\n                                services.push(...serviceMapData.services[group]);\n                            }\n                        }\n                    } else {\n                        const errorMessage = \"Error: service-map.json does not contain a valid 'services' object.\";\n                        console.error(errorMessage, serviceMapData);\n                        metricsContainer.innerHTML = `<p>${errorMessage}</p>`;\n                        return;\n                    }\n            \n                    metricsContainer.innerHTML = '<p>Loading metrics...</p>';\n            \n                            const promises = services.map(service => {\n                                const domain = service.domain === '0.0.0.0' ? 'localhost' : service.domain;\n                                const metricsUrl = `http://${domain}:${service.port}/service`;\n                                return fetch(metricsUrl)\n                                    .then(response => {\n                                        if (!response.ok) {\n                                            return { name: service.id, status: 'offline' };\n                                        }\n                                        return response.json().then(data => ({ name: service.id, status: 'online', version: data.version.str, ...data }));\n                                    })\n                                    .catch(() => ({ name: service.id, status: 'offline' }));\n                            });            \n                    const results = await Promise.all(promises);\n            \n                    const totalServices = results.length;\n                    const onlineServices = results.filter(s => s.status === 'online').length;\n                    const offlineServices = totalServices - onlineServices;\n            \n                    let metricsHtml = `\n                        <div class=\"metric-item\">\n                            <span class=\"metric-label\">Total Services</span>\n                            <span class=\"metric-value\">${totalServices}</span>\n                        </div>\n                        <div class=\"metric-item\">\n                            <span class=\"metric-label\">Online Services</span>\n                            <span class=\"metric-value ${onlineServices > 0 ? 'metric-value-active' : ''}\">${onlineServices}</span>\n                        </div>\n                        <div class=\"metric-item\">\n                            <span class=\"metric-label\">Offline Services</span>\n                            <span class=\"metric-value ${offlineServices > 0 ? 'metric-value-error' : ''}\">${offlineServices}</span>\n                        </div>\n                    `;\n            \n                    const serviceVersions = results.filter(s => s.status === 'online').map(s => `\n                        <div class=\"metric-item\">\n                            <span class=\"metric-label\">${s.name} Version</span>\n                            <span class=\"metric-value\">${s.version || 'unknown'}</span>\n                        </div>\n                    `).join('');\n            \n                    metricsContainer.innerHTML = metricsHtml + serviceVersions;\n                }    // Function to attach theme selector event listeners\n    function attachThemeListeners() {\n        const themeCards = document.querySelectorAll('.theme-card');\n        themeCards.forEach(card => {\n            card.addEventListener('click', function handleThemeClick() {\n                const theme = this.getAttribute('data-theme');\n                setTheme(theme);\n\n                // Update the settings window content to reflect new theme\n                settingsWindow.setContent(getSettingsContent());\n\n                // Re-attach listeners after content update\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 10);\n            });\n        });\n    }\n\n    // Function to attach service map upload listeners\n    function attachServiceMapListeners() {\n        const uploadBtn = document.getElementById('service-map-upload-btn');\n        const fileInput = document.getElementById('service-map-input');\n        const fileName = document.getElementById('service-map-file-name');\n        const errorDiv = document.getElementById('service-map-error');\n        const deleteBtn = document.getElementById('service-map-delete-btn');\n\n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('click', () => {\n                fileInput.click();\n            });\n\n            fileInput.addEventListener('change', (e) => {\n                const file = e.target.files[0];\n                if (!file) return;\n\n                // Validate filename\n                if (file.name !== 'service-map.json') {\n                    errorDiv.textContent = 'File must be named \"service-map.json\"';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                    return;\n                }\n\n                // Read and validate JSON\n                const reader = new FileReader();\n                reader.onload = (event) => {\n                    try {\n                        const jsonContent = JSON.parse(event.target.result);\n\n                        // Store in localStorage\n                        localStorage.setItem('service_map', JSON.stringify(jsonContent));\n\n                        // Update UI\n                        fileName.textContent = 'service-map.json';\n                        errorDiv.style.display = 'none';\n\n                        // Refresh settings to show delete button\n                        settingsWindow.setContent(getSettingsContent());\n                        setTimeout(() => {\n                            attachThemeListeners();\n                            attachServiceMapListeners();\n                            attachServerMapListeners();\n                            attachOptionsListeners();\n                            attachNotificationListener();\n                            attachAnalyticsListener();\n                            updateMicrophoneToggleState();\n                            attachMicrophoneListener();\n                        }, 10);\n                    } catch (error) {\n                        errorDiv.textContent = 'Invalid JSON format';\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                    }\n                };\n                reader.onerror = () => {\n                    errorDiv.textContent = 'Failed to read file';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                };\n                reader.readAsText(file);\n            });\n        }\n\n        if (deleteBtn) {\n            deleteBtn.addEventListener('click', () => {\n                localStorage.removeItem('service_map');\n\n                // Refresh settings to remove delete button\n                settingsWindow.setContent(getSettingsContent());\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 10);\n            });\n        }\n    }\n\n    // Function to attach server map upload listeners\n    function attachServerMapListeners() {\n        const uploadBtn = document.getElementById('server-map-upload-btn');\n        const fileInput = document.getElementById('server-map-input');\n        const fileName = document.getElementById('server-map-file-name');\n        const errorDiv = document.getElementById('server-map-error');\n        const deleteBtn = document.getElementById('server-map-delete-btn');\n\n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('click', () => {\n                fileInput.click();\n            });\n\n            fileInput.addEventListener('change', (e) => {\n                const file = e.target.files[0];\n                if (!file) return;\n\n                // Validate filename\n                if (file.name !== 'server-map.json') {\n                    errorDiv.textContent = 'File must be named \"server-map.json\"';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                    return;\n                }\n\n                // Read and validate JSON\n                const reader = new FileReader();\n                reader.onload = (event) => {\n                    try {\n                        const jsonContent = JSON.parse(event.target.result);\n\n                        // Store in localStorage\n                        localStorage.setItem('server_map', JSON.stringify(jsonContent));\n\n                        // Update UI\n                        fileName.textContent = 'server-map.json';\n                        errorDiv.style.display = 'none';\n\n                        // Refresh settings to show delete button\n                        settingsWindow.setContent(getSettingsContent());\n                        setTimeout(() => {\n                            attachThemeListeners();\n                            attachServiceMapListeners();\n                            attachServerMapListeners();\n                            updateMicrophoneToggleState();\n                            attachMicrophoneListener();\n                        }, 10);\n                    } catch (error) {\n                        errorDiv.textContent = 'Invalid JSON format';\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                    }\n                };\n                reader.onerror = () => {\n                    errorDiv.textContent = 'Failed to read file';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                };\n                reader.readAsText(file);\n            });\n        }\n\n        if (deleteBtn) {\n            deleteBtn.addEventListener('click', () => {\n                localStorage.removeItem('server_map');\n\n                // Refresh settings to remove delete button\n                settingsWindow.setContent(getSettingsContent());\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 10);\n            });\n        }\n    }\n\n    // Function to attach notification toggle listener\n    function attachNotificationListener() {\n        const notificationToggle = document.getElementById('notifications-toggle');\n\n        if (notificationToggle && !notificationToggle.disabled) {\n            notificationToggle.addEventListener('change', async (e) => {\n                if (e.target.checked) {\n                    // Request permission\n                    try {\n                        const permission = await Notification.requestPermission();\n                        if (permission === 'granted') {\n                            // Send a test notification\n                            new Notification('Easter Company', {\n                                body: 'Notifications are now enabled!',\n                                icon: '/favicon.ico'\n                            });\n                        } else {\n                            // Permission denied, uncheck the toggle\n                            e.target.checked = false;\n                        }\n                    } catch (error) {\n                        console.error('Notification permission error:', error);\n                        e.target.checked = false;\n                    }\n                } else {\n                    // Cannot programmatically revoke permission, just inform user\n                    if (Notification.permission === 'granted') {\n                        alert('To disable notifications, please use your browser settings.');\n                        e.target.checked = true;\n                    }\n                }\n            });\n        }\n    }\n\n    function attachMicrophoneListener() {\n        const microphoneToggle = document.getElementById('microphone-toggle');\n\n        if (microphoneToggle && !microphoneToggle.disabled) {\n            microphoneToggle.addEventListener('change', async (e) => {\n                if (e.target.checked) {\n                    // Request permission\n                    try {\n                        await navigator.mediaDevices.getUserMedia({ audio: true });\n                        // Permission granted\n                    } catch (error) {\n                        console.error('Microphone permission error:', error);\n                        e.target.checked = false;\n                    }\n                } else {\n                    // Cannot programmatically revoke permission, just inform user\n                    const micState = await getMicrophoneState();\n                    if (micState.enabled) {\n                        alert('To disable microphone access, please use your browser settings.');\n                        e.target.checked = true;\n                    }\n                }\n            });\n        }\n    }\n\n    // Function to attach analytics toggle listener\n    function attachAnalyticsListener() {\n        const analyticsToggle = document.getElementById('analytics-toggle');\n\n        if (analyticsToggle) {\n            analyticsToggle.addEventListener('change', (e) => {\n                const enabled = e.target.checked;\n                setAnalytics(enabled);\n\n                if (enabled) {\n                    console.log('[Easter Analytics] Tracking user interactions');\n                    console.log('[Easter Debug] Debug mode activated');\n                } else {\n                    console.log('[Easter Analytics] Analytics disabled');\n                }\n            });\n        }\n    }\n\n    // Function to attach options upload listeners\n    function attachOptionsListeners() {\n        const uploadBtn = document.getElementById('options-upload-btn');\n        const fileInput = document.getElementById('options-input');\n        const fileName = document.getElementById('options-file-name');\n        const errorDiv = document.getElementById('options-error');\n        const deleteBtn = document.getElementById('options-delete-btn');\n\n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('click', () => {\n                fileInput.click();\n            });\n\n            fileInput.addEventListener('change', (e) => {\n                const file = e.target.files[0];\n                if (!file) return;\n\n                // Validate filename\n                if (file.name !== 'options.json') {\n                    errorDiv.textContent = 'File must be named \"options.json\"';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                    return;\n                }\n\n                // Read and validate JSON\n                const reader = new FileReader();\n                reader.onload = (event) => {\n                    try {\n                        const jsonContent = JSON.parse(event.target.result);\n\n                        // Store in localStorage\n                        localStorage.setItem('user_options', JSON.stringify(jsonContent));\n\n                        // Update UI\n                        fileName.textContent = 'options.json';\n                        errorDiv.style.display = 'none';\n\n                        // Refresh settings to show delete button\n                        settingsWindow.setContent(getSettingsContent());\n                        setTimeout(() => {\n                            attachThemeListeners();\n                            attachServiceMapListeners();\n                            attachServerMapListeners();\n                            attachOptionsListeners();\n                            updateMicrophoneToggleState();\n                            attachMicrophoneListener();\n                        }, 10);\n                    } catch (error) {\n                        errorDiv.textContent = 'Invalid JSON format';\n                        errorDiv.style.display = 'block';\n                        fileInput.value = '';\n                    }\n                };\n                reader.onerror = () => {\n                    errorDiv.textContent = 'Failed to read file';\n                    errorDiv.style.display = 'block';\n                    fileInput.value = '';\n                };\n                reader.readAsText(file);\n            });\n        }\n\n        if (deleteBtn) {\n            deleteBtn.addEventListener('click', () => {\n                localStorage.removeItem('user_options');\n\n                // Refresh settings to remove delete button\n                settingsWindow.setContent(getSettingsContent());\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 10);\n            });\n        }\n    }\n\n\n\n    const settingsWindow = createWindow({\n        id: 'settings-window',\n        content: getSettingsContent(),\n        icon: 'bx-cog',\n        onClose: onWindowClose\n    });\n\n    function handleWindow(windowInstance, clickedIcon = null) {\n        if (openWindow && openWindow.id === windowInstance.id) {\n            // If the clicked window is already open, close it normally.\n            windowInstance.close();\n            openWindow = null;\n            // Reset icon states\n            if (clickedIcon) {\n                const allIcons = document.querySelectorAll('.nav-right i');\n                allIcons.forEach(icon => {\n                    icon.classList.remove('active', 'inactive');\n                });\n            }\n        } else {\n            // If another window is open, close it with quick transition\n            if (openWindow) {\n                openWindow.close(true); // immediate = true for smooth switching\n\n                // Wait for the switch animation, then open new window\n                setTimeout(() => {\n                    windowInstance.open();\n                    openWindow = windowInstance;\n                    // Update icon states\n                    if (clickedIcon) {\n                        const allIcons = document.querySelectorAll('.nav-right i');\n                        allIcons.forEach(icon => {\n                            if (icon === clickedIcon) {\n                                icon.classList.add('active');\n                                icon.classList.remove('inactive');\n                            } else {\n                                icon.classList.add('inactive');\n                                icon.classList.remove('active');\n                            }\n                        });\n                    }\n                }, 220); // Slightly longer than switching animation\n            } else {\n                // No window open, just open the new one\n                windowInstance.open();\n                openWindow = windowInstance;\n                // Update icon states\n                if (clickedIcon) {\n                    const allIcons = document.querySelectorAll('.nav-right i');\n                    allIcons.forEach(icon => {\n                        if (icon === clickedIcon) {\n                            icon.classList.add('active');\n                            icon.classList.remove('inactive');\n                        } else {\n                            icon.classList.add('inactive');\n                            icon.classList.remove('active');\n                        }\n                    });\n                }\n            }\n        }\n\n        // Update footer visibility based on whether any window is open.\n        if (openWindow) {\n            footer?.classList.add('hide');\n        } else {\n            footer?.classList.remove('hide');\n        }\n    }\n\n    const navbarMicrophone = document.getElementById('navbar-microphone');\n    let animationFrameId;\n    let audioContext;\n    let analyser;\n\n    function startAudioVisualization(canvas) {\n        const canvasCtx = canvas.getContext('2d');\n        audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        analyser = audioContext.createAnalyser();\n\n        // Create a dummy oscillator to have some audio data\n        const oscillator = audioContext.createOscillator();\n        oscillator.type = 'sine';\n        oscillator.frequency.setValueAtTime(440, audioContext.currentTime);\n        oscillator.connect(analyser);\n        analyser.connect(audioContext.destination);\n        oscillator.start();\n\n        analyser.fftSize = 256;\n        const bufferLength = analyser.frequencyBinCount;\n        const dataArray = new Uint8Array(bufferLength);\n\n        function draw() {\n            animationFrameId = requestAnimationFrame(draw);\n            analyser.getByteTimeDomainData(dataArray);\n\n            canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n\n            canvasCtx.lineWidth = 2;\n            canvasCtx.strokeStyle = 'rgb(0, 255, 255)';\n            canvasCtx.shadowBlur = 10;\n            canvasCtx.shadowColor = 'rgb(0, 255, 255)';\n\n            canvasCtx.beginPath();\n\n            const sliceWidth = canvas.width * 1.0 / bufferLength;\n            let x = 0;\n\n            for (let i = 0; i < bufferLength; i++) {\n                const v = dataArray[i] / 128.0;\n                const y = v * canvas.height / 2;\n\n                if (i === 0) {\n                    canvasCtx.moveTo(x, y);\n                } else {\n                    canvasCtx.lineTo(x, y);\n                }\n\n                x += sliceWidth;\n            }\n\n            canvasCtx.lineTo(canvas.width, canvas.height / 2);\n            canvasCtx.stroke();\n        }\n\n        draw();\n    }\n\n    function stopAudioVisualization() {\n        cancelAnimationFrame(animationFrameId);\n        if (audioContext) {\n            audioContext.close();\n        }\n    }\n\n    if (navbarMicrophone) {\n        navbarMicrophone.addEventListener('click', () => {\n            const nav = document.querySelector('nav');\n            const navLeft = document.querySelector('.nav-left');\n            const openWindowContent = openWindow?.isOpen() ? openWindow.id : null;\n            const windowContent = openWindowContent ? document.querySelector(`#${openWindowContent} .window-content`) : null;\n\n\n            if (nav.classList.contains('recording')) {\n                // Stop recording\n                nav.classList.remove('recording');\n                navLeft.classList.remove('recording');\n                stopAudioVisualization();\n                const canvas = document.getElementById('audio-canvas');\n                if (canvas) {\n                    canvas.remove();\n                }\n            } else {\n                // Start recording\n                nav.classList.add('recording');\n                navLeft.classList.add('recording');\n\n                const canvas = document.createElement('canvas');\n                canvas.id = 'audio-canvas';\n                canvas.style.position = 'absolute';\n                canvas.style.top = '0';\n                canvas.style.left = '0';\n                canvas.style.width = '100%';\n                canvas.style.height = '100%';\n                canvas.style.zIndex = '-1';\n                nav.prepend(canvas);\n                startAudioVisualization(canvas);\n\n                // Stop recording after 30 seconds\n                setTimeout(() => {\n                    nav.classList.remove('recording');\n                    navLeft.classList.remove('recording');\n                    stopAudioVisualization();\n                    const canvas = document.getElementById('audio-canvas');\n                    if (canvas) {\n                        canvas.remove();\n                    }\n                }, 30000);\n            }\n        });\n    }\n\n\n    // Handle login form submission\n    function handleLoginSubmit(e) {\n        e.preventDefault();\n        const emailInput = document.getElementById('email-input');\n        const errorDiv = document.getElementById('login-error');\n\n        try {\n            login(emailInput.value);\n            // Reload page to show authenticated state\n            window.location.reload();\n        } catch (error) {\n            errorDiv.textContent = error.message;\n            errorDiv.style.display = 'block';\n        }\n    }\n\n    // Setup event listeners based on login state\n    if (loggedIn) {\n        // Authenticated user - setup window icons\n        const userIcon = document.getElementById('user-icon');\n        const messageIcon = document.getElementById('message-icon');\n        const settingsIcon = document.getElementById('settings-icon');\n\n        if (userIcon) {\n            userIcon.addEventListener('click', () => handleWindow(userWindow, userIcon));\n        }\n\n        if (messageIcon) {\n            messageIcon.addEventListener('click', () => handleWindow(messageWindow, messageIcon));\n        }\n\n        if (settingsIcon) {\n            settingsIcon.addEventListener('click', () => {\n                handleWindow(settingsWindow, settingsIcon);\n\n                // Wait for window to open, then attach all settings listeners\n                setTimeout(() => {\n                    attachThemeListeners();\n                    attachServiceMapListeners();\n                    attachServerMapListeners();\n                    attachOptionsListeners();\n                    attachNotificationListener();\n                    attachAnalyticsListener();\n                    updateMicrophoneToggleState();\n                    attachMicrophoneListener();\n                }, 100);\n            });\n        }\n    } else {\n        // Not logged in - setup login button\n        const loginBtn = document.getElementById('login-btn');\n\n        if (loginBtn) {\n            loginBtn.addEventListener('click', () => {\n                handleWindow(loginWindow);\n\n                // Wait for window to open, then attach form listener\n                setTimeout(() => {\n                    const loginForm = document.getElementById('login-form');\n                    if (loginForm) {\n                        loginForm.addEventListener('submit', handleLoginSubmit);\n                    }\n                }, 100);\n            });\n        }\n    }\n}\n\n// Run when the DOM is ready\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", onReady);\n} else {\n    onReady();\n}\n"],
  "mappings": "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",
  "names": ["applyBaseStyles", "injectNavbar", "isLoggedIn", "navbarHTML", "navbar", "injectFooter", "footerHTML", "footer", "createWindow", "options", "windowEl", "closeCallback", "open", "container", "iconClass", "contentHTML", "headerHTML", "tabTitles", "tab", "index", "tabContents", "closeBtn", "e", "close", "tabIndex", "t", "c", "immediate", "setContent", "content", "contentDiv", "isOpen", "AUTH_KEY", "isLoggedIn", "getUserEmail", "login", "email", "THEME_KEY", "THEMES", "getCurrentTheme", "resolveAutoTheme", "width", "height", "isFullscreen", "setTheme", "theme", "applyTheme", "skipTransition", "body", "resolvedTheme", "t", "bg", "initTheme", "currentTheme", "resizeTimeout", "onReady", "initTheme", "applyBaseStyles", "loggedIn", "isLoggedIn", "injectNavbar", "injectFooter", "footer", "openWindow", "onWindowClose", "icon", "loginWindow", "createWindow", "userWindow", "getUserEmail", "messageWindow", "ANALYTICS_KEY", "DEBUG_KEY", "isAnalyticsEnabled", "stored", "isDebugEnabled", "setAnalytics", "enabled", "getNotificationState", "getMicrophoneState", "permissionStatus", "updateMicrophoneToggleState", "microphoneToggle", "micState", "description", "getSettingsContent", "currentTheme", "getCurrentTheme", "userEmail", "notificationState", "analyticsEnabled", "serviceMapString", "serverMapString", "userOptionsString", "metricsHtml", "updateMetricsDashboard", "THEMES", "serviceMapData", "e", "metricsContainer", "services", "serviceGroupsToInclude", "group", "errorMessage", "promises", "service", "metricsUrl", "response", "data", "results", "totalServices", "onlineServices", "s", "offlineServices", "serviceVersions", "attachThemeListeners", "card", "theme", "setTheme", "settingsWindow", "attachServiceMapListeners", "attachServerMapListeners", "attachOptionsListeners", "attachNotificationListener", "attachAnalyticsListener", "attachMicrophoneListener", "uploadBtn", "fileInput", "fileName", "errorDiv", "deleteBtn", "file", "reader", "event", "jsonContent", "notificationToggle", "error", "analyticsToggle", "handleWindow", "windowInstance", "clickedIcon", "navbarMicrophone", "animationFrameId", "audioContext", "analyser", "startAudioVisualization", "canvas", "canvasCtx", "oscillator", "bufferLength", "dataArray", "draw", "sliceWidth", "x", "i", "y", "stopAudioVisualization", "nav", "navLeft", "openWindowContent", "windowContent", "handleLoginSubmit", "emailInput", "login", "userIcon", "messageIcon", "settingsIcon", "loginBtn", "loginForm"]
}
