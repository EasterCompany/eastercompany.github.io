(()=>{function k(){console.log("Applying base styles dynamically (e.g., for background animation or theme toggles).")}function C(t=!1){let i=`
        <div class="nav-left">
            <img src="/static/meta/favicon.svg" alt="Easter Company Favicon" class="navbar-favicon">
            <i class='bx bx-microphone' id="navbar-microphone"></i>
        </div>
        <div class="nav-right">
            ${t?`
            <i id="message-icon" class='bx bxs-message-dots'></i>
            <i id="user-icon" class='bx bx-user'></i>
            <i id="settings-icon" class='bx bx-cog'></i>
        `:`
            <button id="login-btn" class="login-btn">LOGIN</button>
        `}
        </div>
    `,a=document.createElement("nav");a.innerHTML=i,document.body.prepend(a)}function A(){let t=`
        <div class="socials-section">
            <a href="https://facebook.com/eastercompany" aria-label="Facebook" target="_blank" rel="noopener noreferrer"><i class="bx bxl-facebook-square"></i></a>
            <a href="https://linkedin.com/company/72223947" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer"><i class="bx bxl-linkedin"></i></a>
            <a href="https://instagram.com/eastercompany" aria-label="Instagram" target="_blank" rel="noopener noreferrer"><i class="bx bxl-instagram-alt"></i></a>
            <a href="https://x.com/eastercompany" aria-label="X" target="_blank" rel="noopener noreferrer"><i class="bx bxl-twitter"></i></a>
            <a href="https://github.com/eastercompany" aria-label="GitHub" target="_blank" rel="noopener noreferrer"><i class="bx bxl-github"></i></a>
            <a href="https://youtube.com/@eastercompany" aria-label="YouTube" target="_blank" rel="noopener noreferrer"><i class="bx bxl-youtube"></i></a>
        </div>
    `,e=document.createElement("footer");e.innerHTML=t,document.body.appendChild(e)}function N(t){let e=null,i=t.onClose||null,a=t.onOpen||null;function s(){if(e){e.classList.add("open"),a&&setTimeout(a,10);return}let r=document.getElementById("windows-container");r||(r=document.createElement("div"),r.id="windows-container",r.className="windows-container",document.body.appendChild(r)),e=document.createElement("div"),e.id=t.id,e.className="window";let u=t.icon||"bx-window",y="",c="",p;t.tabs&&t.tabs.length>0?(y=`<div class="tab-bar">${t.tabs.map((o,n)=>{let l;return o.icon?l=`<i class="bx ${o.icon}"></i>`:o.title&&o.title.length>0?l=`<span class="tab-glyph">${o.title.charAt(0).toUpperCase()}</span>`:l='<i class="bx bx-question-mark"></i>',`
                    <div class="tab ${n===0?"active":""}" data-tab-index="${n}">
                        ${l}
                        <span class="tab-title">${o.title}</span>
                        <span class="tab-subtitle" data-tab-subtitle="${n}">Last updated: never</span>
                    </div>
                `}).join("")}</div>`,p=`<div class="window-content">${t.tabs.map((o,n)=>`<div class="tab-content ${n===0?"active":""}" data-tab-content="${n}">${o.content}</div>`).join("")}</div>`):(t.title&&(c=`<div class="window-title">${t.title}</div>`),p=`<div class="window-content">${t.content}</div>`);let b=`
            <div class="window-header">
                <i class="bx ${u}"></i>
                ${y}
                ${c}
                <i class="bx bx-x window-close"></i>
            </div>
        `;e.innerHTML=b+p,r.appendChild(e);let T=e.querySelector(".window-close");T&&T.addEventListener("click",x=>{x.stopPropagation(),g()}),t.tabs&&t.tabs.length>0&&e.querySelectorAll(".tab").forEach(L=>{L.addEventListener("click",()=>{let o=L.getAttribute("data-tab-index");e.querySelectorAll(".tab").forEach(n=>n.classList.remove("active")),L.classList.add("active"),e.querySelectorAll(".tab-content").forEach(n=>n.classList.remove("active")),e.querySelector(`.tab-content[data-tab-content="${o}"]`).classList.add("active")})}),setTimeout(()=>{e.classList.add("open"),a&&a()},10)}function g(r=!1){e&&(r?(e.classList.add("switching"),e.classList.remove("open"),setTimeout(()=>{e&&e.parentNode&&e.parentNode.removeChild(e),e=null},200)):(e.classList.remove("open"),i&&i(),setTimeout(()=>{e&&e.parentNode&&e.parentNode.removeChild(e),e=null},400)))}function f(r){if(e){let u=e.querySelector(".window-content");u&&(u.innerHTML=r)}}function v(){return e&&e.classList.contains("open")}return{open:s,close:g,setContent:f,isOpen:v,id:t.id}}var P="easter_user_email";function D(){return localStorage.getItem(P)!==null}var F="easter_theme",h={AUTO:"auto",DEFAULT:"default",ANIMATED:"animated"};function W(){return localStorage.getItem(F)||h.AUTO}function B(){let t=window.innerWidth,e=window.innerHeight,i=window.innerHeight===window.screen.height&&window.innerWidth===window.screen.width;return t>1920&&e>1080?h.ANIMATED:(t===1920&&e===1080&&i||t<=1920||e<=1080,h.DEFAULT)}function j(t,e=!1){let i=document.body,a=t===h.AUTO?B():t;if(e||(i.classList.add("theme-transitioning"),setTimeout(()=>{i.classList.remove("theme-transitioning")},300)),Object.values(h).forEach(s=>{i.classList.remove(`theme-${s}`)}),i.classList.add(`theme-${t}`),a===h.ANIMATED){if(!document.querySelector(".background")){let s=document.createElement("div");s.className="background",document.body.prepend(s)}}else{let s=document.querySelector(".background");s&&(e?s.remove():(s.style.animation="fadeOutBackground 0.4s ease forwards",setTimeout(()=>{s.remove()},400)))}}function O(){let t=W();if(j(t,!0),t===h.AUTO){let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{j(h.AUTO)},300)})}}function E(t,e,i=null){let s={config:"bx-cog",error:"bx-error-circle",empty:"bx-info-circle",offline:"bx-wifi-off"}[t]||"bx-info-circle",g=i?`<p class="placeholder-action">${i}</p>`:"";return`
        <div class="tab-placeholder">
            <i class='bx ${s} placeholder-icon'></i>
            <p class="placeholder-message">${e}</p>
            ${g}
        </div>
    `}function _(){return`
        <div id="logs-container" class="logs-container">
            <p>Loading logs...</p>
        </div>
    `}async function H(){let t=document.getElementById("logs-container");if(!t)return!1;t.classList.remove("placeholder-active");let e=localStorage.getItem("service_map");if(!e)return t.classList.add("placeholder-active"),t.innerHTML=E("config","No service map configured.","Please upload your service-map.json in Settings to enable log monitoring."),!1;let i;try{i=JSON.parse(e)}catch(f){return console.error("Error parsing service_map from localStorage:",f),t.classList.add("placeholder-active"),t.innerHTML=E("error","Invalid service map data.","Please re-upload a valid service-map.json file in Settings."),!1}let a=null;if(i&&typeof i.services=="object"){let f=["cs","be","th"];for(let v of f)if(Array.isArray(i.services[v])){let r=i.services[v].find(u=>u.short_name==="event"||u.id==="event"||u.id==="dex-event-service");if(r){a=r;break}}}if(!a)return t.classList.add("placeholder-active"),t.innerHTML=E("error","Event service not found in service map.","Please ensure dex-event-service is configured in your service-map.json."),!1;let g=`http://${a.domain==="0.0.0.0"?"localhost":a.domain}:${a.port}/logs`;try{let f=await fetch(g);if(!f.ok)return t.classList.add("placeholder-active"),t.innerHTML=E("offline","Event service is offline.","Please ensure the event service is running."),!1;let v=await f.json();if(!v||v.length===0)return t.classList.add("placeholder-active"),t.innerHTML=E("empty","No logs found.","Service logs will appear here when available."),!1;let r=["local-ollama-0","local-cache-0","cloud-cache-0","cloud-cache-1"],u=v.filter(c=>!r.includes(c.id));u.forEach(c=>{c.logs.reverse()}),u.reverse();let y=u.map(c=>{let p=c.logs.join(`
`);return`
                <div class="log-report">
                    <div class="log-report-header">
                        <h3>${c.id}</h3>
                        <button class="copy-logs-btn" data-logs="${escape(p)}">
                            <i class="bx bx-copy"></i>
                        </button>
                    </div>
                    <pre class="log-content">${p}</pre>
                </div>
            `}).join("");return t.innerHTML=y,document.querySelectorAll(".copy-logs-btn").forEach(c=>{c.addEventListener("click",()=>{let p=unescape(c.dataset.logs);navigator.clipboard.writeText(p).then(()=>{let b=c.querySelector("i");b.classList.remove("bx-copy"),b.classList.add("bx-check"),setTimeout(()=>{b.classList.remove("bx-check"),b.classList.add("bx-copy")},2e3)})})}),!0}catch(f){return console.error("Error fetching logs:",f),t.classList.add("placeholder-active"),t.innerHTML=E("offline","Failed to load logs.","The event service may be offline, unreachable, or blocked by a browser extension (e.g., ad blocker)."),!1}}function U(){console.log("Welcome to Easter Company."),O(),k();let t=D();C(t),A();let e=document.querySelector("footer"),i=null;function a(){i=null,e?.classList.remove("hide"),document.querySelectorAll(".nav-right i").forEach(n=>n.classList.remove("active","inactive"))}function s(o,n,l=null){let d={config:"bx-cog",error:"bx-error-circle",empty:"bx-info-circle",offline:"bx-wifi-off"}[o]||"bx-info-circle",w=l?`<p class="placeholder-action">${l}</p>`:"";return`<div class="tab-placeholder"><i class='bx ${d} placeholder-icon'></i><p class="placeholder-message">${n}</p>${w}</div>`}let g=null;function f(){return localStorage.getItem("service_map")?'<div id="system-monitor-widgets" class="system-monitor-widgets"><p>Loading services...</p></div>':s("config","No service map configured.","Please upload your service-map.json in Settings.")}function v(){return localStorage.getItem("service_map")?'<div id="models-widgets" class="system-monitor-widgets"><p>Loading models...</p></div>':s("config","No service map configured.","Please upload your service-map.json in Settings.")}let r=null;function u(){return'<div id="events-timeline" class="events-timeline"><p>Loading events...</p></div>'}async function y(){let o=localStorage.getItem("service_map");if(!o)return null;try{let n=JSON.parse(o),l=["cs","be","th"],m=null;for(let S of l)if(Array.isArray(n.services[S])){let $=n.services[S].find(I=>I.id==="dex-event-service");if($){m=$;break}}if(!m)return null;let w=`http://${m.domain==="0.0.0.0"?"localhost":m.domain}:${m.port}/system_monitor_metrics`,M=await fetch(w);if(!M.ok)throw new Error(`HTTP error! status: ${M.status}`);return await M.json()}catch(n){return console.error("Error fetching system data:",n),null}}async function c(o){let n=document.getElementById("system-monitor-widgets");if(!n)return;if(!o||!o.services){n.innerHTML=s("offline","Failed to load system metrics.","The event service may be offline or unreachable.");return}g=Date.now();let l=o.services||[];function m(d){return`<div class="service-widget" data-service-id="${d.id}">...</div>`}n.innerHTML=l.map(m).join("")}async function p(o){let n=document.getElementById("models-widgets");if(!n)return;if(!o||!o.models){n.innerHTML=s("offline","Failed to load model status.","The event service may be offline or unreachable.");return}let l=o.models||[];if(l.length===0){n.innerHTML=s("empty","No models to display.");return}function m(d){let w=d.status==="Downloaded",M=w?"service-widget-online":"service-widget-offline",S=w?"bx-check-circle":"bx-x-circle",$=w?"OK":"MISSING",I=w&&d.size>0?`${(d.size/1e9).toFixed(2)} GB`:"-",q=`<div class="service-widget-info"><span class="info-label">Type:</span><span class="info-value">${d.type}</span></div><div class="service-widget-info"><span class="info-label">Size:</span><span class="info-value">${I}</span></div>`;return`<div class="service-widget ${M}" data-model-name="${d.name}"><div class="service-widget-header"><i class="bx ${S}"></i><h3>${d.name}</h3><span class="service-widget-status">${$}</span></div><div class="service-widget-body">${q}</div></div>`}n.innerHTML=l.map(m).join("")}async function b(){}let T=null,x=N({id:"message-window",tabs:[{icon:"bx-bell",title:"Notifications",content:s("empty","No notifications yet.")},{icon:"bx-history",title:"Logs",content:_()},{icon:"bx-brain",title:"Models",content:v()},{icon:"bx-calendar-event",title:"Events",content:u()},{icon:"bx-line-chart",title:"System Monitor",content:f()}],icon:"bxs-message-dots",onClose:a,onOpen:()=>setTimeout(L,100)});async function L(){let o=await y();await b(),await H()&&(T=Date.now()),o&&(c(o),p(o));let n=setInterval(()=>{if(!x.isOpen())return clearInterval(n);updateTabTimestamp(1,T),updateTabTimestamp(3,r),updateTabTimestamp(4,g)},100),l=setInterval(async()=>{if(!x.isOpen())return clearInterval(l);await b(),await H()&&(T=Date.now())},5e3),m=setInterval(async()=>{if(!x.isOpen())return clearInterval(m);let d=await y();d&&(c(d),p(d))},3e4)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",U):U();})();
//# sourceMappingURL=dex.ce52894d.js.map
