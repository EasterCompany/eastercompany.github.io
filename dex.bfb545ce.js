(()=>{function N(){console.log("Applying base styles dynamically (e.g., for background animation or theme toggles).")}function D(e=!1){let i=`
        <div class="nav-left">
            <img src="/static/meta/favicon.svg" alt="Easter Company Favicon" class="navbar-favicon">
            <i class='bx bx-microphone' id="navbar-microphone"></i>
        </div>
        <div class="nav-right">
            ${e?`
            <i id="message-icon" class='bx bxs-message-dots'></i>
            <i id="user-icon" class='bx bx-user'></i>
            <i id="settings-icon" class='bx bx-cog'></i>
        `:`
            <button id="login-btn" class="login-btn">LOGIN</button>
        `}
        </div>
    `,a=document.createElement("nav");a.innerHTML=i,document.body.prepend(a)}function _(){let e=`
        <div class="socials-section">
            <a href="https://facebook.com/eastercompany" aria-label="Facebook" target="_blank" rel="noopener noreferrer"><i class="bx bxl-facebook-square"></i></a>
            <a href="https://linkedin.com/company/72223947" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer"><i class="bx bxl-linkedin"></i></a>
            <a href="https://instagram.com/eastercompany" aria-label="Instagram" target="_blank" rel="noopener noreferrer"><i class="bx bxl-instagram-alt"></i></a>
            <a href="https://x.com/eastercompany" aria-label="X" target="_blank" rel="noopener noreferrer"><i class="bx bxl-twitter"></i></a>
            <a href="https://github.com/eastercompany" aria-label="GitHub" target="_blank" rel="noopener noreferrer"><i class="bx bxl-github"></i></a>
            <a href="https://youtube.com/@eastercompany" aria-label="YouTube" target="_blank" rel="noopener noreferrer"><i class="bx bxl-youtube"></i></a>
        </div>
    `,t=document.createElement("footer");t.innerHTML=e,document.body.appendChild(t)}function k(e){let t=null,i=e.onClose||null,a=e.onOpen||null;function c(){if(t){t.classList.add("open"),a&&setTimeout(a,10);return}let l=document.getElementById("windows-container");l||(l=document.createElement("div"),l.id="windows-container",l.className="windows-container",document.body.appendChild(l)),t=document.createElement("div"),t.id=e.id,t.className="window";let m=e.icon||"bx-window",T="",u="",h;e.tabs&&e.tabs.length>0?(T=`<div class="tab-bar">${e.tabs.map((v,b)=>{let M;return v.icon?M=`<i class="bx ${v.icon}"></i>`:v.title&&v.title.length>0?M=`<span class="tab-glyph">${v.title.charAt(0).toUpperCase()}</span>`:M='<i class="bx bx-question-mark"></i>',`
                    <div class="tab ${b===0?"active":""}" data-tab-index="${b}">
                        ${M}
                        <span class="tab-title">${v.title}</span>
                        <span class="tab-subtitle" data-tab-subtitle="${b}">Last updated: never</span>
                    </div>
                `}).join("")}</div>`,h=`<div class="window-content">${e.tabs.map((v,b)=>`<div class="tab-content ${b===0?"active":""}" data-tab-content="${b}">${v.content}</div>`).join("")}</div>`):(e.title&&(u=`<div class="window-title">${e.title}</div>`),h=`<div class="window-content">${e.content}</div>`);let y=`
            <div class="window-header">
                <i class="bx ${m}"></i>
                ${T}
                ${u}
                <i class="bx bx-x window-close"></i>
            </div>
        `;t.innerHTML=y+h,l.appendChild(t);let $=t.querySelector(".window-close");$&&$.addEventListener("click",E=>{E.stopPropagation(),g()}),e.tabs&&e.tabs.length>0&&t.querySelectorAll(".tab").forEach(L=>{L.addEventListener("click",()=>{let v=L.getAttribute("data-tab-index");t.querySelectorAll(".tab").forEach(b=>b.classList.remove("active")),L.classList.add("active"),t.querySelectorAll(".tab-content").forEach(b=>b.classList.remove("active")),t.querySelector(`.tab-content[data-tab-content="${v}"]`).classList.add("active")})}),setTimeout(()=>{t.classList.add("open"),a&&a()},10)}function g(l=!1){t&&(l?(t.classList.add("switching"),t.classList.remove("open"),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t),t=null},200)):(t.classList.remove("open"),i&&i(),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t),t=null},400)))}function p(l){if(t){let m=t.querySelector(".window-content");m&&(m.innerHTML=l)}}function w(){return t&&t.classList.contains("open")}return{open:c,close:g,setContent:p,isOpen:w,id:e.id}}var H="easter_user_email";function j(){return localStorage.getItem(H)!==null}function O(){return localStorage.getItem(H)}function U(e){if(!e||!e.includes("@"))throw new Error("Invalid email address");if(!e.trim().toLowerCase().endsWith("@easter.company"))throw new Error("Access denied. Please check your credentials.");localStorage.setItem(H,e.trim())}var R="easter_theme",x={AUTO:"auto",DEFAULT:"default",ANIMATED:"animated"};function Y(){return localStorage.getItem(R)||x.AUTO}function J(){let e=window.innerWidth,t=window.innerHeight,i=window.innerHeight===window.screen.height&&window.innerWidth===window.screen.width;return e>1920&&t>1080?x.ANIMATED:(e===1920&&t===1080&&i||e<=1920||t<=1080,x.DEFAULT)}function q(e,t=!1){let i=document.body,a=e===x.AUTO?J():e;if(t||(i.classList.add("theme-transitioning"),setTimeout(()=>{i.classList.remove("theme-transitioning")},300)),Object.values(x).forEach(c=>{i.classList.remove(`theme-${c}`)}),i.classList.add(`theme-${e}`),a===x.ANIMATED){if(!document.querySelector(".background")){let c=document.createElement("div");c.className="background",document.body.prepend(c)}}else{let c=document.querySelector(".background");c&&(t?c.remove():(c.style.animation="fadeOutBackground 0.4s ease forwards",setTimeout(()=>{c.remove()},400)))}}function B(){let e=Y();if(q(e,!0),e===x.AUTO){let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{q(x.AUTO)},300)})}}function S(e,t,i=null){let c={config:"bx-cog",error:"bx-error-circle",empty:"bx-info-circle",offline:"bx-wifi-off"}[e]||"bx-info-circle",g=i?`<p class="placeholder-action">${i}</p>`:"";return`
        <div class="tab-placeholder">
            <i class='bx ${c} placeholder-icon'></i>
            <p class="placeholder-message">${t}</p>
            ${g}
        </div>
    `}function W(){return`
        <div id="logs-container" class="logs-container">
            <p>Loading logs...</p>
        </div>
    `}async function A(){let e=document.getElementById("logs-container");if(!e)return!1;e.classList.remove("placeholder-active");let t=localStorage.getItem("service_map");if(!t)return e.classList.add("placeholder-active"),e.innerHTML=S("config","No service map configured.","Please upload your service-map.json in Settings to enable log monitoring."),!1;let i;try{i=JSON.parse(t)}catch(p){return console.error("Error parsing service_map from localStorage:",p),e.classList.add("placeholder-active"),e.innerHTML=S("error","Invalid service map data.","Please re-upload a valid service-map.json file in Settings."),!1}let a=null;if(i&&typeof i.services=="object"){let p=["cs","be","th"];for(let w of p)if(Array.isArray(i.services[w])){let l=i.services[w].find(m=>m.short_name==="event"||m.id==="event"||m.id==="dex-event-service");if(l){a=l;break}}}if(!a)return e.classList.add("placeholder-active"),e.innerHTML=S("error","Event service not found in service map.","Please ensure dex-event-service is configured in your service-map.json."),!1;let g=`http://${a.domain==="0.0.0.0"?"localhost":a.domain}:${a.port}/logs`;try{let p=await fetch(g);if(!p.ok)return e.classList.add("placeholder-active"),e.innerHTML=S("offline","Event service is offline.","Please ensure the event service is running."),!1;let w=await p.json();if(!w||w.length===0)return e.classList.add("placeholder-active"),e.innerHTML=S("empty","No logs found.","Service logs will appear here when available."),!1;let l=["local-ollama-0","local-cache-0","cloud-cache-0","cloud-cache-1"],m=w.filter(u=>!l.includes(u.id));m.forEach(u=>{u.logs.reverse()}),m.reverse();let T=m.map(u=>{let h=u.logs.join(`
`);return`
                <div class="log-report">
                    <div class="log-report-header">
                        <h3>${u.id}</h3>
                        <button class="copy-logs-btn" data-logs="${escape(h)}">
                            <i class="bx bx-copy"></i>
                        </button>
                    </div>
                    <pre class="log-content">${h}</pre>
                </div>
            `}).join("");return e.innerHTML=T,document.querySelectorAll(".copy-logs-btn").forEach(u=>{u.addEventListener("click",()=>{let h=unescape(u.dataset.logs);navigator.clipboard.writeText(h).then(()=>{let y=u.querySelector("i");y.classList.remove("bx-copy"),y.classList.add("bx-check"),setTimeout(()=>{y.classList.remove("bx-check"),y.classList.add("bx-copy")},2e3)})})}),!0}catch(p){return console.error("Error fetching logs:",p),e.classList.add("placeholder-active"),e.innerHTML=S("offline","Failed to load logs.","The event service may be offline, unreachable, or blocked by a browser extension (e.g., ad blocker)."),!1}}function F(){console.log("Welcome to Easter Company."),B(),N();let e=j();D(e),_();let t=document.querySelector("footer"),i=null;function a(){i=null,t?.classList.remove("hide"),document.querySelectorAll(".nav-right i").forEach(o=>o.classList.remove("active","inactive"))}function c(o,s=null){let d=i&&i.id===o.id;i&&i.close(!d),d?i=null:setTimeout(()=>{o.open(),i=o,document.querySelectorAll(".nav-right i").forEach(r=>{let n=r===s;r.classList.toggle("active",n),r.classList.toggle("inactive",!n&&s)}),t?.classList.add("hide")},i?220:0)}function g(o,s,d=null){let n={config:"bx-cog",error:"bx-error-circle",empty:"bx-info-circle",offline:"bx-wifi-off"}[o]||"bx-info-circle",f=d?`<p class="placeholder-action">${d}</p>`:"";return`<div class="tab-placeholder"><i class='bx ${n} placeholder-icon'></i><p class="placeholder-message">${s}</p>${f}</div>`}let p=null,w=null,l=null,m=()=>localStorage.getItem("service_map")?'<div id="system-monitor-widgets" class="system-monitor-widgets"><p>Loading services...</p></div>':g("config","No service map configured.","Upload service-map.json in Settings."),T=()=>localStorage.getItem("service_map")?'<div id="models-widgets" class="system-monitor-widgets"><p>Loading models...</p></div>':g("config","No service map configured.","Upload service-map.json in Settings."),u=()=>'<div id="events-timeline" class="events-timeline"><p>Loading events...</p></div>';async function h(){if(!localStorage.getItem("service_map"))return null;try{let s=(JSON.parse(localStorage.getItem("service_map")).services?.cs||[]).find(f=>f.id==="dex-event-service");if(!s)return null;let r=`http://${s.domain==="0.0.0.0"?"localhost":s.domain}:${s.port}/system_monitor_metrics`,n=await fetch(r);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(o){return console.error("Error fetching system data:",o),null}}function y(o){let s=document.getElementById("system-monitor-widgets");if(!s)return;if(!o||!o.services){s.innerHTML=g("offline","Failed to load system metrics.","The event service may be offline or unreachable.");return}p=Date.now();let d=o.services||[],r=new Map(Array.from(s.querySelectorAll(".service-widget")).map(n=>[n.dataset.serviceId,n]));d.forEach(n=>{let f=`<div>${n.short_name}</div>`,C=r.get(n.id);C?(C.innerHTML!==f&&(C.innerHTML=f),r.delete(n.id)):s.insertAdjacentHTML("beforeend",`<div class="service-widget" data-service-id="${n.id}">${f}</div>`)}),r.forEach(n=>n.remove())}function $(o){let s=document.getElementById("models-widgets");if(!s)return;if(!o||!o.models){s.innerHTML=g("offline","Failed to load model status.");return}let d=o.models||[];if(d.length===0){s.innerHTML=g("empty","No models found.");return}s.innerHTML=d.map(r=>{let n=r.status==="Downloaded",f=n?"service-widget-online":"service-widget-offline",C=n?"OK":"MISSING",K=n&&r.size>0?`${(r.size/1e9).toFixed(2)} GB`:"-";return`<div class="service-widget ${f}" data-model-name="${r.name}"><div class="service-widget-header"><i class="bx ${n?"bx-check-circle":"bx-x-circle"}"></i><h3>${r.name}</h3><span class="service-widget-status">${C}</span></div><div class="service-widget-body"><div class="service-widget-info"><span class="info-label">Type:</span><span class="info-value">${r.type}</span></div><div class="service-widget-info"><span class="info-label">Size:</span><span class="info-value">${K}</span></div></div></div>`}).join("")}async function E(){}function L(o,s){let d=document.querySelector(`.tab[data-tab-index="${o}"] .tab-subtitle`);if(!d)return;if(!s){d.textContent="never";return}let n=(Date.now()-s)/1e3,f;n<10?f=`${n.toFixed(1)}s ago`:n<60?f=`${Math.floor(n)}s ago`:f=`${Math.floor(n/60)}m ago`,d.textContent=`Last updated: ${f}`}async function v(){let o=await h();y(o),$(o),await E(),await A()&&(l=Date.now());let s=setInterval(()=>{if(!I.isOpen())return clearInterval(s);L(1,l),L(3,w),L(4,p)},1e3),d=setInterval(async()=>{if(!I.isOpen())return clearInterval(d);await E(),await A()&&(l=Date.now())},5e3),r=setInterval(async()=>{if(!I.isOpen())return clearInterval(r);let n=await h();y(n),$(n)},3e4)}let b=k({id:"login-window",title:"Welcome",content:'<div class="login-split-container"><div class="login-top-section"><div class="login-form"><p>Enter your email to continue</p><form id="login-form"><input type="email" id="email-input" placeholder="you@easter.company" required autocomplete="email" /><button type="submit">Continue</button><div id="login-error" class="error" style="display: none;"></div></form></div></div><div class="login-bottom-section"><div class="login-disclaimer"><h2>Early Access</h2><p>Contribute on <a href="https://github.com/eastercompany" target="_blank" rel="noopener noreferrer">GitHub</a> to unlock early access.</p></div></div></div>',icon:"bx-log-in",onClose:a}),M=k({id:"user-window",title:"User Profile",content:`<p>Logged in as: ${O()||"Unknown"}</p>`,icon:"bx-user",onClose:a}),I=k({id:"message-window",tabs:[{icon:"bx-bell",title:"Notifications",content:g("empty","No notifications yet.")},{icon:"bx-history",title:"Logs",content:W()},{icon:"bx-brain",title:"Models",content:T()},{icon:"bx-calendar-event",title:"Events",content:u()},{icon:"bx-line-chart",title:"System Monitor",content:m()}],icon:"bxs-message-dots",onClose:a,onOpen:()=>setTimeout(v,100)});function P(){return"..."}function z(){}let G=k({id:"settings-window",title:"Settings",content:P(),icon:"bx-cog",onClose:a,onOpen:z});e?(document.getElementById("user-icon")?.addEventListener("click",o=>c(M,o.currentTarget)),document.getElementById("message-icon")?.addEventListener("click",o=>c(I,o.currentTarget)),document.getElementById("settings-icon")?.addEventListener("click",o=>c(G,o.currentTarget))):document.getElementById("login-btn")?.addEventListener("click",()=>{c(b),setTimeout(()=>{document.getElementById("login-form")?.addEventListener("submit",o=>{o.preventDefault();try{U(document.getElementById("email-input").value),window.location.reload()}catch(s){document.getElementById("login-error").textContent=s.message,document.getElementById("login-error").style.display="block"}})},100)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",F):F();})();
//# sourceMappingURL=dex.bfb545ce.js.map
